(()=>{var t,e={9713:t=>{t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},6853:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var o=n(9713),i=n.n(o);const a=function(t){var e={},n=jQuery(t).serializeArray();return jQuery.each(n,(function(t,n){e[n.name]=n.value})),e},r={initial_form:null,init:function(){var t=jQuery;t(".noptin-create-new-automation-campaign").on("click",this.create_automation),t(document).on("click",".noptin-automation-type-select.enabled",this.select_automation),t("#wp-noptinemailbody-media-buttons").append('&nbsp;<a class="button noptin-send-test-email"><span class="wp-menu-image dashicons-before dashicons-email-alt"></span>Send a test email</a>'),t(".noptin-send-test-email").on("click",this.send_test_email),t(".noptin-filter-recipients").on("click",this.filter_recipients),t(".noptin-filter-post-notifications-post-types").on("click",this.new_post_notifications_filter_post_types),t(".noptin-filter-post-notifications-taxonomies").on("click",this.new_post_notifications_filter_taxonomies),t(".noptin-delete-campaign").on("click",this.delete_campaign),t(".noptin-stop-campaign").on("click",this.stop_campaign)},create_automation:function(t){t.preventDefault(),Swal.fire({html:jQuery("#noptin-create-automation").html(),showConfirmButton:!1,showCloseButton:!0,width:600})},select_automation:function(t){var e;t.preventDefault();var n=jQuery(this).find(".noptin-automation-type-setup-form").clone().find("form").attr("id","noptinCurrentForm").parent(),o=n.html();n.remove(),Swal.fire((e={html:o,showCloseButton:!0,width:800,showCancelButton:!0,confirmButtonText:"Continue",showLoaderOnConfirm:!0},i()(e,"showCloseButton",!0),i()(e,"focusConfirm",!1),i()(e,"allowOutsideClick",(function(){return!Swal.isLoading()})),i()(e,"preConfirm",(function(){var t=a(jQuery("#noptinCurrentForm"));return t.action="noptin_setup_automation",jQuery.post(noptin_params.ajaxurl,t).done((function(t){window.location=t})).fail((function(t){Swal.fire({type:"error",title:"Error",text:"There was an error creating your automation",showCloseButton:!0,confirmButtonText:"Close",confirmButtonColor:"#9e9e9e",footer:"<code>Status: ".concat(t.status," &nbsp; Status text: ").concat(t.statusText,"</code>")})})),jQuery.Deferred()})),e))},stop_campaign:function(t){t.preventDefault();var e={id:jQuery(this).data("id"),_wpnonce:noptin_params.nonce,action:"noptin_stop_campaign"};Swal.fire({titleText:"Are you sure?",text:"This campaign will stop sending and be reverted to draft status.",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#9e9e9e",confirmButtonText:"Yes, stop it!",showLoaderOnConfirm:!0,showCloseButton:!0,focusConfirm:!1,allowOutsideClick:function(){return!Swal.isLoading()},preConfirm:function(){return jQuery.get(noptin_params.ajaxurl,e).done((function(){window.location=window.location,Swal.fire("Success","Your campaign was reverted to draft","success")})).fail((function(){Swal.fire("Error","Unable to stop your campaign. Try again.","error")})),jQuery.Deferred()}})},delete_campaign:function(t){t.preventDefault();var e=jQuery(this).closest("tr"),n={id:jQuery(this).data("id"),_wpnonce:noptin_params.nonce,action:"noptin_delete_campaign"};Swal.fire({titleText:"Are you sure?",text:"You are about to permanently delete this campaign.",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#9e9e9e",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,showCloseButton:!0,focusConfirm:!1,allowOutsideClick:function(){return!Swal.isLoading()},preConfirm:function(){return jQuery.get(noptin_params.ajaxurl,n).done((function(){jQuery(e).remove(),Swal.fire("Success","Your campaign was deleted","success")})).fail((function(){Swal.fire("Error","Unable to delete your campaign. Try again.","error")})),jQuery.Deferred()}})},send_test_email:function(t){t.preventDefault(),tinyMCE.triggerSave();var e=a(jQuery(this).closest("form"));Swal.fire({titleText:"Send a test email to:",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Send",showLoaderOnConfirm:!0,showCloseButton:!0,input:"email",inputValue:noptin_params.admin_email,inputPlaceholder:noptin_params.admin_email,allowOutsideClick:function(){return!Swal.isLoading()},preConfirm:function(t){return e.email=t,e.action="noptin_send_test_email",jQuery.post(noptin_params.ajaxurl,e).done((function(t){t.success?Swal.fire("Success",t.data,"success"):Swal.fire({type:"error",title:"Error!",text:t.data,showCloseButton:!0,confirmButtonText:"Close",confirmButtonColor:"#9e9e9e",footer:'<a href="https://noptin.com/guide/sending-emails/troubleshooting/">How to troubleshoot this error.</a>'})})).fail((function(t){Swal.fire({type:"error",title:"Unable to connect",text:"This might be a problem with your server or your internet connection",showCloseButton:!0,confirmButtonText:"Close",confirmButtonColor:"#9e9e9e",footer:"<code>Status: ".concat(t.status," &nbsp; Status text: ").concat(t.statusText,"</code>")})})),jQuery.Deferred()}})},filter_recipients:function(t){t.preventDefault(),jQuery("#noptin_recipients_filter_div").length||Swal.fire({titleText:"Addon Needed!",html:"Install the <strong>Ultimate Addons Pack</strong> to filter recipients by their sign up method/form, tags or the time in which they signed up.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Install Addon",showCloseButton:!0}).then((function(t){t.value&&(window.location.href="https://noptin.com/product/ultimate-addons-pack")}))},new_post_notifications_filter_post_types:function(t){t.preventDefault(),Swal.fire({titleText:"Addon Needed!",html:"Install the <strong>Ultimate Addons Pack</strong> to send new post notifications to other post types.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Install Addon",showCloseButton:!0}).then((function(t){t.value&&(window.location.href="https://noptin.com/product/ultimate-addons-pack")}))},new_post_notifications_filter_taxonomies:function(t){t.preventDefault(),Swal.fire({titleText:"Addon Needed!",html:"Install the <strong>Ultimate Addons Pack</strong> to limit new post notifications to specific categories, tags or other taxonomies.",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Install Addon",showCloseButton:!0}).then((function(t){t.value&&(window.location.href="https://noptin.com/product/ultimate-addons-pack")}))}}}},n={};function o(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t=jQuery,window.noptinNewsletterEditor=o(6853).Z,t(document).ready((function(){noptinNewsletterEditor.init(),t(".noptin-newsletter-schedule-control .edit-schedule").on("click",(function(e){e.preventDefault();var n=t(this).closest(".noptin-newsletter-schedule-control");n.find(".noptin-schedule").slideDown(),n.find(".edit-schedule").fadeOut(),n.find(".scheduled").show(),n.find(".not-scheduled").hide(),n.find(".scheduled-date").hide()}));var e=function(e){if(e.find(".noptin-schedule").slideUp(),e.find(".edit-schedule").fadeIn(),"scheduled"==e.data("status")){if(e.find(".scheduled-date").show(),e.find(".scheduled").show(),e.find(".not-scheduled").hide(),e.data("schedules")){var n=e.data("schedules");t("#".concat(n)).val(t("#".concat(n)).data("scheduled"))}}else if(e.find(".scheduled-date").hide(),e.find(".scheduled").hide(),e.find(".not-scheduled").show(),e.data("schedules")){var o=e.data("schedules");t("#".concat(o)).val(t("#".concat(o)).data("not-scheduled"))}};e(t(".noptin-newsletter-schedule-control")),t(".noptin-newsletter-schedule-control .save-timestamp").on("click",(function(n){n.preventDefault();var o=t(this).closest(".noptin-newsletter-schedule-control"),i=o.find(".noptin-schedule-input-date").val(),a=o.find(".noptin-schedule-input-time").val(),r="".concat(i," ").concat(a);o.find(".scheduled-date").text(r),o.find(".noptin-schedule-selected-date").val(r),o.data("status","scheduled"),e(o)})),t(".noptin-newsletter-schedule-control .cancel-timestamp").on("click",(function(n){n.preventDefault(),e(t(this).closest(".noptin-newsletter-schedule-control"))})),t(".noptin-schedule-input-date").flatpickr({dateFormat:"Y-m-d",minDate:"today",altInput:!0,altFormat:"F j, Y"}),t(".noptin-schedule-input-time").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0})}))})();