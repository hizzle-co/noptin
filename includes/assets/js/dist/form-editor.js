(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}var n;(n=jQuery)("#noptin-form-editor-nav-tab-wrapper .nav-tab").on("click",(function(t){t.preventDefault();var e=n(this).data("id");n("#noptin-form-editor-nav-tab-wrapper .nav-tab-active:not(.noptin-form-tab-".concat(e,")")).removeClass("nav-tab-active"),n(this).addClass("nav-tab-active").blur(),n(".noptin-form-tab-content-active:not(.noptin-form-tab-content-".concat(e,")")).removeClass("noptin-form-tab-content-active"),n(".noptin-form-tab-content-".concat(e)).addClass("noptin-form-tab-content-active");var i=n(".noptin-form-tab-content-active h2:first-of-type").text();if(i){var o=document.title.split("-");document.title=document.title.replace(o[0],i+" ")}window.history.replaceState&&window.history.replaceState(e,i,n(this).attr("href")),n(this).closest("form").attr("action",n(this).attr("href"))})),n("#noptin-form-editor-app").on("click","#noptin-form-editor-container .noptin-accordion-trigger",(function(t){t.preventDefault();var e=n(this).closest(".noptin-settings-panel"),i=e.find(".noptin-accordion-trigger");"true"===i.attr("aria-expanded")?(i.attr("aria-expanded","false"),e.addClass("noptin-settings-panel__hidden",!0)):(i.attr("aria-expanded","true"),e.removeClass("noptin-settings-panel__hidden",!1))})),n("#noptin-form-fields-panel-fields .noptin-button-add-field").on("click",(function(t){t.preventDefault(),n("#noptin-form-fields-panel-fields .form-fields-inner").append(n("#noptin-form-fields-panel-new-field-template").html())})),n("#noptin-form-editor-app").on("change",".noptin-form-settings-field-type",(function(t){t.preventDefault();var e=n(this).val(),i=n(this).closest(".noptin-settings-panel__content");i.html(n("#noptin-form-fields-panel-".concat(e,"-template")).html()).attr("id","noptin-form-fields-panel-fields-".concat(e,"-content")).closest(".noptin-settings-panel").attr("id","noptin-form-fields-panel-fields-".concat(e)).find(".noptin-accordion-trigger").first().attr("aria-controls","noptin-form-fields-panel-fields-".concat(e,"-content")).find(".badge").text(e).show(),i.find(".noptin-form-field-label").trigger("input")})),n("#noptin-form-fields-panel-fields").on("input",".noptin-form-field-label",(function(){n(this).closest(".noptin-settings-panel").find(".noptin-accordion-trigger .title").first().text(n(this).val())})),n("#noptin-form-fields-panel-fields").on("click",".noptin-field-editor-delete",(function(t){t.preventDefault(),n(this).closest(".noptin-settings-panel").fadeOut("fast",(function(){n(this).remove()}))})),"object"==("undefined"==typeof Sortable?"undefined":t(Sortable))&&Sortable.default&&new Sortable.default(document.querySelectorAll("#noptin-form-fields-panel-fields-content .form-fields-inner"),{draggable:".draggable-source",handle:".dashicons-move"}),n("#noptin-form-editor-app").on("submit",(function(){window.tinyMCE&&window.tinyMCE.triggerSave(),n("#noptin-form-fields-panel-fields-content .form-fields-inner > fieldset").each((function(t){n(this).find('[name^="noptin_form[settings][fields][]"]').each((function(){var e=n(this).attr("name");n(this).attr("name",e.replace("[]","[".concat(t,"]")))}))})),n('#noptin-form-fields-panel-field-templates [name^="noptin_form[settings][fields][]"]').each((function(){n(this).attr("name","")}))}))})();