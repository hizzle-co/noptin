(()=>{"use strict";var e={249:(e,t,n)=>{n.d(t,{Z:()=>o});const o={initial_form:null,init:function(){var e=jQuery;e(".noptin-send-test-email").on("click",this.send_test_email),e(".noptin-filter-recipients").on("click",this.filter_recipients),e(".noptin-filter-post-notifications-post-types").on("click",this.new_post_notifications_filter_post_types),e(".noptin-filter-post-notifications-taxonomies").on("click",this.new_post_notifications_filter_taxonomies),e(".noptin-stop-campaign").on("click",this.stop_campaign)},stop_campaign:function(e){e.preventDefault();var t={id:jQuery(this).data("id"),_wpnonce:noptin_params.nonce,action:"noptin_stop_campaign"};Swal.fire({titleText:"Are you sure?",text:"This campaign will stop sending and be reverted to draft status.",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#9e9e9e",confirmButtonText:"Yes, stop it!",showLoaderOnConfirm:!0,showCloseButton:!0,focusConfirm:!1,allowOutsideClick:function(){return!Swal.isLoading()},preConfirm:function(){return jQuery.get(noptin_params.ajaxurl,t).done((function(){window.location=window.location,Swal.fire("Success","Your campaign was reverted to draft","success")})).fail((function(){Swal.fire("Error","Unable to stop your campaign. Try again.","error")})),jQuery.Deferred()}})},send_test_email:function(e){e.preventDefault(),tinyMCE.triggerSave();var t=jQuery(this).closest("form").serialize();Swal.fire({titleText:"Send a test email to:",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Send",showLoaderOnConfirm:!0,showCloseButton:!0,input:"email",inputValue:noptin_params.admin_email,inputPlaceholder:noptin_params.admin_email,allowOutsideClick:function(){return!Swal.isLoading()},preConfirm:function(e){return t+="&email="+e,t+="&action=noptin_send_test_email",jQuery.post(noptin_params.ajaxurl,t).done((function(e){e.success?Swal.fire("Success",e.data,"success"):Swal.fire({type:"error",title:"Error!",text:e.data,showCloseButton:!0,confirmButtonText:"Close",confirmButtonColor:"#9e9e9e",footer:'<a href="https://noptin.com/guide/sending-emails/troubleshooting/?utm_medium=plugin-dashboard&utm_campaign=email-campaigns&utm_source=troubleshooting">How to troubleshoot this error.</a>'})})).fail((function(e){Swal.fire({type:"error",title:"Unable to connect",text:"This might be a problem with your server or your internet connection",showCloseButton:!0,confirmButtonText:"Close",confirmButtonColor:"#9e9e9e",footer:"<code>Status: ".concat(e.status," &nbsp; Status text: ").concat(e.statusText,"</code>")})})),jQuery.Deferred()}})}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n,o){return(n=function(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}(n))in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t}const o=window.wp.element,r=window.wp.domReady;var a=n.n(r);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function l(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}const c=window.wp.components,s=window.wp.i18n;function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const d=window.wp.primitives,m=(0,o.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(d.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"}));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?f(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var b=[{label:(0,s.__)("Only run if","newsletter-optin-box"),value:"allow"},{label:(0,s.__)("Do not run if","newsletter-optin-box"),value:"prevent"}],y=[{label:(0,s.__)("all","newsletter-optin-box"),value:"all"},{label:(0,s.__)("any","newsletter-optin-box"),value:"any"}];function v(e,t){return[{label:t,value:"",disabled:!0}].concat(u(e))}function h(e){var t=e.type,n=e.action,r=e.ruleCount,a=e.setConditionalLogicAttribute,i=r>1;return(0,o.createElement)(c.Flex,{className:"noptin-component__field-lg",wrap:!0},(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.SelectControl,{label:(0,s.__)("If","newsletter-optin-box"),hideLabelFromVision:!0,value:n||"allow",options:b,onChange:function(e){return a("action",e)},size:"default",__nextHasNoMarginBottom:!0})),i&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.SelectControl,{label:(0,s.__)("all","newsletter-optin-box"),hideLabelFromVision:!0,value:t||"all",options:y,onChange:function(e){return a("type",e)},size:"default",__nextHasNoMarginBottom:!0})),(0,o.createElement)(c.FlexBlock,null,(0,s.__)("of the following rules are true:","newsletter-optin-box"))))}function _(e){var t=e.rule,n=e.comparisons,r=e.availableConditionTypes,a=e.updateRule,i=e.removeRule,l=e.conditionType,u=e.isLastRule,p=(e.isFirstRule,(0,o.useMemo)((function(){return e=t.type,r[e]||{};var e}),[r,t.type])),d=(0,o.useMemo)((function(){return e=p.options,t=[],e?Array.isArray(e)?(e.forEach((function(e,n){t.push({label:e,value:n})})),t):(Object.keys(e).forEach((function(n){t.push({label:e[n],value:n})})),t):t;var e,t}),[p]),m=d.length>0,f=(0,o.useMemo)((function(){return p.type?p.type:"string"}),[p]),g=(0,o.useMemo)((function(){var e=[];return Object.keys(n).forEach((function(t){var o=n[t].type;if(m){if("string"===f&&"is"!=t&&"is_not"!=t)return;if("is_empty"===t||"is_not_empty"===t||"is_between"===t)return}"any"!==o&&o!=f||e.push({label:n[t].name,value:t})})),e}),[f]),b="",y=[];Object.keys(r).forEach((function(e){var t=r[e];""===b&&(b=t.type),y.push({label:t.label,value:e})}));var h=function(e,n){a(e,n),"type"!==e&&""===t.type&&a("type",b),"condition"!==e&&""===t.condition&&a("condition","is"),"type"===e&&(a("condition","is"),a("value",""))},_="is_empty"===t.condition||"is_not_empty"===t.condition,w=m&&!_,x=!m&&!_;return(0,o.createElement)(c.Flex,{className:"noptin-component__field-lg",wrap:!0},(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.SelectControl,{label:(0,s.__)("Condition Type","newsletter-optin-box"),hideLabelFromVision:!0,value:t.type?t.type:b,options:v(y,(0,s.__)("Select a condition","newsletter-optin-box")),onChange:function(e){return h("type",e)},size:"default",__nextHasNoMarginBottom:!0})),(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.SelectControl,{label:(0,s.__)("Comparison","newsletter-optin-box"),hideLabelFromVision:!0,value:t.condition?t.condition:"is",options:v(g,(0,s.__)("Select a comparison","newsletter-optin-box")),onChange:function(e){return h("condition",e)},size:"default",__nextHasNoMarginBottom:!0})),(0,o.createElement)(c.FlexItem,null,w&&(0,o.createElement)(c.SelectControl,{label:(0,s.__)("Value","newsletter-optin-box"),hideLabelFromVision:!0,value:t.value?t.value:"",options:v(d,(0,s.__)("Select a value","newsletter-optin-box")),onChange:function(e){return a("value",e)},size:"default",__nextHasNoMarginBottom:!0}),x&&(0,o.createElement)(c.TextControl,{type:"number"===f?"number":"text",label:(0,s.__)("Value","newsletter-optin-box"),hideLabelFromVision:!0,value:t.value?t.value:"",onChange:function(e){return a("value",e)},__nextHasNoMarginBottom:!0})),(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.Button,{onClick:i,icon:"trash"})),(0,o.createElement)(c.FlexBlock,null,!u&&(0,o.createElement)(o.Fragment,null,"any"===l&&(0,s.__)("or","newsletter-optin-box"),"all"===l&&(0,s.__)("and","newsletter-optin-box"))))}function w(e){var t=e.rules,n=e.conditionType,r=e.comparisons,a=e.availableSmartTags,i=e.setConditionalLogicAttribute,l=Array.isArray(t)?t:[],p=(0,o.useMemo)((function(){var e={};return a.forEach((function(t){t.conditional_logic&&(e[t.smart_tag]={key:t.smart_tag,label:t.label,options:t.options,type:t.conditional_logic,placeholder:t.placeholder?t.placeholder:""})})),e}),[a]),d=l.length;return(0,o.createElement)("div",{className:"noptin-conditional-logic-rules"},l.map((function(e,t){return(0,o.createElement)(_,{key:t,rule:e,updateRule:function(e,n){return function(e,t,n){var o=u(l);o[e][t]=n,i("rules",o)}(t,e,n)},removeRule:function(){return function(e){var t=u(l);t.splice(e,1),i("rules",t)}(t)},availableConditionTypes:p,isLastRule:t===d-1,isFirstRule:0===t,conditionType:n,comparisons:r})})),(0,o.createElement)(c.Button,{className:"noptin-add-conditional-rule",onClick:function(){var e=Object.keys(p)[0],t=p[e].options,n=p[e].placeholder?p[e].placeholder:"",o=Array.isArray(t)&&t.length?Object.keys(t)[0]:n,r=u(l);r.push({type:e,condition:"is",value:o}),i("rules",r)},variant:"secondary"},0===d?(0,s.__)("Add a rule","newsletter-optin-box"):(0,s.__)("Add another rule","newsletter-optin-box")))}function x(n){var r=n.onChange,a=n.value,i=n.comparisons,l=n.toggleText,u=n.availableSmartTags,p=n.className;"object"!==e(a)&&(a={enabled:!1,action:"allow",rules:[{condition:"is",type:"date",value:""}],type:"all"});var d=function(e,n){r(g(g({},a),{},t({},e,n)))};return(0,o.createElement)("div",{className:p},(0,o.createElement)(c.ToggleControl,{checked:!!a.enabled,onChange:function(e){return d("enabled",e)},className:"noptin-component__field",label:l||(0,s.__)("Optionally enable/disable this trigger depending on specific conditions.","newsletter-optin-box"),__nextHasNoMarginBottom:!0}),a.enabled&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(h,{ruleCount:a.rules?a.rules.length:0,type:a.type,action:a.action,setConditionalLogicAttribute:d}),(0,o.createElement)(w,{rules:a.rules,conditionType:a.type,comparisons:i,availableSmartTags:u,setConditionalLogicAttribute:d})))}var E={"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"!==":function(e,t){return e!==t},">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},includes:function(e,t){return e.includes(t)},"!includes":function(e,t){return!e.includes(t)},empty:function(e){return!e},"!empty":function(e){return e}},O=function(e,t,n){return!!E[t]&&E[t](e,n)},C=["setting","availableSmartTags","isPressEnterToChange"],S=["setting","availableSmartTags","value","onChange"],j=["setting","value","options","onChange"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?k(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):k(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var P=["number","search","email","password","tel","url","date"];function B(e){var t=e.setting,n=e.availableSmartTags,r=e.isPressEnterToChange,a=p(e,C);void 0===r&&(r=!0);var i=N(n,(0,o.useCallback)((function(e){a.onChange&&a.onChange(a.value?"".concat(a.value," ").concat(e).trim():e)}),[a.value,a.onChange]));return t.disabled&&(a.readOnly=!0,a.onFocus=function(e){return e.target.select()}),(0,o.createElement)(o.Fragment,null,(0,o.createElement)(c.__experimentalInputControl,T(T({},a),{},{type:P.includes(t.type)?t.type:"text",placeholder:t.placeholder?t.placeholder:"",suffix:i,isPressEnterToChange:r,__nextHasNoMarginBottom:!0,__next36pxDefaultSize:!0})))}var A=[{id:"key",label:(0,s.__)("Key","noptin-addons-pack"),type:"text"},{id:"value",label:(0,s.__)("Value","noptin-addons-pack"),type:"text"}];function N(e,t){var n=(0,o.useMemo)((function(){if(!Array.isArray(e))return{};var t={};return e.forEach((function(e){var n=e.group?e.group:(0,s.__)("General","newsletter-optin-box");t[n]=t[n]?t[n]:[],t[n].push(e)})),t}),[e]),r=Object.keys(n).length,a=null;return r>0&&(a=(0,o.createElement)(c.DropdownMenu,{icon:"shortcode",label:(0,s.__)("Insert merge tag","newsletter-optin-box"),showTooltip:!0},(function(e){var a=e.onClose;return(0,o.createElement)(o.Fragment,null,Object.keys(n).map((function(e,i){return(0,o.createElement)(c.MenuGroup,{label:r>1?e:void 0,key:i},n[e].map((function(e){return(0,o.createElement)(c.MenuItem,{icon:e.icon||m,iconPosition:"left",onClick:function(){var n;t&&t("[[".concat((n=e).example?n.example:n.default?"".concat(n.smart_tag,' default="').concat(n.default,'"'):"".concat(n.smart_tag),"]]")),a()},key:e.smart_tag},e.label)})))})))}))),a}function F(e){var t=e.setting,n=e.availableSmartTags,r=e.value,a=e.onChange,i=p(e,S),l=(0,c.useBaseControlProps)(i),d=l.baseControlProps,m=l.controlProps;Array.isArray(r)||(r=[]);var f=(0,o.useCallback)((function(e){var t=e.item,i=e.index;return(0,o.createElement)(c.Flex,{className:"noptin-repeater-item",wrap:!0},A.map((function(e,l){return(0,o.createElement)(D,{key:l,availableSmartTags:n,field:e,value:void 0===t[e.id]?"":t[e.id],onChange:function(t){var n=u(r);n[i][e.id]=t,a(n)}})})),(0,o.createElement)(c.FlexItem,null,(0,o.createElement)(c.Button,{icon:"trash",variant:"tertiary",className:"noptin-component__field",label:(0,s.__)("Delete","noptin-addons-pack"),showTooltip:!0,onClick:function(){var e=u(r);e.splice(i,1),a(e)},isDestructive:!0})))}),[r,a]);return(0,o.createElement)(c.BaseControl,T({},d),(0,o.createElement)("div",T({},m),r.map((function(e,t){return(0,o.createElement)(f,{key:t,item:e,index:t})})),(0,o.createElement)(c.Button,{onClick:function(){var e=u(r);e.push({}),a(e)},variant:"secondary"},t.add_field?t.add_field:(0,s.__)("Add","newsletter-optin-box"))))}function D(e){var t=e.field,n=e.availableSmartTags,r=e.value,a=e.onChange,i=N(n,(0,o.useCallback)((function(e){a&&a(r?"".concat(r," ").concat(e).trim():e)}),[r,a]));return(0,o.createElement)(c.FlexBlock,null,(0,o.createElement)(c.__experimentalInputControl,{label:t.label,type:t.type,value:r,placeholder:(0,s.sprintf)((0,s.__)("Enter %s","noptin-addons-pack"),t.label),className:"noptin-component__field noptin-condition-field",suffix:i,onChange:a,isPressEnterToChange:!0,__nextHasNoMarginBottom:!0,__next36pxDefaultSize:!0}))}function M(e){e.setting;var t=e.value,n=e.options,r=e.onChange,a=p(e,j),i=(0,c.useBaseControlProps)(a),l=i.baseControlProps,s=i.controlProps;return Array.isArray(t)||(t=[]),(0,o.createElement)(c.BaseControl,T({},l),(0,o.createElement)("div",T({},s),n.map((function(e,n){return(0,o.createElement)(c.CheckboxControl,{key:n,label:e.label,checked:t.includes(e.value),onChange:function(n){r(n?[].concat(u(t),[e.value]):t.filter((function(t){return t!==e.value})))}})}))))}function I(e){var n=e.settingKey,r=e.setting,a=e.availableSmartTags,i=e.prop,l=e.saved,u=e.setAttributes,p=(0,o.useCallback)((function(e){if(!i)return u(t({},n,e));var o=l[i]?l[i]:{},r=t({},i,T(T({},o),{},t({},n,e)));u(r)}),[n,i,l,u]);if(r.if||r.restrict){var d=r.restrict?r.restrict.split("."):r.if.split(".");if(console.log([d,l,l[d[0]]&&l[d[0]][d[1]]]),!(2!==d.length||l[d[0]]&&l[d[0]][d[1]]))return null;if(1===d.length&&!l[d[0]])return null}if(Array.isArray(r.conditions)){var m=r.conditions.every((function(e){var t=e.key.split("."),n=e.operator?e.operator:"==",o=l[t[0]];return 2===t.length?o&&o[t[1]]&&O(e.value,n,o[t[1]]):O(e.value,n,o)}));if(!m)return null}if(r.condition&&!r.condition(l))return null;var f=l[n];i&&(f=l[i]?l[i][n]:void 0),(void 0===f||r.disabled)&&(f=r.default);var g=void 0!==f&&""!==f&&null!==f,b=[];r.options&&(b=Object.keys(r.options).map((function(e){return{label:r.options[e],value:e}})));var y=r.fullWidth?"noptin-component__field noptin-component__field-".concat(n):"noptin-component__field-lg noptin-component__field-".concat(n),v=r.description?(0,o.createElement)("span",{dangerouslySetInnerHTML:{__html:r.description}}):"",h={label:r.label,value:g?f:"",onChange:p,className:"".concat(y),help:v};return"select"===r.el?(b.unshift({label:r.placeholder?r.placeholder:(0,s.__)("Select an option","newsletter-optin-box"),value:"",disabled:!r.canSelectPlaceholder}),(0,o.createElement)(c.SelectControl,T(T({},h),{},{options:b,__nextHasNoMarginBottom:!0,__next36pxDefaultSize:!0}))):"form_token"===r.el?(0,o.createElement)(c.FormTokenField,T(T({},h),{},{value:Array.isArray(h.value)?h.value:[],suggestions:Array.isArray(r.suggestions)?r.suggestions:[],__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})):"multi_checkbox"===r.el||"multi_checkbox_alt"===r.el?(0,o.createElement)(M,T(T({},h),{},{options:b})):"conditional_logic"===r.el?(0,o.createElement)(x,T(T({},h),{},{availableSmartTags:a,comparisons:r.comparisons,toggleText:r.toggle_text})):"input"===r.el?r.type&&["toggle","switch","checkbox","checkbox_alt"].includes(r.type)?(0,o.createElement)(c.ToggleControl,T(T({},h),{},{checked:!!g&&f,onChange:function(e){p(e)}})):(0,o.createElement)(B,T(T({},h),{},{setting:r,availableSmartTags:"trigger_settings"===i?[]:a,isPressEnterToChange:!r.isInputToChange})):"textarea"===r.el?(0,o.createElement)(c.TextareaControl,T(T({},h),{},{setting:r,placeholder:r.placeholder?r.placeholder:"",__nextHasNoMarginBottom:!0})):"paragraph"===r.el?(0,o.createElement)("div",{className:y},(0,o.createElement)(c.Tip,null,r.content)):"hero"===r.el?(0,o.createElement)("div",{className:y},(0,o.createElement)("h3",null,r.content)):"key_value_repeater"===r.el||"webhook_key_value_repeater"===r.el?(0,o.createElement)(F,T(T({},h),{},{setting:r,availableSmartTags:"trigger_settings"===i?[]:a})):n}var L,H=function(e){var t=e.mergeTag,n=e.onMergeTagClick,r=function(){if(t.example)return t.example;var e="default value";return t.replacement&&(e=t.replacement),t.default&&(e=t.default),e?"".concat(t.smart_tag,' default="').concat(e,'"'):"".concat(t.smart_tag)},a=t.description&&t.description!==t.label;return(0,o.createElement)("tr",{className:"noptin-merge-tag"},(0,o.createElement)("td",null,(0,o.createElement)("label",null,(0,o.createElement)("span",{className:"noptin-merge-tag-label"},t.label),(0,o.createElement)("input",{type:"text",className:"widefat",value:"[[".concat(r(),"]]"),onFocus:function(e){e.target.select(),n&&n("[[".concat(r(),"]]"))},readOnly:!0})),a&&(0,o.createElement)("p",{className:"description noptin-mb0"},t.description)))},z=function(e){var t=e.availableSmartTags,n=e.onMergeTagClick;return(0,o.createElement)("div",{className:"noptin-merge-tags-wrapper"},(0,o.createElement)("table",{className:"widefat striped"},(0,o.createElement)("tbody",null,t.map((function(e){return(0,o.createElement)(H,{key:e.smart_tag,mergeTag:e,onMergeTagClick:n})})))))},R=function(e){var t=e.availableSmartTags;return(0,o.createElement)("div",{id:"noptin-automation-rule-smart-tags",style:{display:"none"}},(0,o.createElement)("h2",null,(0,s.__)("Smart Tags","newsletter-optin-box")),(0,o.createElement)("p",null,(0,s.__)("You can use the following smart tags to generate dynamic values.","newsletter-optin-box")),(0,o.createElement)(z,{availableSmartTags:t}))};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Q(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?V(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):V(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Y(e){var t,n,r=e.saved,a=e.settings,i=e.smartTags,s=Object.keys(a),u=(t=(0,o.useState)(r),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=a.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){s=!0,r=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw r}}return l}}(t,n)||l(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],d=u[1],m=(0,o.useMemo)((function(){return function(e,t){var n=[];return e?(Object.keys(e).forEach((function(o){var r=e[o];if(!r.conditions||r.conditions.every((function(e){if(Array.isArray(e.value))var n=e.value.some((function(n){return n==t[e.key]}));else n=e.value==t[e.key];return n===("is"===e.operator)}))){var a=o;r.label?a=r.label:r.description&&(a=r.description),n.push({smart_tag:o,label:a,example:r.example?r.example:"",description:r.description?r.description:"",placeholder:r.placeholder?r.placeholder:"",conditional_logic:!!r.conditional_logic&&r.conditional_logic,options:r.options?r.options:[],icon:r.icon,group:r.group})}})),n):n}(i,p)}),[i,p]),f=function(e){d(Q(Q({},p),e))};return(0,o.createElement)("div",{className:"noptin-emails-conditional-logic__editor-inner"},(0,o.createElement)(c.SlotFillProvider,null,s.map((function(e){return(0,o.createElement)(I,{key:e,settingKey:e,availableSmartTags:m,saved:p,setAttributes:f,setting:a[e]})})),(0,o.createElement)(R,{availableSmartTags:m}),(0,o.createElement)("input",{type:"hidden",name:"noptin_trigger_settings",value:JSON.stringify(p)})))}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function U(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?J(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):J(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}window.wp.apiFetch,a()((function(){var e=document.getElementById("noptin-emails-conditional-logic__editor-app");if(e){var t=U({},e.dataset);t.id=parseInt(t.id),t.saved=JSON.parse(t.saved),t.settings=JSON.parse(t.settings),t.smartTags=JSON.parse(t.smartTags);var n=(0,o.createElement)(o.StrictMode,null,(0,o.createElement)(Y,U({},t)));o.createRoot?(0,o.createRoot)(e).render(n):(0,o.render)(n,e)}})),L=jQuery,window.noptinNewsletterEditor=n(249).Z,L(document).ready((function(){noptinNewsletterEditor.init(),L(".noptin-newsletter-schedule-control .edit-schedule").on("click",(function(e){e.preventDefault();var t=L(this).closest(".noptin-newsletter-schedule-control");t.find(".noptin-schedule").slideDown(),t.find(".edit-schedule").fadeOut(),t.find(".scheduled").show(),t.find(".not-scheduled").hide(),t.find(".scheduled-date").hide()})),L(".noptin-email_sender").on("change",(function(e){var t=L(this).val();L(".noptin-sender-options").hide(),L(".noptin-sender-options.sender-".concat(t)).show()})),L(".noptin-newsletter-select_2").select2(),L("#noptin-email-type").on("change",(function(){L(this).closest("form").attr("data-type",L(this).val())})),L("#noptin-automated-email-when-to-run").on("change",(function(){L(".noptin-automation-delay-wrapper").toggle("delayed"==L(this).val())})),L("#noptin-post-digest-frequency").on("change",(function(){L(".noptin-post-digest-day").toggle("weekly"==L(this).val()),L(".noptin-post-digest-date").toggle("monthly"==L(this).val()),L(".noptin-post-digest-year-day").toggle("yearly"==L(this).val()),L(".noptin-post-digest-x-days").toggle("x_days"==L(this).val())}));var e=function(e){if(e.find(".noptin-schedule").slideUp(),e.find(".edit-schedule").fadeIn(),"scheduled"==e.data("status")){if(e.find(".scheduled-date").show(),e.find(".scheduled").show(),e.find(".not-scheduled").hide(),e.data("schedules")){var t=e.data("schedules");L("#".concat(t)).val(L("#".concat(t)).data("scheduled"))}}else if(e.find(".scheduled-date").hide(),e.find(".scheduled").hide(),e.find(".not-scheduled").show(),e.data("schedules")){var n=e.data("schedules");L("#".concat(n)).val(L("#".concat(n)).data("not-scheduled"))}};e(L(".noptin-newsletter-schedule-control")),L(".noptin-newsletter-schedule-control .save-timestamp").on("click",(function(t){t.preventDefault();var n=L(this).closest(".noptin-newsletter-schedule-control"),o=n.find(".noptin-schedule-input-date").val(),r=n.find(".noptin-schedule-input-time").val(),a="".concat(o," ").concat(r);n.find(".scheduled-date").text(a),n.find(".noptin-schedule-selected-date").val(a),n.data("status","scheduled"),e(n)})),L(".noptin-newsletter-schedule-control .cancel-timestamp").on("click",(function(t){t.preventDefault(),e(L(this).closest(".noptin-newsletter-schedule-control"))})),L(".noptin-schedule-input-date").flatpickr({dateFormat:"Y-m-d",minDate:"today",altInput:!0,altFormat:"F j, Y"}),L(".noptin-schedule-input-time").flatpickr({enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0}),L(".noptin-manual-email-recipients").on("click",".noptin-manual-email-recipient-remove",(function(e){e.preventDefault(),L(this).closest(".noptin-manual-email-recipient").remove()}))}))})()})();