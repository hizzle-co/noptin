(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.domReady;var r=e.n(n);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,c=[],i=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,l=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw l}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const i=window.wp.components,u=window.wp.i18n,m=window.wp.apiFetch;var s=e.n(m);function p(e){var n=e.title,r=e.isSecodary,l=e.className,a=e.children,o=c((0,t.useState)(!0),2),u=o[0],m=o[1];return l=l||"",(0,t.createElement)(i.Card,{variant:r?"secondary":"primary",className:"noptin-component__section ".concat(l)},(0,t.createElement)(i.CardHeader,null,(0,t.createElement)(i.Flex,null,(0,t.createElement)(i.FlexBlock,null,(0,t.createElement)("h3",null,n)),(0,t.createElement)(i.FlexItem,null,(0,t.createElement)(i.Button,{isTertiary:!0,onClick:function(){return m(!u)}},(0,t.createElement)(i.Icon,{icon:u?"arrow-up-alt2":"arrow-down-alt2"}))))),u&&a)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){var n=e.name,r=e.title,a=e.description,o=e.image,c=e.is_available,m=e.create_url,s=e.upgrade_url,p=c?"primary":"secondary",f=c?"arrow-right-alt":"lock",y=c?(0,u.__)("Set-up","newsletter-optin-box"):(0,u.__)("Upgrade","newsletter-optin-box"),d=c?m:s;return(0,t.createElement)(i.FlexItem,{as:i.Card,className:"noptin-component-card noptin-automated-email-type noptin-automated-email-type__".concat(n),variant:"secondary"},(0,t.createElement)(i.Flex,{direction:"column",justify:"space-between"},(0,t.createElement)(i.FlexBlock,null,(0,t.createElement)(i.CardBody,null,(0,t.createElement)(i.Flex,{wrap:!0},(0,t.createElement)(i.FlexItem,{className:"noptin-component-card-image"},(0,t.createElement)((function(){if("string"==typeof o&&o.startsWith("http"))return(0,t.createElement)("img",{src:o,alt:r});if("string"==typeof o)return(0,t.createElement)(i.Icon,{size:64,icon:o,style:{color:"#424242"}});if("object"===l(o)){var e=o.fill||"#008000",n=o.path||"",a=o.viewBox||"0 0 64 64";return o.path?(0,t.createElement)(i.SVG,{viewBox:a,xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(i.Path,{fill:e,d:n})):(0,t.createElement)(i.Icon,{size:64,style:{color:e},icon:o.icon})}return(0,t.createElement)(i.Icon,{size:64,icon:"email",style:{color:"#424242"}})}),null)),(0,t.createElement)(i.FlexBlock,{className:"noptin-component-card-content"},(0,t.createElement)("h3",null,r),(0,t.createElement)("p",null,a),c?null:(0,t.createElement)("p",{style:{color:"#a00"}},(0,t.createElement)("em",null,(0,u.__)("Not available in your plan","newsletter-optin-box"))))))),(0,t.createElement)(i.FlexItem,null,(0,t.createElement)(i.CardFooter,{className:"noptin-email-type-action",justify:"flex-end"},(0,t.createElement)(i.Button,{variant:p,href:d},(0,t.createElement)("span",{className:"noptin-email-type-action__label"},y),"Â ",(0,t.createElement)(i.Icon,{size:16,icon:f}))))))}function d(e){var n=e.types,r=e.title,l=c((0,t.useState)(!1),2),o=l[0],m=l[1],s=n.length>3;if(0===n.length)return null;var d=o?n:n.slice(0,3);return(0,t.createElement)(p,{className:"noptin-automated-email-types",title:r},(0,t.createElement)(i.CardBody,null,(0,t.createElement)(i.Flex,{className:"noptin-component-card-list",justify:"left",align:"stretch",wrap:!0},d.map((function(e,n){return(0,t.createElement)(y,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:n},e))})))),s?(0,t.createElement)(i.CardFooter,null,(0,t.createElement)("div",{className:"noptin-automated-email-types__show-all"},(0,t.createElement)(i.Button,{isLink:!0,onClick:function(){return m(!o)}},o?(0,u.__)("Show less","newsletter-optin-box"):(0,u.__)("Show all","newsletter-optin-box")))):null)}function b(){var e=c((0,t.useState)(!0),2),n=e[0],r=e[1],l=c((0,t.useState)([]),2),a=l[0],o=l[1],u=c((0,t.useState)(null),2),m=u[0],p=u[1];if((0,t.useEffect)((function(){s()({path:"/noptin/v1/automated-email-campaign-types"}).then((function(e){o(function(e){var t={};return e.forEach((function(e){t[e.category]||(t[e.category]=[]),t[e.category].push(e)})),t}(e))})).catch((function(e){p(e)})).finally((function(){r(!1)}))}),[]),n)return(0,t.createElement)(i.Spinner,null);if(m)return(0,t.createElement)(i.Notice,{status:"error",isDismissible:!1},m.message);var f=Object.keys(a);return(0,t.createElement)("div",{className:"noptin-es6-app"},(0,t.createElement)(i.SlotFillProvider,null,f.map((function(e,n){return(0,t.createElement)(d,{key:n,title:e,types:a[e]})}))))}r()((function(){var e=document.getElementById("noptin-create-automated-email__app");if(e){var n=(0,t.createElement)(t.StrictMode,null,(0,t.createElement)(b,null));t.createRoot?(0,t.createRoot)(e).render(n):(0,t.render)(n,e)}}))})();