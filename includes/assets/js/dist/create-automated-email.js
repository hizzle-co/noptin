(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.domReady;var r=e.n(n);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,o,c=[],i=!0,u=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}const i=window.wp.components,u=window.wp.i18n,m=window.wp.apiFetch;var s=e.n(m);function p(e){var n=e.title,r=e.isSecodary,a=e.className,l=e.children,c=o((0,t.useState)(!0),2),u=c[0],m=c[1];return a=a||"",(0,t.createElement)(i.Card,{variant:r?"secondary":"primary",className:"noptin-component__section ".concat(a)},(0,t.createElement)(i.CardHeader,null,(0,t.createElement)(i.Flex,null,(0,t.createElement)(i.FlexBlock,null,(0,t.createElement)("h3",null,n)),(0,t.createElement)(i.FlexItem,null,(0,t.createElement)(i.Button,{isTertiary:!0,onClick:function(){return m(!u)}},(0,t.createElement)(i.Icon,{icon:u?"arrow-up-alt2":"arrow-down-alt2"}))))),u&&l)}function f(e){var n=e.name,r=e.title,a=e.description,l=e.image,o=e.is_available,m=e.create_url,s=e.upgrade_url,p=o?"primary":"secondary",f=o?"plus":"lock",y=o?(0,u.__)("Create","newsletter-optin-box"):(0,u.__)("Upgrade","newsletter-optin-box"),d=o?m:s;return(0,t.createElement)(i.FlexItem,{as:i.Card,className:"noptin-component-card noptin-automated-email-type noptin-automated-email-type__".concat(n),variant:"secondary"},(0,t.createElement)(i.Flex,{direction:"column",justify:"space-between"},(0,t.createElement)(i.FlexBlock,null,(0,t.createElement)(i.CardBody,null,(0,t.createElement)(i.Flex,{wrap:!0},(0,t.createElement)(i.FlexItem,{className:"noptin-component-card-image"},(0,t.createElement)((function(){if("string"==typeof l&&l.startsWith("http"))return(0,t.createElement)("img",{src:l,alt:r});if("string"==typeof l)return(0,t.createElement)(i.Icon,{size:64,icon:l,style:{color:"#424242"}});if("object"===c(l)){var e=l.fill||"#008000",n=l.path||"",a=l.viewBox||"0 0 64 64";return l.path?(0,t.createElement)(i.SVG,{viewBox:a,xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)(i.Path,{fill:e,d:n})):(0,t.createElement)(i.Icon,{size:64,style:{color:e},icon:l.icon})}return null}),null)),(0,t.createElement)(i.FlexBlock,{className:"noptin-component-card-content"},(0,t.createElement)("h3",null,r),(0,t.createElement)("p",null,a),o?null:(0,t.createElement)("p",{style:{color:"#a00"}},(0,t.createElement)("em",null,(0,u.__)("Not available in your plan","newsletter-optin-box"))))))),(0,t.createElement)(i.FlexItem,null,(0,t.createElement)(i.CardFooter,{className:"noptin-email-type-action",justify:"flex-end"},(0,t.createElement)(i.Button,{variant:p,href:d},(0,t.createElement)(i.Icon,{icon:f}),"Â ",(0,t.createElement)("span",{className:"noptin-email-type-action__label"},y))))))}function y(e){var n=e.types,r=e.title,l=o((0,t.useState)(!1),2),c=l[0],m=l[1],s=n.length>3;if(0===n.length)return null;var y=c?n:n.slice(0,3);return(0,t.createElement)(p,{className:"noptin-automated-email-types",title:r},(0,t.createElement)(i.CardBody,null,(0,t.createElement)(i.Flex,{className:"noptin-component-card-list",justify:"left",align:"stretch",wrap:!0},y.map((function(e,n){return(0,t.createElement)(f,a({key:n},e))})))),s?(0,t.createElement)(i.CardFooter,null,(0,t.createElement)("div",{className:"noptin-automated-email-types__show-all"},(0,t.createElement)(i.Button,{isLink:!0,onClick:function(){return m(!c)}},c?(0,u.__)("Show less","newsletter-optin-box"):(0,u.__)("Show all","newsletter-optin-box")))):null)}function d(){var e=o((0,t.useState)(!0),2),n=e[0],r=e[1],a=o((0,t.useState)([]),2),l=a[0],c=a[1],u=o((0,t.useState)(null),2),m=u[0],p=u[1];if((0,t.useEffect)((function(){s()({path:"/noptin/v1/automated-email-campaign-types"}).then((function(e){c(function(e){var t={};return e.forEach((function(e){t[e.category]||(t[e.category]=[]),t[e.category].push(e)})),t}(e))})).catch((function(e){p(e)})).finally((function(){r(!1)}))}),[]),n)return(0,t.createElement)(i.Spinner,null);if(m)return(0,t.createElement)(i.Notice,{status:"error",isDismissible:!1},m.message);var f=Object.keys(l);return(0,t.createElement)("div",{className:"noptin-es6-app"},(0,t.createElement)(i.SlotFillProvider,null,f.map((function(e,n){return(0,t.createElement)(y,{key:n,title:e,types:l[e]})}))))}r()((function(){var e=document.getElementById("noptin-create-automated-email__app");if(e){var n=(0,t.createElement)(t.StrictMode,null,(0,t.createElement)(d,null));t.createRoot?(0,t.createRoot)(e).render(n):(0,t.render)(n,e)}}))})();