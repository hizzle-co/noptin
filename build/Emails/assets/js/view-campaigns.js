(()=>{"use strict";var e,t={5338:(e,t,n)=>{var a=n(5795);t.H=a.createRoot,a.hydrateRoot},5795:e=>{e.exports=window.ReactDOM},6325:(e,t,n)=>{var a={};n.r(a),n.d(a,{AddNewButton:()=>Z,AddNewTable:()=>K,DuplicateCampaign:()=>ie,EditParent:()=>ae,EmailStatus:()=>te,Tooltip:()=>re});const i=window.wp.domReady;var r=n.n(i);const s=window.wp.apiFetch;var l=n.n(s);const o=window.React,c=window.noptinEmailSettingsMisc||{},p=(c.license,window.wp.i18n),d=window.wp.url,u=window.wp.components,m=window.noptinEmailEditorSettings||{},_=window.noptinEmailSettingsMisc||{},x=(_.license?.key&&/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}|HL-(?:[A-Z0-9]{5}-){4}[A-Z0-9]{5}|[0-9a-f]{24,32})$/i.test(_.license.key)&&_.license.key,m.types||{}),h=(Object.keys(x).map((e=>({value:e,label:x[e].label}))),Object.keys(m.templates||{}).map((e=>({value:e,label:m.templates[e]}))),window.ReactJSXRuntime);_.data?.plural_label&&_.data,_.license;const g=/_published|_unpublished|_deleted|_user_role$/,y=["noptin_subscriber_","delete_user","new_user","update_user","wp_login","after_password_reset","create_or_update_"],b=[["woocommerce","subscription"],["latest_","_digest"]],w=["WordPress Users"],f=["latest_posts_digest"],j=["periodic"],v=(e,t=void 0)=>{if(!e||f.includes(e))return!1;if(j.includes(e))return!0;if(t&&w.includes(t))return!0;if(b.some((t=>t.every((t=>e.includes(t))))))return!0;const n=e.replace(/^automation_rule_/,"");return g.test(n)?"post_published"!==n:y.some((e=>n.startsWith(e)))},S=()=>{const[e,t]=(0,o.useState)(""),[n,a]=(0,o.useState)(!1),[i,r]=(0,o.useState)(""),s=(0,o.useCallback)((t=>{t.preventDefault(),e&&(r(""),a(!0),l()({path:"/wp/v2/noptin-campaign",method:"POST",data:{title:e,status:"publish",meta:{campaign_type:c.data?.type}}}).then((e=>{e.noptin_campaign_type?.edit_url?window.location.href=e.noptin_campaign_type.edit_url:window.location.href=window.location.href})).catch((e=>{r(e.message),a(!1)})))}),[e]);return(0,h.jsxs)(u.__experimentalVStack,{as:"form",onSubmit:s,style:{opacity:n?.5:1},children:[(0,h.jsx)(u.__experimentalInputControl,{label:(0,p.sprintf)(/* translators: %s: campaign type */ /* translators: %s: campaign type */
(0,p.__)("%s name","newsletter-optin-box"),c.data?.label),help:(0,p.__)("Enter a name for your campaign","newsletter-optin-box"),value:e,onChange:t,style:{width:"100%"},required:!0,disabled:n,suffix:(0,h.jsxs)(u.Button,{variant:"primary",type:"submit",disabled:!e,isBusy:n,isPressed:n,children:[(0,p.__)("Create","newsletter-optin-box"),n&&(0,h.jsx)(u.Spinner,{})]})}),i&&(0,h.jsx)(u.Notice,{status:"error",onDismiss:()=>r(""),children:i})]})},k=c.data?.add_new||(0,d.addQueryArgs)(window.location.href,{noptin_campaign:0}),C=c.data?.sub_types||{},T=function(e,t){const n={};Array.isArray(e)||Object.entries(e).forEach((([e,t])=>{if(!t.category){if(!c.isTest)return;t.category="Deprecated"}n[t.category]||(n[t.category]={}),n[t.category][e]={...t,forcePremium:v(e,t.category)},t.alt_category&&(n[t.alt_category]||(n[t.alt_category]={}),n[t.alt_category][e]=n[t.category][e])})),"automation_type"===t&&Array.isArray(c.integrations)&&c.integrations.forEach((t=>{t.plan&&"free"!==t.plan&&t.triggers&&!Array.isArray(t.triggers)&&Object.entries(t.triggers).forEach((([a,i])=>{i.forEach((({id:i,label:r,description:s,premium:l=!1})=>{if("premium"!==t.plan&&!l)return;const o=`automation_rule_${i}`;if(e[o]){const t=e[o].category;t&&n[t][o]&&(n[t][o].forcePremium=!0)}else n[a]||(n[a]={}),n[a][o]={label:r,description:(0,p.sprintf)(
// translators: %s: description, e.g, "Sends an email after a user subscribes"
// translators: %s: description, e.g, "Sends an email after a user subscribes"
(0,p.__)("Sends an email %s","newsletter-optin-box"),s.charAt(0).toLowerCase()+s.slice(1)),category:a,image:t.icon_url,forcePremium:!0,is_installed:!1,installation:t.installation}}))}))}));const a={},i=(0,p.__)("Recurring","newsletter-optin-box");return n.hasOwnProperty(i)&&(a[i]=n[i]),Object.keys(n).sort().forEach((e=>{e!==i&&(a[e]=n[e])})),a}(C,`${c.data?.type||"any"}_type`),A={select_type:{title:(0,p.__)("Select Campaign Type","newsletter-optin-box"),show:Object.keys(T).length>0,arg:"noptin_email_sub_type",cardGroups:T},select_sender:{title:(0,p.__)("Send to","newsletter-optin-box"),show:!!c.data?.supports_recipients,campaign:"Use Sender",arg:"noptin_email_sender",cardGroups:e=>({[(0,p.__)("Send to","newsletter-optin-box")]:Object.entries(c.senders||{}).reduce(((t,[n,a])=>(e?.select_type&&!C?.[e?.select_type]?.is_mass_mail&&C?.[e?.select_type]?.manual_recipients&&"manual_recipients"!==n||(t[n]={...a,orderFirst:"manual_recipients"===n,forcePremium:!["noptin","manual_recipients"].includes(n)},t[n].integration&&Array.isArray(c.integrations)&&c.integrations.forEach((e=>{t[n].integration===e.slug&&(t[n].installation=e.installation)})),"manual_recipients"===n&&(t["[[site_admin_email]]"]={...t[n],label:(0,p.__)("Site Admin","newsletter-optin-box"),description:(0,p.sprintf)(
// translators: %s: description, e.g, "Send an email to the site admin."
// translators: %s: description, e.g, "Send an email to the site admin."
(0,p.__)("Send an email to the %s","newsletter-optin-box"),(0,p.__)("site admin","newsletter-optin-box"))},e?.select_type&&C?.[e?.select_type]?.manual_recipients&&Object.entries(C?.[e?.select_type]?.manual_recipients).forEach((([a,i])=>{t[a]={...t[n],image:C?.[e?.select_type]?.image,label:i,description:"[[current_user.email]]"===a?(0,p.__)("Send an email to the currently logged-in user.","newsletter-optin-box"):(0,p.sprintf)(
// translators: %s: description, e.g, "Send an email to the site admin."
// translators: %s: description, e.g, "Send an email to the site admin."
(0,p.__)("Send an email to the %s","newsletter-optin-box"),i)}})))),t)),{})})},select_template:{title:(0,p.__)("Select Template","newsletter-optin-box"),show:!c.data?.child_type&&!!c.templates,arg:"noptin_email_template",campaign:"Use Template",cardGroups:e=>{const t={blank:{label:(0,p.__)("Default","newsletter-optin-box"),orderFirst:!0,forcePremium:!1,isTemplate:!0}};return Array.isArray(c.local_templates)&&c.local_templates.forEach((e=>{t[`${e.slug}__local`]={label:e.name,forcePremium:!1,isTemplate:!0,useValue:`noptin_campaign_${e.id}`,selectText:(0,p.__)("Use Template","newsletter-optin-box")}})),Array.isArray(c.templates)&&c.templates.forEach((n=>{e?.select_type&&!1===C?.[e?.select_type]?.supports_general_templates&&e?.select_type!==n.templateType||(t[n.slug]={image:n.image||n.image_url,label:n.name,forcePremium:!0,isTemplate:!0,useValue:n.id,selectText:(0,p.__)("Use Template","newsletter-optin-box"),previewURL:`https://noptin.com/email-templates/${n.id}.html`},Array.isArray(n.requires)&&Array.isArray(c.integrations)&&c.integrations.forEach((e=>{n.requires.includes(e.slug)&&(t[n.slug].installation=e.installation)})))})),{Templates:t}}},campaign_name:{title:c.data?.new_campaign_label,show:!!c.data?.child_type,modal:{props:{title:c.data?.new_campaign_label,size:"medium"},content:(0,h.jsx)(S,{type:c.data?.type})}}},O=Object.entries(A).reduce(((e,[t,n])=>(n.show&&(e[t]=n),e)),{}),B=(0,o.createContext)(void 0),P=({children:e})=>{const[t,n]=(0,o.useState)(k),a=(0,o.useMemo)((()=>{let e="";const a={};for(const[n,i]of Object.entries(O)){const r=i.arg?(0,d.getQueryArg)(t,i.arg):"";if(!r){e=n;break}a[n]=r}return{currentTitle:O[e]?.title||"",currentCampaign:O[e]?.campaign||O[e]?.title||"",currentStep:e,isLastStep:e===Object.keys(O).pop(),isFirstStep:e===Object.keys(O)[0],hasSteps:Object.keys(O).length>0,stepValues:a,steps:O,medium:c.data?.plural_label||`${c.data?.type||"noptin"}-emails`,removeQueryArgs:(...e)=>{n((0,d.removeQueryArgs)(t,...e))},addQueryArg:(e,a)=>{n((0,d.addQueryArgs)(t,{[e]:a}))},withQueryArg:(e,n)=>(0,d.addQueryArgs)(t,{[e]:n}),url:t}}),[t,n]);return(0,h.jsx)(B.Provider,{value:a,children:e})},D=({title:e,isOpen:t,closeModal:n,back:a,...i})=>{const r=(0,h.jsx)(h.Fragment,{children:a&&(0,h.jsx)(u.Button,{icon:"arrow-left-alt",onClick:a,label:(0,p.__)("Back","newsletter-optin-box"),showTooltip:!0})});return(0,h.jsx)(h.Fragment,{children:t&&(0,h.jsx)(u.Modal,{title:e,onRequestClose:n,headerActions:r,isFullScreen:!0,children:(0,h.jsx)(H,{...i})})})};function M(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=M(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}const E=function(){for(var e,t,n=0,a="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=M(e))&&(a&&(a+=" "),a+=t);return a},N=window.wp.compose,z={borderRadius:"5px"},R=({categories:e,selectedCategory:t,onClickCategory:n})=>{const a="noptin-campaign-explorer__sidebar",i=(0,N.useViewportMatch)("medium","<");return(0,h.jsxs)(u.__experimentalSurface,{className:a,variant:i?"primary":"secondary",style:z,children:[!i&&(0,h.jsx)(u.__experimentalElevation,{value:2}),(0,h.jsx)(u.NavigableMenu,{className:`${a}__categories-list`,orientation:i?"horizontal":"vertical",onNavigate:t=>n(e[t]),children:e.map((e=>(0,h.jsx)(u.Button,{label:e,text:e,className:`${a}__categories-list__item`,isPressed:t===e,onClick:()=>n(e)},e)))})]})},$=(window.wp.element,({image:e,title:t})=>{if("string"==typeof e&&e.startsWith("http"))return(0,h.jsx)("img",{src:e,width:24,alt:t,style:{maxWidth:24,height:"auto"}});if(e&&"string"==typeof e)return(0,h.jsx)(u.Icon,{size:24,icon:e,style:{color:"#424242"}});if(e&&"object"==typeof e){const t=e.fill||"#008000",n=e.path||"",a=e.viewBox||"0 0 24 24";return e.path?(0,h.jsx)(u.SVG,{viewBox:a,xmlns:"http://www.w3.org/2000/svg",style:{maxWidth:24},children:(0,h.jsx)(u.Path,{fill:t,d:n})}):(0,h.jsx)(u.Icon,{size:24,style:{color:t},icon:e.icon})}return(0,h.jsx)(u.Icon,{size:24,icon:"email",style:{color:"#424242"}})}),U=({learnMoreUrl:e,previewURL:t,action:n})=>{const[a,i]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!0),l=()=>i(!1);return e?(0,h.jsxs)(u.Button,{variant:"secondary",href:e,target:"_blank",children:[(0,h.jsx)("span",{className:"noptin-selectable-card-action__label",children:(0,p.__)("Learn More")})," ",(0,h.jsx)(u.Icon,{size:16,icon:"arrow-right-alt"})]}):t?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(u.Button,{variant:"secondary",onClick:()=>i(!0),children:[(0,h.jsx)("span",{className:"noptin-selectable-card-action__label",children:(0,p.__)("Preview")})," ",(0,h.jsx)(u.Icon,{size:16,icon:"visibility"})]}),a&&(0,h.jsxs)(u.Modal,{title:(0,p.__)("Preview"),onRequestClose:l,className:"noptin-preview-modal",headerActions:(0,h.jsxs)(u.__experimentalHStack,{justify:"flex-end",wrap:!0,children:[n,(0,h.jsx)(u.Button,{variant:n?"secondary":"primary",onClick:l,children:(0,p.__)("Back to templates")})]}),isDismissible:!1,isFullScreen:!0,children:[r&&(0,h.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,h.jsx)(u.Spinner,{})}),(0,h.jsx)("iframe",{src:t,style:{width:"100%",height:"100%",border:"none",display:r?"none":"block"},onLoad:()=>s(!1)})]})]}):null},F=e=>{if(e.forcePremium?!1!==e.is_installed&&e?.licenseDetails?.key:!1!==e.is_installed){const t=e.primary||(0,h.jsxs)(u.Button,{variant:"primary",onClick:e.onClick,href:e.href,children:[(0,h.jsx)("span",{className:"noptin-selectable-card__label",children:e.selectText||(0,p.__)("Select")})," ",(0,h.jsx)(u.Icon,{size:16,icon:"arrow-right-alt"})]});return{upgradeText:null,button:t,secondaryButton:(0,h.jsx)(U,{learnMoreUrl:e.learnMoreUrl,previewURL:e.previewURL,action:t})}}const t=(t,n)=>!1===e.is_installed&&e.installation?.[t]?e.installation?.[t]:e.licenseDetails[t]||n,n=t("install_desc",(0,p.__)("Activate your license key to unlock","newsletter-optin-box")),a=t("install_text",(0,p.__)("View Pricing","newsletter-optin-box")),i=t("install_url",(0,d.addQueryArgs)("https://noptin.com/pricing/",{utm_source:"Noptin Plugin Dashboard",utm_medium:e.medium||void 0,utm_campaign:e.campaign||"noptin",utm_term:e.name||void 0})),r=(0,h.jsxs)(u.Button,{variant:"primary",href:i,target:"_blank",children:[(0,h.jsx)("span",{className:"noptin-selectable-card-action__label",children:a})," ",(0,h.jsx)(u.Icon,{size:16,icon:"lock"})]}),s=!e.licenseDetails?.key&&(0,h.jsxs)(u.Button,{variant:"secondary",href:e.licenseDetails?.activate_url,children:[(0,h.jsx)("span",{className:"noptin-selectable-card-action__label",children:(0,p.__)("Activate")})," ",(0,h.jsx)(u.Icon,{size:16,icon:"unlock"})]});return{upgradeText:n,button:r,secondaryButton:e.licenseDetails?.key||e.previewURL?(0,h.jsx)(U,{learnMoreUrl:e.learnMoreUrl,previewURL:e.previewURL,action:[r,s]}):s}},V=({name:e,label:t,description:n,image:a,useValue:i,onSelect:r,hrefCallback:s,href:l,isTemplate:c,...d})=>{const m=void 0===i?e:i,_=(0,o.useCallback)((()=>r?r(m):null),[m,r]),x=F({onClick:_,name:e.replace("automation_rule_",""),href:s?s(m):l,...d}),g=E("noptin-selectable-card",`noptin-selectable-card__${m}`,c&&"noptin-selectable-card--template");return(0,h.jsxs)(u.Card,{className:g,size:"small",children:[(0,h.jsxs)(u.CardHeader,{children:[(0,h.jsx)(u.__experimentalHeading,{level:4,numberOfLines:1,children:t}),(0,h.jsx)($,{image:a,title:t})]}),c&&a?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"noptin-template-preview__image-wrapper",children:(0,h.jsx)("img",{src:a,alt:t,className:"noptin-template-preview__image"})}),(0,h.jsx)(u.CardBody,{children:x.upgradeText&&(0,h.jsx)(u.__experimentalText,{as:"em",isDestructive:!0,children:x.upgradeText})})]}):(0,h.jsx)(u.CardBody,{style:{flexGrow:1},children:(0,h.jsxs)(u.__experimentalVStack,{spacing:4,children:[n&&(0,h.jsx)(u.__experimentalText,{as:"p",variant:"muted",children:n}),c&&!a&&(0,h.jsx)(u.__experimentalText,{as:"em",variant:"muted",children:(0,p.__)("No preview available","newsletter-optin-box")}),x.upgradeText&&(0,h.jsx)(u.__experimentalText,{as:"em",isDestructive:!0,children:x.upgradeText})]})}),(0,h.jsxs)(u.CardFooter,{isBorderless:!0,justify:x.secondaryButton?"space-between":"flex-end",children:[x.secondaryButton,x.button]}),(0,h.jsx)(u.__experimentalElevation,{value:1,hover:3})]})},I=["xhuge","huge","wide","xlarge","medium"],L=({showTitle:e,showSidebar:t,selectedCategory:n,cards:a,...i})=>{const r=I.map((e=>(0,N.useViewportMatch)(e,">="))).filter((e=>e)).length||1,s="noptin-campaign-explorer";let l=Object.entries(a);l.some((([,e])=>e.isTemplate))||l.sort(((e,t)=>{const n=["latest_posts_digest","periodic","manual_recipients"],a=n.includes(e[0])||e[1].orderFirst,i=n.includes(t[0])||t[1].orderFirst;return a&&!i?-1:!a&&i?1:e[1].label.localeCompare(t[1].label)}));const o=l.reduce(((e,[t,n])=>(n.forcePremium&&!i.licenseDetails?.key?e[1].push([t,n]):e[0].push([t,n]),e)),[[],[]]);return(0,h.jsxs)(u.FlexBlock,{className:`${s}__list`,children:[e&&(0,h.jsx)(u.__experimentalHeading,{level:2,lineHeight:"48px",className:`${s}__category-name`,children:n}),(0,h.jsxs)(u.__experimentalGrid,{role:"listbox",className:`${s}-list`,columns:t&&r>1?r-1:r,rowGap:32,columnGap:32,children:[o[0].map((([e,t])=>(0,h.jsx)(V,{name:e,...i,...t},e))),o[1].map((([e,t])=>(0,h.jsx)(V,{name:e,...i,...t},e)))]})]})},q=({children:e,showSidebar:t,...n})=>{const a=(0,N.useViewportMatch)("medium","<");return t?a?(0,h.jsx)(u.__experimentalVStack,{spacing:4,...n,children:e}):(0,h.jsx)(u.__experimentalHStack,{spacing:4,...n,justify:"stretch",alignment:"start",style:{maxHeight:"100%"},children:e}):(0,h.jsx)("div",{...n,children:e})},H=({cardGroups:e,...t})=>{const n=(0,o.useMemo)((()=>Object.keys(e)),[e]),a=n.length,[i,r]=(0,o.useState)(n[0]||"");(0,o.useEffect)((()=>{a>0&&!e[i]&&r(Object.keys(e)[0])}),[e,i]);const s=a>1,l=(0,o.useMemo)((()=>e[i]||{}),[e,i]),c=E("noptin-campaign-explorer",{"noptin-campaign-explorer--show-sidebar":s});return(0,h.jsxs)(q,{className:c,showSidebar:s,children:[s&&(0,h.jsx)(R,{selectedCategory:i,categories:n,onClickCategory:r}),(0,h.jsx)(L,{showTitle:s,showSidebar:s,selectedCategory:i,cards:l,...t})]})},Q=e=>{if(!e.isOpen)return null;const t=e.steps[e.currentStep];if(t.modal)return(0,h.jsx)(u.Modal,{onRequestClose:e.closeModal,...t.modal.props,children:t.modal.content});if(t.cardGroups){const n=[...Object.keys(e.stepValues)].pop(),a=e.isLastStep?void 0:n=>{t.arg&&e.addQueryArg(t.arg,n)};return(0,h.jsx)(D,{title:e.currentTitle,closeModal:e.closeModal,isOpen:e.isOpen,back:n&&!e.isFirstStep?()=>e.removeQueryArgs(e.steps[n]?.arg||""):void 0,cardGroups:"function"==typeof t.cardGroups?t.cardGroups(e.stepValues):t.cardGroups,licenseDetails:e.licenseDetails,onSelect:a,hrefCallback:t.arg&&e.isLastStep?n=>e.withQueryArg(t.arg,n):void 0,campaign:e.currentTitle,medium:e.medium},t.title)}return null},G=({buttonProps:e,...t})=>{const[n,a]=(0,o.useState)(!1),i=(0,o.useCallback)((()=>{a(!0)}),[a]),r=(0,o.useCallback)((()=>{a(!1)}),[a]),s=t.currentStep&&t.hasSteps,l={...e,onClick:s?i:void 0,href:s?void 0:t.url};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Button,{...l}),(0,h.jsx)(Q,{isOpen:n,closeModal:r,...t})]})},W={variant:"primary",text:c.data?.new_campaign_label,type:"button"},J=()=>{const e=(()=>{const e=(0,o.useContext)(B);if(!e)throw new Error("useModal must be used within a ModalProvider");return e})();return(0,h.jsx)(G,{licenseDetails:c.license||{},buttonProps:W,...e})},Z=()=>(0,h.jsx)(P,{children:(0,h.jsx)(J,{})}),K=()=>{const{upgradeText:e,button:t,secondaryButton:n}=F({is_installed:!!c.data?.click_to_add_first,forcePremium:!!c.data?.upsell,name:c.data?.plural,campaign:"emails",licenseDetails:c.license||{},primary:(0,h.jsx)(Z,{})});return(0,h.jsxs)(u.__experimentalVStack,{alignment:"center",justify:"center",spacing:6,style:{minHeight:320},children:[(0,h.jsx)(u.Icon,{icon:c.data?.icon,size:100,style:{color:"#646970"}}),(0,h.jsx)(u.__experimentalText,{align:"center",color:"#646970",size:16,isBlock:!0,children:c.data?.upsell||c.data?.click_to_add_first}),(0,h.jsxs)(u.__experimentalHStack,{alignment:"center",justify:"center",spacing:2,children:[t,n]}),e&&(0,h.jsx)(u.__experimentalText,{align:"center",size:13,isBlock:!0,isDestructive:!0,children:e})]})},X=window.hizzlewp.components,Y=e=>{const t=(0,X.stringToColor)(e,{saturation:[60,100],lightness:[30,45]});return{backgroundColor:t.color,color:t.isLight?"#111111":"#ffffff"}},ee=({actionUrl:e,buttonText:t,modalTitle:n,modalDescription:a,icon:i,isDestructive:r=!1})=>{const[s,l]=(0,o.useState)(!1),c=n&&a;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Button,{icon:i,iconSize:16,size:"compact",showTooltip:!0,label:t,type:"button",onClick:c?()=>l(!0):void 0,href:c?void 0:e,variant:"tertiary"}),s&&(0,h.jsx)(u.Modal,{onRequestClose:()=>l(!1),title:n,size:"small",children:(0,h.jsxs)(u.__experimentalVStack,{spacing:4,children:[(0,h.jsx)(u.__experimentalText,{children:a}),(0,h.jsxs)(u.__experimentalHStack,{spacing:4,justify:"flex-start",alignment:"flex-start",children:[(0,h.jsx)(u.Button,{variant:"primary",text:t,type:"button",href:e,isDestructive:r}),(0,h.jsx)(u.Button,{variant:"secondary",text:(0,p.__)("Cancel","newsletter-optin-box"),type:"button",onClick:()=>l(!1)})]})]})})]})},te=e=>{let t=e.label;"future"===e.status&&(t=(0,p.__)("Scheduled"));const n={whiteSpace:"nowrap",borderRadius:"200px",height:"24px",lineHeight:"24px",padding:"3px 9px",display:"inline-block",...Y(t)};return(0,h.jsxs)(u.__experimentalHStack,{alignment:"center",justify:"flex-start",spacing:1,children:[(0,h.jsx)("span",{style:n,children:t}),e.action&&(0,h.jsx)(ee,{...e.action}),e.statsUrl&&(0,h.jsx)(u.Button,{href:e.statsUrl,icon:"chart-bar",iconSize:16,size:"compact",showTooltip:!0,label:(0,p.__)("Show all activity for this campaign","newsletter-optin-box"),variant:"tertiary"})]})},ne=(0,o.memo)((({title:e,status:t,id:n})=>{const[a,i]=(0,o.useState)(e),[r,s]=(0,o.useState)(t),[c,d]=(0,o.useState)(!1),[m,_]=(0,o.useState)(""),x=(0,o.useCallback)((e=>{e.preventDefault(),a&&(_(""),d(!0),l()({path:`/wp/v2/noptin-campaign/${n}`,method:"POST",data:{title:a,status:r}}).then((e=>{e.noptin_campaign_type?.edit_url?window.location.href=e.noptin_campaign_type.edit_url:window.location.href=window.location.href})).catch((e=>{_(e.message),d(!1)})))}),[r,a,n]);return(0,h.jsxs)(u.__experimentalVStack,{as:"form",onSubmit:x,style:{opacity:c?.5:1},spacing:4,children:[(0,h.jsx)(u.__experimentalInputControl,{label:(0,p.__)("Title","newsletter-optin-box"),value:a,onChange:i,required:!0,disabled:c}),(0,h.jsx)(u.SelectControl,{label:(0,p.__)("Status","newsletter-optin-box"),value:r,options:[{label:(0,p.__)("Draft","newsletter-optin-box"),value:"draft"},{label:(0,p.__)("Pending","newsletter-optin-box"),value:"pending"},{label:(0,p.__)("Published","newsletter-optin-box"),value:"publish"}],onChange:s,disabled:c}),(0,h.jsx)("div",{children:(0,h.jsxs)(u.Button,{variant:"primary",type:"submit",disabled:c,isBusy:c,isPressed:c,children:[(0,p.__)("Save","newsletter-optin-box"),c&&(0,h.jsx)(u.Spinner,{})]})}),m&&(0,h.jsx)(u.Notice,{status:"error",onDismiss:()=>_(""),children:m})]})})),ae=({title:e,status:t,id:n,modalTitle:a})=>{const[i,r]=(0,o.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(u.Button,{onClick:()=>r(!0),icon:"edit",label:(0,p.__)("Edit","newsletter-optin-box"),showTooltip:!0,size:"compact",variant:"primary"}),i&&(0,h.jsx)(u.Modal,{onRequestClose:()=>r(!1),title:a,size:"small",children:(0,h.jsx)(ne,{title:e,status:t,id:n})})]})},ie=({name:e,subject:t,url:n,...a})=>{const[i,r]=(0,o.useState)(!1),[s,l]=(0,o.useState)(`${e} - (${(0,p.__)("Copy","newsletter-optin-box")})`),[c,m]=(0,o.useState)(`${t} - (${(0,p.__)("Copy","newsletter-optin-box")})`),[_,x]=(0,o.useState)(n);return(0,o.useEffect)((()=>{x((0,d.addQueryArgs)(n,{name:s,subject:c}))}),[s,c,_]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("a",{href:_,className:"noptin-duplicate-campaign",onClick:e=>{e.preventDefault(),r(!0)},children:(0,p.__)("Duplicate","newsletter-optin-box")}),i&&(0,h.jsx)(u.Modal,{onRequestClose:()=>r(!1),title:(0,p.__)("Duplicate Campaign","newsletter-optin-box"),size:"small",children:(0,h.jsxs)(u.__experimentalVStack,{spacing:4,children:[(0,h.jsx)(u.Tip,{children:(0,p.sprintf)((0,p.__)("Are you sure you want to duplicate this campaign: %s?","newsletter-optin-box"),e)}),(0,h.jsx)(u.__experimentalInputControl,{label:(0,p.__)("Campaign Name","newsletter-optin-box"),value:s,onChange:l}),(0,h.jsx)(u.__experimentalInputControl,{label:(0,p.__)("Campaign Subject","newsletter-optin-box"),value:c,onChange:m}),(0,h.jsx)("div",{children:(0,h.jsx)(u.Button,{variant:"primary",text:(0,p.__)("Duplicate","newsletter-optin-box"),type:"button",href:_})})]})})]})},re=({icon:e="info",content:t,button:n})=>{const[a,i]=(0,o.useState)(!1),r=()=>{i((e=>!e))};return n?(0,h.jsx)("span",{className:`dashicon dashicons dashicons-${e}`,tabIndex:0,onClick:r,onMouseEnter:r,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r())},role:"button","aria-expanded":a,"aria-haspopup":"dialog","aria-label":`Toggle information: ${t.substring(0,30)}${t.length>30?"...":""}`,children:a&&(0,h.jsx)(u.Popover,{onClose:r,children:(0,h.jsxs)(u.__experimentalVStack,{style:{width:240,padding:10},children:[(0,h.jsx)(u.__experimentalText,{children:t}),(0,h.jsx)("div",{children:(0,h.jsx)(u.Button,{...n})})]})})}):(0,h.jsx)(u.Tooltip,{text:t,children:(0,h.jsx)("span",{className:`dashicon dashicons dashicons-${e}`})})};var se=n(5338);const le=(e,t)=>{if(t){const n=t.getAttribute("data-app"),a=n?JSON.parse(n):{};(0,se.H)(t).render((0,h.jsx)(e,{...a}))}};window.noptin=window.noptin||{},window.noptin.viewCampaigns={components:a},r()((()=>{le(K,document.getElementById("noptin-email-campaigns__editor--add-new__in-table")),document.querySelectorAll(".noptin-email-campaigns__editor--add-new__button").forEach((e=>{le(Z,e)})),document.querySelectorAll(".noptin-email-status__app").forEach((e=>{le(te,e)})),document.querySelectorAll(".noptin-duplicate-campaign").forEach((e=>{le(ie,e)})),le(ae,document.getElementById("noptin-email-campaigns-parent_edit")),document.querySelectorAll(".noptin-tooltip").forEach((e=>{le(re,e)})),document.querySelector(".column-menu_order .dashicons-move-wrapper")&&jQuery("#the-list").sortable({items:"> tr",handle:".column-menu_order",helper:"clone",cursor:"move",tolerance:"pointer",forcePlaceholderSize:!0,opacity:.7,axis:"y",update:function(){const e=jQuery(this).sortable("toArray").map((e=>parseInt(e.replace("noptin-email-campaign--",""))));l()({path:"/wp/v2/noptin-campaign/reorder",method:"POST",data:{ids:e}}).catch((e=>{alert(e.message)}))}})}))}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,n,i,r)=>{if(!n){var s=1/0;for(p=0;p<e.length;p++){for(var[n,i,r]=e[p],l=!0,o=0;o<n.length;o++)(!1&r||s>=r)&&Object.keys(a.O).every((e=>a.O[e](n[o])))?n.splice(o--,1):(l=!1,r<s&&(s=r));if(l){e.splice(p--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[n,i,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={261:0,389:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[s,l,o]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(o)var p=o(a)}for(t&&t(n);c<s.length;c++)r=s[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(p)},n=globalThis.webpackChunknoptin_premium=globalThis.webpackChunknoptin_premium||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[389],(()=>a(6325)));i=a.O(i)})();