(()=>{"use strict";var e,t={4192(e,t,n){var i=n(5338);const s=window.wp.domReady;var r=n.n(s);const a=window.wp.data,o=window.wp.preferences,l=window.hizzlewp.components,c=window.React,d=window.wp.components,p=window.hizzlewp.interface,u=window.wp.notices,x=window.ReactJSXRuntime;function h(){const e=(0,a.useSelect)(e=>e(u.store).getNotices(),[]),{removeNotice:t}=(0,a.useDispatch)(u.store),n=e.filter(({type:e})=>"snackbar"===e).slice(-3);return(0,x.jsx)(d.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}const m=window.wp.i18n,g=window.wp.url,j=async e=>{try{const t=await fetch(window.noptinSetupWizard.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({_ajax_nonce:window.noptinSetupWizard.updatesNonce,...e}).toString()});if(!t.ok)throw new Error(`HTTP Error: ${t.status}`);const n=await t.text();try{return JSON.parse(n)}catch(e){throw console.error("Invalid JSON received:",n),new Error("Server returned invalid response.")}}catch(e){return console.error("AJAX Error:",e),{success:!1,data:{errorMessage:e.message||"Unknown error occurred."}}}},_=(0,c.createContext)(void 0),b=({children:e})=>{const{createErrorNotice:t,createSuccessNotice:n}=(0,a.useDispatch)(u.store),[i,s]=(0,c.useState)(()=>{const e=window.noptinSetupWizard?.plugins;return!e||Array.isArray(e)?{}:Object.fromEntries(Object.entries(e).map(([e,t])=>[e,{...t,isInstalled:!0,isInstalling:!1,error:void 0}]))}),r=(0,c.useCallback)((e,t)=>{s(n=>{const i=n[e]||{name:"",file_name:"",isActive:!1,isInstalled:!1};return{...n,[e]:{...i,...t}}})},[s]),o=(0,c.useCallback)(async(e,n)=>{if(!n.file_name||!n.name)return void r(e,{error:"Cannot activate: Plugin file not found."});r(e,{isInstalling:!0,error:void 0});const i=await j({action:"noptin_onboarding_ajax_activate_plugin",slug:e,plugin:n.file_name,name:n.name});i.success?r(e,{isInstalled:!0,isActive:!0,isInstalling:!1}):(r(e,{error:i.data.errorMessage||"Failed to activate plugin.",isInstalling:!1}),t(i.data.errorMessage||"Failed to activate plugin.",{type:"snackbar"}))},[r,t]),l=(0,c.useCallback)(async(e,i)=>{r(e,{isInstalling:!0,error:void 0});const s=await j({action:"noptin_onboarding_ajax_install_plugin",slug:e});if(s.success){const t={isInstalled:!0,isInstalling:!1};s.data.pluginName&&(t.name=s.data.pluginName);const a=(0,g.getQueryArg)(s.data.activateUrl||"","plugin")||"";a&&(t.file_name=a),r(e,t),Array.isArray(s.data.debug)&&s.data.debug.length>0&&(console.log("Plugin Install Debug Info:",s.data.debug),n(s.data.debug[s.data.debug.length-1],{type:"snackbar"})),i&&t.name&&t.file_name&&await o(e,{...t})}else r(e,{error:s.data.errorMessage||"Failed to install plugin.",isInstalling:!1}),t(s.data.errorMessage||"Failed to install plugin.",{type:"snackbar"})},[o,t,n]);return(0,x.jsx)(_.Provider,{value:{plugins:i,updatePlugin:r,installPlugin:l,activatePlugin:o},children:e})},w=e=>{const t=(0,c.useContext)(_);if(!t)throw new Error("usePlugin must be used within a PluginsProvider");const{plugins:n,installPlugin:i,activatePlugin:s}=t,r=n[e]||{file_name:"",isActive:!1,isInstalled:!1};return(0,c.useMemo)(()=>{const t=()=>s(e,r),n=t=>i(e,t);let a;return a=r.isActive?{variant:"primary",text:(0,m.__)("Active","newsletter-optin-box"),className:"noptin-components-button__green",disabled:!0}:r.isInstalled?{variant:"primary",text:r.isInstalling?(0,m.__)("Activating...","newsletter-optin-box"):(0,m.__)("Activate","newsletter-optin-box"),isBusy:r.isInstalling,onClick:t,className:"noptin-components-button__pink",disabled:r.isInstalling}:{variant:"primary",text:r.isInstalling?(0,m.__)("Installing...","newsletter-optin-box"):(0,m.__)("Install","newsletter-optin-box"),isBusy:r.isInstalling,onClick:()=>n(!0),disabled:r.isInstalling},{...r,install:n,activate:t,actionButton:a}},[r,i,s,e])},v=window.wp.apiFetch;var y=n.n(v);const f=(0,c.createContext)({saved:{},isSaving:!1,setAttributes:()=>{},save:()=>{}}),S=()=>(0,c.useContext)(f),k=({saved:e,children:t})=>{const[n,i]=(0,c.useState)(e),[s,r]=(0,c.useState)(!1),{createSuccessNotice:o,createErrorNotice:l}=(0,a.useDispatch)(u.store),d=(0,c.useRef)(!1),p=(0,c.useCallback)((e,t)=>{t&&(d.current=!0,i({...n,...t})),d.current?(d.current=!1,r(!0),y()({path:"/wp/v2/settings",method:"POST",data:{noptin_options:{...n,...t}}}).then(e=>(o((0,m.__)("Settings saved."),{type:"snackbar"}),"object"==typeof e&&null!==e&&"noptin_options"in e&&i(e.noptin_options),e)).catch(e=>{e.message?l(e.message):l((0,m.__)("An error occurred while saving."))}).finally(()=>{r(!1),e?.()})):e?.()},[n,i,r,o,l]),h=(0,c.useCallback)(e=>{d.current=!0,i({...n,...e})},[n,i]),g=(0,c.useMemo)(()=>({saved:n,isSaving:s,save:p,setAttributes:h}),[n,s,p,h]);return(0,x.jsx)(f.Provider,{value:g,children:t})},C=()=>{const{saved:e}=S();return(0,c.useMemo)(()=>[{id:"welcome",label:"Welcome"},{id:"mode",label:"Usage Mode"},"crm"===e.usage_mode?{id:"installConnections",label:"Connections"}:{id:"senderSettings",label:"Sender"},{id:"installIntegrations",label:"Integrations"},{id:"enableIntegrations",label:"Setup Integrations"},{id:"newsletter",label:"Newsletter"}].filter(Boolean),[e.usage_mode])},I=(0,c.createContext)({current:0,stepId:"",totalSteps:0,next:()=>{},prev:()=>{},setCurrentStep:()=>{}}),N=()=>(0,c.useContext)(I),z=({children:e})=>{const t=C(),[n,i]=(0,c.useState)(0),s=(0,c.useMemo)(()=>t[n]?.id||"",[n,t]),r=Object.keys(t).length,a=(0,c.useCallback)(()=>{i(e=>e+1)},[]),o=(0,c.useCallback)(()=>{i(e=>Math.max(e-1,0))},[]),l=(0,c.useMemo)(()=>({current:n,stepId:s,totalSteps:r,next:a,prev:o,setCurrentStep:i}),[n,s,r,a,o,i]);return(0,x.jsx)(I.Provider,{value:l,children:e})},B=(e,t={})=>(0,g.addQueryArgs)(e,{utm_source:"Noptin Plugin Dashboard",utm_medium:"setup-wizard",utm_term:"noptin_page_noptin-setup-wizard",...t}),T=(0,c.createContext)({licenseKey:"",isValid:!1,isActivating:!1,activate:()=>{}}),A=()=>(0,c.useContext)(T),E=({children:e})=>{const[t,n]=(0,c.useState)(""),[i,s]=(0,c.useState)(!1),[r,o]=(0,c.useState)(!1),{createErrorNotice:l,createSuccessNotice:d}=(0,a.useDispatch)(u.store),p=(0,c.useCallback)((e,t,i)=>{o(!0),y()({path:"/noptin/v1/license/activate",method:"POST",data:{license_key:e}}).then(i=>{d(i.message,{type:"snackbar"}),n(e),s(!0),t?.()}).catch(e=>{l(e.message||"An error occurred while saving.",{type:"snackbar"}),i?.(e.message||"An error occurred while saving.")}).finally(()=>{o(!1)})},[l,d,o,s,n]),h=(0,c.useMemo)(()=>({licenseKey:t,isValid:i,isActivating:r,activate:p}),[t,i,r,p]);return(0,x.jsx)(T.Provider,{value:h,children:e})},P=({help:e=null,placeholder:t})=>{const{licenseKey:n,isActivating:i,activate:s}=A(),[r,a]=(0,c.useState)(""),[o,l]=(0,c.useState)(n);return(0,x.jsxs)(d.__experimentalVStack,{spacing:4,children:[(0,x.jsx)(d.__experimentalInputControl,{type:"text",value:o||"",onChange:l,name:"noptin-license",required:!0,placeholder:t||(0,m.__)("Enter your noptin.com license key to activate premium features","newsletter-optin-box"),prefix:(0,x.jsx)(d.__experimentalInputControlPrefixWrapper,{children:(0,x.jsx)(d.Icon,{icon:"admin-network",size:16})}),suffix:(0,x.jsx)("div",{style:{paddingRight:2},children:(0,x.jsx)(d.Button,{type:"submit",variant:"primary",disabled:i||!o?.trim(),onClick:()=>{s(o||"",()=>a(""),a)},children:i?(0,x.jsx)(d.Spinner,{}):(0,m.__)("Activate","newsletter-optin-box")})}),help:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(d.__experimentalText,{color:"#008000",children:[e&&(0,x.jsxs)(x.Fragment,{children:[e," "]}),(0,m.__)("Don't have a license?","newsletter-optin-box")]})," ",(0,x.jsx)(d.Button,{href:B("https://noptin.com/pricing",{utm_campaign:"license"}),target:"_blank",variant:"link",children:(0,m.__)("View Pricing","newsletter-optin-box")})]}),__next40pxDefaultSize:!0}),r&&(0,x.jsx)(d.Notice,{status:"error",isDismissible:!1,children:r})]})},V=({children:e})=>(0,x.jsx)(d.SlotFillProvider,{children:(0,x.jsx)(E,{children:(0,x.jsx)(b,{children:(0,x.jsx)(k,{saved:window.noptinSetupWizard.options||{},children:(0,x.jsx)(z,{children:e})})})})}),R=window.wp.compose,H=({title:e,description:t,icon:n})=>(0,x.jsxs)(d.__experimentalHStack,{alignment:"flex-start",justify:"flex-start",children:[(0,x.jsx)("div",{style:{flexShrink:0},children:(0,x.jsx)(d.__experimentalHStack,{justify:"center",style:{color:"var(--noptin-success-color-dark)",width:40,height:40,borderRadius:"50%",backgroundColor:"var(--noptin-success-color-light)"},children:(0,x.jsx)(d.Icon,{icon:n,size:24})})}),(0,x.jsxs)(d.__experimentalVStack,{spacing:1,children:[(0,x.jsx)(d.__experimentalHeading,{level:2,size:16,children:e}),(0,x.jsx)(d.__experimentalText,{variant:"muted",children:t})]})]}),O=([{title:"Easy Setup",description:"Get started in minutes with our pre-built templates.",icon:"admin-site-alt3"},{title:"Automation",description:"Automate your email marketing workflows with smart, conditional rules.",icon:"update"},{title:"Integrations",description:"Connect Noptin with your favorite plugins and platforms seamlessly.",icon:"admin-links"}].map(e=>(0,x.jsx)(H,{...e},e.title)),()=>{const{next:e,setCurrentStep:t,totalSteps:n}=N();return(0,x.jsxs)(d.__experimentalVStack,{spacing:5,children:[(0,x.jsxs)(d.__experimentalVStack,{spacing:1,children:[(0,x.jsx)(d.__experimentalHeading,{level:1,size:36,weight:700,children:"Thank you for choosing Noptin!"}),(0,x.jsx)(d.__experimentalText,{variant:"muted",size:18,isBlock:!0,children:"Let's get you set up in just a few steps."})]}),(0,x.jsxs)(d.__experimentalHStack,{justify:"flex-start",spacing:1,wrap:!0,children:[(0,x.jsx)(d.Button,{variant:"primary",onClick:e,icon:"arrow-right-alt",iconPosition:"right",className:"noptin-components-button__pink noptin-components-button__lg with-shadow",text:"Start Quick Setup",style:{fontWeight:600}}),(0,x.jsx)(d.Button,{onClick:()=>t(n-1),text:"Skip Setup",className:"noptin-components-button__lg",style:{color:"#6b7280"}})]}),(0,x.jsx)(d.__experimentalText,{variant:"muted",children:"Noptin stays lightweight by letting you only install the features you need."})]})}),W=({title:e,desc:t})=>(0,x.jsxs)(d.__experimentalVStack,{spacing:1,children:[(0,x.jsx)(d.__experimentalHeading,{size:24,children:e}),(0,x.jsx)(d.__experimentalText,{size:16,variant:"muted",children:t})]}),F=()=>{const{current:e,prev:t}=N();return e?(0,x.jsx)(d.Button,{onClick:t,text:"Back",className:"noptin-components-button__lg",style:{color:"#6b7280"}}):null},M=()=>{const{next:e,current:t,totalSteps:n}=N(),{isSaving:i,save:s}=S();return(0,x.jsx)(d.Button,{variant:"primary",onClick:()=>{s(e)},disabled:i,className:"noptin-components-button__pink noptin-components-button__lg with-shadow",text:t===n-2?"Complete Setup":0===t?"Get Started":"Continue",style:{fontWeight:600}})},D=["welcome","mode","newsletter"],L=({children:e})=>{const{current:t,totalSteps:n,stepId:i}=N(),s=t<n-1,r=t>0;return D.includes(i)?(0,x.jsx)(x.Fragment,{children:e}):s||r?(0,x.jsxs)(d.__experimentalVStack,{spacing:6,children:[(0,x.jsx)(l.ErrorBoundary,{children:e}),(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsxs)(d.__experimentalHStack,{spacing:4,children:[(0,x.jsx)("div",{children:s&&(0,x.jsx)(M,{})}),(0,x.jsx)("div",{children:r&&(0,x.jsx)(F,{})})]})})]}):(0,x.jsx)(x.Fragment,{children:e})},G=({title:e,desc:t,helpText:n,icon:i,value:s})=>{const{saved:{usage_mode:r},save:a}=S(),{next:o}=N();return(0,x.jsxs)(d.__experimentalHStack,{as:d.Button,alignment:"flex-start",spacing:4,className:r===s?"noptin-usage-mode-card selected":"noptin-usage-mode-card",onClick:()=>{a(o,{usage_mode:s})},children:[(0,x.jsx)("div",{className:"mode-icon-bg",children:(0,x.jsx)(d.Icon,{icon:i,size:24,style:{color:"#e91e63"}})}),(0,x.jsxs)(d.__experimentalVStack,{spacing:1,children:[(0,x.jsx)(d.__experimentalHeading,{level:3,weight:700,size:16,children:e}),(0,x.jsx)(d.__experimentalText,{variant:"muted",children:t}),(0,x.jsx)(d.__experimentalText,{color:"standalone"===s?"#16a34a":"#f57c00",weight:600,children:n})]}),(0,x.jsx)(d.Icon,{size:20,icon:"arrow-right-alt2",style:{color:"#d1d5db",marginLeft:"auto",alignSelf:"center"}})]})},U=[{value:"standalone",title:"Manage data on your site",desc:"Collect email subscribers, send newsletters, new post notifications, or automated emails directly from your site.",helpText:"Works out of the box. No license key required.",icon:"database"},{value:"crm",title:"Send data to other tools",desc:"Forward subscribers, form submissions, or other data to services like Google Sheets, Mailchimp, and others.",helpText:"Requires a valid license key.",icon:"admin-links"}].map(e=>(0,x.jsx)(G,{...e},e.value)),$=()=>(0,x.jsxs)(d.__experimentalVStack,{spacing:5,children:[(0,x.jsx)(W,{title:"How would you like to use Noptin?",desc:"Choose how emails and form data should be handled."}),U,(0,x.jsx)(d.__experimentalText,{variant:"muted",children:"Noptin stays lightweight by letting you only install the features you need."})]}),q=({slug:e,name:t,error:n,description:i,icon:s,button1:r,button2:a})=>{const o=r||a;return(0,x.jsxs)(d.Card,{className:`noptin-selectable-card noptin-selectable-card__${e}`,variant:"tertiary",size:"small",children:[(0,x.jsxs)(d.CardHeader,{children:[(0,x.jsx)(d.__experimentalHeading,{level:4,numberOfLines:1,children:t}),(0,x.jsx)(l.ImageOrIcon,{image:s,alt:t})]}),(n||i)&&(0,x.jsx)(d.CardBody,{children:(0,x.jsx)(d.__experimentalText,{as:"p",variant:n?void 0:"muted",isDestructive:!!n,children:n||i})}),o&&(0,x.jsxs)(d.CardFooter,{isBorderless:!0,children:[r&&(0,x.jsx)(d.Button,{...r}),a&&(0,x.jsx)(d.Button,{...a})]})]})},K=({plugins:e,heading:t,description:n,licenseRequiredText:i="Installing and using addons requires a valid license.",licensePlaceholder:s="Enter your license key to install addons",beforePlugins:r=null,compactThreshold:a=5,initialVisibleCount:o=4})=>{const{isValid:l}=A(),p=e.some(e=>!e.isFree),[u,h]=(0,c.useState)(!1),m=e.length>a,g=m?e.slice(0,o):e;return(0,x.jsxs)(d.__experimentalVStack,{spacing:6,children:[(0,x.jsx)(W,{title:t,desc:n}),!l&&p&&(0,x.jsx)(P,{placeholder:s,help:i}),(0,x.jsxs)("div",{children:[r&&(0,x.jsx)(d.__experimentalText,{size:12,variant:"muted",weight:600,style:{textTransform:"uppercase",letterSpacing:"0.05em"},children:r}),(0,x.jsxs)(d.__experimentalVStack,{spacing:3,children:[(0,x.jsx)(d.__experimentalGrid,{className:"template-grid",templateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:4,children:g.map(e=>(0,x.jsx)(J,{...e},e.slug))}),m&&(0,x.jsx)(d.Button,{variant:"link",onClick:()=>h(!0),children:`View all (${e.length})`})]})]}),u&&(0,x.jsx)(d.Modal,{title:t,onRequestClose:()=>h(!1),isFullScreen:!0,children:(0,x.jsx)(d.__experimentalGrid,{className:"template-grid",templateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:4,children:e.map(e=>(0,x.jsx)(X,{...e},e.slug))})})]})},J=({isFree:e,name:t,slug:n,description:i,...s})=>{const{isValid:r}=A(),{actionButton:a}=w(`noptin-${n}`),[o,l]=(0,c.useState)(!1),p=()=>{l(e=>!e)},u=e?{variant:"primary",text:(0,m.__)("Active","newsletter-optin-box"),className:"noptin-components-button__green",disabled:!0}:r?a:{variant:"tertiary",text:(0,m.__)("Install","newsletter-optin-box"),icon:"lock",iconPosition:"right",disabled:!0};return(0,x.jsxs)(d.__experimentalHStack,{style:{padding:"12px",border:"1px solid #ddd",borderRadius:"4px"},wrap:!0,children:[(0,x.jsxs)(d.__experimentalHStack,{as:d.FlexBlock,justify:"flex-start",spacing:0,expanded:!1,wrap:!0,children:[(0,x.jsx)(d.__experimentalText,{weight:600,children:t}),(0,x.jsxs)("div",{children:[(0,x.jsx)(d.Button,{size:"compact",icon:"info",onClick:p,style:{color:"#6b7280"}}),o&&(0,x.jsx)(d.Popover,{placement:"top",onClose:p,children:(0,x.jsx)("div",{style:{maxWidth:"300px"},children:(0,x.jsx)(X,{isFree:e,name:t,slug:n,description:i,...s})})})]})]}),(0,x.jsx)("div",{style:{marginLeft:"16px"},children:(0,x.jsx)(d.Button,{...u,size:"compact"})})]})},X=({plugin_url:e,isFree:t,...n})=>{const{isValid:i}=A(),{error:s,actionButton:r}=w(`noptin-${n.slug}`);return(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(q,{error:s,...n,button1:{href:B(e,{utm_campaign:n.slug}),target:"_blank",variant:"secondary",text:(0,m.__)("Learn More","newsletter-optin-box")},button2:t?{variant:"primary",text:(0,m.__)("Active","newsletter-optin-box"),className:"noptin-components-button__green",disabled:!0}:i?r:{variant:"primary",text:(0,m.__)("Premium","newsletter-optin-box"),icon:"lock",disabled:!0}},n.slug)})},Q=()=>(0,x.jsx)(K,{plugins:window.noptinSetupWizard.crmConnections||[],heading:"Connect Noptin to other services",description:"Install addons to connect Noptin with other email and data services.",beforePlugins:"Supported services"}),Y=()=>(0,x.jsx)(K,{plugins:window.noptinSetupWizard.detectedIntegrations||[],heading:"Install Integrations",description:"Noptin stays lightweight by letting you choose which integrations to install.",licenseRequiredText:"Some premium integrations require a license key.",beforePlugins:"Available Integrations"}),Z=(window.noptinSetupWizard.emailSettings,()=>{const{error:e,isFetching:t,fields:n}=((e,t="main")=>{const[n,i]=(0,c.useState)({}),[s,r]=(0,c.useState)(!1),[a,o]=(0,c.useState)(null),l=(0,c.useRef)(!0);return(0,c.useEffect)(()=>(l.current=!0,(async()=>{r(!0),o(null);try{const n=await y()({path:`/noptin/v1/settings/${e}/${t}`});l.current&&i(n)}catch(n){o(n?.message||"An error occurred while fetching settings."),console.error(`Error fetching settings for ${e}/${t}:`,n)}finally{l.current&&r(!1)}})(),()=>{l.current=!1}),[e,t]),{fields:n,isFetching:s,error:a}})("integrations","main"),{saved:i,isSaving:s,setAttributes:r}=S();return t?(0,x.jsx)(d.Spinner,{}):e||!n?(0,x.jsx)(d.Notice,{status:"error",isDismissible:!1,children:e||"An error occurred while fetching the settings."}):(console.log(n),(0,x.jsxs)(d.__experimentalVStack,{spacing:5,children:[(0,x.jsx)(W,{title:"Setup Integrations",desc:"Enable and configure integrations to connect with third-party services."}),(0,x.jsx)(d.__experimentalVStack,{spacing:4,style:{maxWidth:480,pointerEvents:s?"none":"auto"},children:(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(te,{settings:n})})})]}))}),ee=({children:e})=>{const{isSaving:t}=S();return t?(0,x.jsx)(d.Animate,{type:"loading",children:({className:t})=>(0,x.jsx)("div",{className:t,style:{cursor:"wait"},children:(0,x.jsx)(l.ErrorBoundary,{children:e})})}):e},te=({settings:e})=>{const{isSaving:t}=S();return(0,x.jsx)(ee,{children:(0,x.jsx)(d.__experimentalVStack,{spacing:4,style:{maxWidth:620,pointerEvents:t?"none":"auto"},children:Object.keys(e).map(t=>(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(ne,{settingKey:t,setting:e[t]})},t))})})},ne=({setting:e,settingKey:t})=>{const{saved:n,setAttributes:i}=S();return"integration_panel"===e.el?(0,x.jsx)(ie,{...e}):(0,x.jsx)(l.Setting,{settingKey:t,setting:e,saved:n,setAttributes:i})};function ie({id:e,heading:t,description:n,help_url:i,badges:s,className:r,settings:a,cardProps:o}){const[p,u]=(0,c.useState)(!1),{saved:h}=S();let m=null;s.forEach(e=>{Array.isArray(e.conditions)&&!(0,l.checkConditions)(e.conditions,h)||(m=(0,x.jsx)(d.__experimentalText,{...e.props,children:e.text}))});const g=()=>i?(0,x.jsx)(d.Button,{href:i,target:"_blank",icon:"info",label:"Learn more",showTooltip:!0}):n?(0,x.jsx)(d.Icon,{icon:"info",style:{color:"#454545"}}):null;return(0,x.jsxs)(d.Card,{id:e,size:"small",className:[r,"noptin-no-shadow"].filter(Boolean).join(" "),...o||{},children:[(0,x.jsx)(d.CardHeader,{style:{padding:0},children:(0,x.jsxs)(d.Flex,{as:d.Button,onClick:()=>u(!p),style:{paddingLeft:16,paddingRight:16,height:48},label:n,showTooltip:!0,children:[(0,x.jsxs)(d.__experimentalHStack,{as:d.FlexBlock,children:[(0,x.jsx)(d.__experimentalText,{as:"h3",weight:600,children:t}),(0,x.jsx)(g,{})]}),(0,x.jsx)(d.FlexItem,{children:(0,x.jsxs)(d.__experimentalHStack,{children:[m,(0,x.jsx)(d.Icon,{icon:p?"arrow-up-alt2":"arrow-down-alt2"})]})})]})}),p&&(0,x.jsx)(d.CardBody,{children:(0,x.jsxs)(d.__experimentalVStack,{spacing:6,children:[(0,x.jsx)(te,{settings:a}),i&&(0,x.jsx)(d.__experimentalHStack,{alignment:"flex-end",justify:"flex-end",children:(0,x.jsxs)(d.Button,{href:i,target:"_blank",label:"Need help?",variant:"secondary",showTooltip:!0,children:[(0,x.jsx)(d.__experimentalText,{children:"View integration guide"}),(0,x.jsx)(d.Icon,{icon:"external"})]})})]})})]})}const se=window.noptinSetupWizard.emailSettings||{},re=()=>{const{saved:e,isSaving:t,setAttributes:n}=S();return(0,x.jsxs)(d.__experimentalVStack,{spacing:5,children:[(0,x.jsx)(W,{title:"Email Sending",desc:"Choose how you want to send your emails."}),(0,x.jsxs)(d.__experimentalVStack,{spacing:4,style:{maxWidth:480,pointerEvents:t?"none":"auto"},children:[Object.keys(se).map(t=>(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(l.Setting,{settingKey:t,setting:se[t],saved:e,setAttributes:n})},t)),(0,x.jsx)(d.__experimentalText,{variant:"muted",children:"For higher volumes or better deliverability, you can set up an SMTP service later."})]})]})},ae=()=>{const[e,t]=(0,c.useState)(window.noptinSetupWizard.userEmail||""),[n,i]=(0,c.useState)(!1);return(0,x.jsxs)(d.__experimentalVStack,{spacing:4,children:[(0,x.jsx)("div",{children:(0,x.jsx)("span",{className:"welcome-pill",children:"One Last Thing"})}),(0,x.jsx)(W,{title:"Stay in the loop",desc:"Receive important updates and tutorials to your email inbox."}),(0,x.jsx)("div",{style:{background:"#f9fafb",padding:"24px",borderRadius:"12px",border:"1px solid #e5e7eb",marginBottom:"24px"},children:(0,x.jsx)(d.__experimentalInputControl,{type:"email",value:e,onChange:t,placeholder:"you@example.com",label:"Your Email Address",help:"We respect your inbox. No spam, unsubscribe anytime.",disabled:n,prefix:(0,x.jsx)(d.__experimentalInputControlPrefixWrapper,{children:(0,x.jsx)(d.Icon,{size:16,icon:"email"})}),__next40pxDefaultSize:!0})}),(0,x.jsxs)(d.__experimentalVStack,{spacing:3,children:[(0,x.jsx)(d.Button,{variant:"primary",onClick:async()=>{if(e){i(!0);try{await window.fetch("https://noptin.com/wp-json/noptin/v1/form",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noptin_fields:{...window.noptinSetupWizard.emailSignup,email:e},source:"Noptin Setup Wizard",noptin_timestamp:Math.floor(Date.now()/1e3)-60,noptin_submitted:Math.floor(Date.now()/1e3),noptin_ign:""})})}catch(e){console.error("Failed to subscribe:",e)}finally{i(!1),window.location.href=window.noptinSetupWizard.dashboardURL||"/wp-admin/admin.php?page=noptin"}}},icon:"arrow-right-alt",iconPosition:"right",className:"noptin-components-button__pink noptin-components-button__lg with-shadow",style:{fontWeight:600,justifyContent:"center"},children:n?(0,x.jsx)(d.Spinner,{}):"Subscribe & Go to Dashboard"}),(0,x.jsx)(d.Button,{href:window.noptinSetupWizard.dashboardURL||"/wp-admin/admin.php?page=noptin",text:"No thanks, take me to the dashboard",variant:"link",style:{color:"#6b7280",width:"100%",justifyContent:"center"}})]})]})},oe={welcome:(0,x.jsx)(O,{}),mode:(0,x.jsx)($,{}),installConnections:(0,x.jsx)(Q,{}),senderSettings:(0,x.jsx)(re,{}),installIntegrations:(0,x.jsx)(Y,{}),enableIntegrations:(0,x.jsx)(Z,{}),newsletter:(0,x.jsx)(ae,{})},le=({id:e})=>(0,x.jsx)(l.ErrorBoundary,{children:oe[e]||null}),ce=()=>{const{isSaving:e}=S(),{stepId:t}=N();return e?(0,x.jsx)(d.Spinner,{}):t&&t in oe?(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(L,{children:(0,x.jsx)(le,{id:t})})}):(0,x.jsx)("p",{children:"Step not found."})},de=({color:e="#000000"})=>(0,x.jsx)(d.__experimentalView,{style:{height:10,borderRadius:"50%",backgroundColor:e}}),pe=()=>(0,x.jsxs)(d.__experimentalGrid,{templateColumns:"repeat(3, 10px)",gap:1,children:[(0,x.jsx)(de,{color:"#f87171"}),(0,x.jsx)(de,{color:"#facc15"}),(0,x.jsx)(de,{color:"#4ade80"})]}),ue=({title:e,children:t})=>(0,x.jsx)("div",{className:"visual-wrapper",children:(0,x.jsxs)(d.__experimentalVStack,{spacing:4,className:"glass-card",children:[(0,x.jsxs)(d.__experimentalHStack,{spacing:2,justify:"space-between",children:[(0,x.jsx)(pe,{}),(0,x.jsx)(d.__experimentalText,{color:"rgba(255, 255, 255, 0.7)",size:12,weight:600,style:{textTransform:"uppercase"},children:e})]}),(0,x.jsx)(d.__experimentalDivider,{style:{color:"rgba(255, 255, 255, 0.1)"}}),t]})}),xe=({label:e,val:t})=>(0,x.jsxs)(d.__experimentalVStack,{spacing:1,style:{background:"rgba(255,255,255,0.1)",padding:"12px",borderRadius:"8px"},children:[(0,x.jsx)(d.__experimentalText,{size:10,color:"var(--noptin-brand-color-light)",style:{textTransform:"uppercase"},children:e}),(0,x.jsx)(d.__experimentalText,{size:24,weight:700,color:"white",children:t})]}),he=()=>(0,x.jsxs)(ue,{title:"Overview",children:[(0,x.jsxs)(d.__experimentalGrid,{columns:2,gap:4,children:[(0,x.jsx)(xe,{label:"Subscribers",val:"12.5k"}),(0,x.jsx)(xe,{label:"Open Rate",val:"58%"})]}),(0,x.jsxs)(d.__experimentalVStack,{spacing:2,children:[(0,x.jsx)("div",{style:{height:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"99px",width:"100%"}}),(0,x.jsx)("div",{style:{height:"8px",background:"rgba(255,255,255,0.2)",borderRadius:"99px",width:"70%"}})]})]}),me=({icon:e,label:t,isActive:n})=>(0,x.jsxs)(d.__experimentalHStack,{spacing:3,justify:"flex-start",style:{background:n?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.05)",padding:"12px",borderRadius:"8px",opacity:n?1:.6},children:[(0,x.jsx)(d.Icon,{icon:e,style:{color:"white"},size:20}),(0,x.jsx)(d.__experimentalText,{size:14,color:"white",children:t})]}),ge=()=>{const{saved:{usage_mode:e}}=S();return(0,x.jsx)(ue,{title:"Connection",children:(0,x.jsxs)(d.__experimentalVStack,{spacing:3,children:[(0,x.jsx)(me,{icon:"database",label:"Internal Database",isActive:"crm"!==e}),(0,x.jsx)(me,{icon:"admin-links",label:"External API",isActive:"crm"===e})]})})},je=({icon:e})=>(0,x.jsx)(d.__experimentalHStack,{justify:"center",style:{padding:"32px",color:"rgba(255,255,255,0.8)"},children:(0,x.jsx)(d.Icon,{icon:e,size:64})}),_e=()=>(0,x.jsx)(ue,{title:"Sender Identity",children:(0,x.jsx)(je,{icon:"email"})}),be=()=>(0,x.jsx)(ue,{title:"API Secure",children:(0,x.jsx)(je,{icon:"admin-network"})}),we=["cart","media-text","database","admin-users"],ve=()=>(0,x.jsx)(ue,{title:"Ecosystem",children:(0,x.jsx)(d.__experimentalGrid,{columns:2,gap:3,children:we.map((e,t)=>(0,x.jsx)(d.__experimentalHStack,{justify:"center",style:{background:0===t?"white":"rgba(255,255,255,0.1)",color:0===t?"#e91e63":"white",padding:"12px",borderRadius:"8px"},children:(0,x.jsx)(d.Icon,{size:24,icon:e})},t))})}),ye=()=>(0,x.jsx)(ue,{title:"Success",children:(0,x.jsxs)(d.__experimentalVStack,{style:{textAlign:"center",padding:"24px 0"},children:[(0,x.jsx)(d.__experimentalHStack,{justify:"center",style:{width:"80px",height:"80px",color:"var(--noptin-success-color)",background:"white",borderRadius:"50%",margin:"0 auto 24px auto",boxShadow:"0 10px 25px rgba(0,0,0,0.2)"},children:(0,x.jsx)(d.Icon,{icon:"yes",size:40})}),(0,x.jsx)(d.__experimentalText,{size:20,weight:700,color:"white",children:"All Set!"}),(0,x.jsx)(d.__experimentalText,{size:14,color:"rgba(255, 255, 255, 0.7)",children:"Happy mailing"})]})}),fe={welcome:(0,x.jsx)(he,{}),mode:(0,x.jsx)(ge,{}),installConnections:(0,x.jsx)(be,{}),senderSettings:(0,x.jsx)(_e,{}),installIntegrations:(0,x.jsx)(ve,{}),enableIntegrations:(0,x.jsx)(ve,{}),newsletter:(0,x.jsx)(ye,{})},Se=({id:e,location:t})=>{const n={opacity:1,transition:"all 0.7s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateX(0) scale(1)",zIndex:100,padding:48,inset:0,position:"absolute"};return"active"!==t&&(n.opacity=0,n.pointerEvents="none",n.transform="prev"===t?"translateX(-50%) scale(0.9)":"translateX(50%) scale(0.9)"),(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(d.__experimentalHStack,{justify:"center",style:n,children:fe[e]||null})})},ke=()=>{const e=C(),{stepId:t,current:n}=N();return t&&t in fe?(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(d.__experimentalHStack,{className:"col-right",alignment:"center",justify:"center",children:e.map(({id:e},t)=>(0,x.jsx)(Se,{id:e,location:n===t?"active":n>t?"prev":"next"},e))})}):null},Ce=()=>{const e=(0,R.useViewportMatch)("medium");return(0,x.jsxs)(d.Card,{className:"noptin-setup-wizard-container",isBorderless:!0,isRounded:!0,children:[(0,x.jsxs)(d.__experimentalGrid,{templateColumns:e?"1fr 1fr 1fr":"1fr 1fr",gap:0,children:[(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)("div",{className:"col-left",style:{gridColumn:"span 2",minHeight:"calc(100vh - 240px)"},children:(0,x.jsx)(d.__experimentalVStack,{className:"fade-in",justify:"center",style:{flexGrow:1},children:(0,x.jsx)(ce,{})})})}),e&&(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(ke,{})})]}),(0,x.jsx)(d.Popover.Slot,{})]})},Ie=()=>{const{current:e,totalSteps:t}=N(),n=(0,c.useMemo)(()=>{const n={brand:{...window.noptinSetupWizard.brand}};return e<t-1&&(delete n.brand.menu,e>0&&(n.extra=(0,x.jsxs)(d.__experimentalText,{size:12,weight:600,variant:"muted",className:"noptin-step-indicator",children:["Step ",e," of ",t-1]})),n.actions=[{variant:"link",text:"Need Help?",href:B("https://noptin.com/start-here/",{utm_campaign:"Documentation Link"})},{icon:"no-alt",iconSize:32,href:window.noptinSetupWizard.dashboardURL,label:"Exit Setup Wizard",showTooltip:!0,className:"noptin-exit-setup-wizard"}]),n},[t,e]);return(0,x.jsx)(p.Header,{...n})},Ne=(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(Ie,{})}),ze=(0,x.jsxs)(l.ErrorBoundary,{children:[(0,x.jsx)(Ce,{}),(0,x.jsx)(h,{})]});function Be(){return(0,x.jsx)(p.Interface,{isDistractionFree:!1,header:Ne,content:ze,storeName:"noptin/setup-wizard"})}const Te=()=>(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(V,{children:(0,x.jsx)(l.ErrorBoundary,{children:(0,x.jsx)(Be,{})})})});r()(()=>{const e=document.getElementById("noptin-setup-wizard-app");e&&((0,a.dispatch)(o.store)?.setDefaults("noptin/setup-wizard",{fullscreenMode:!0}),(0,i.H)(e).render((0,x.jsx)(Te,{})))})},5338(e,t,n){var i=n(5795);t.H=i.createRoot,i.hydrateRoot},5795(e){e.exports=window.ReactDOM}},n={};function i(e){var s=n[e];if(void 0!==s)return s.exports;var r=n[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,n,s,r)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,s,r]=e[d],o=!0,l=0;l<n.length;l++)(!1&r||a>=r)&&Object.keys(i.O).every(e=>i.O[e](n[l]))?n.splice(l--,1):(o=!1,r<a&&(a=r));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,s,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={733:0,773:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,r,[a,o,l]=n,c=0;if(a.some(t=>0!==e[t])){for(s in o)i.o(o,s)&&(i.m[s]=o[s]);if(l)var d=l(i)}for(t&&t(n);c<a.length;c++)r=a[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},n=globalThis.webpackChunknoptin_premium=globalThis.webpackChunknoptin_premium||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=i.O(void 0,[773],()=>i(4192));s=i.O(s)})();