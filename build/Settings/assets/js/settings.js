(()=>{"use strict";var e,t={7070:(e,t,n)=>{const r=window.wp.domReady;var s=n.n(r);const i=window.wp.element,o=window.wp.components,a=window.React;var l=n.n(a);const c=window.hizzlewp.interface,d=window.wp.i18n,p=window.wp.data,u=window.wp.notices,h=window.ReactJSXRuntime;function x(){const{notices:e}=(0,p.useSelect)((e=>({notices:e(u.store).getNotices()})),[]),{removeNotice:t}=(0,p.useDispatch)(u.store),n=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),r=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.NoticeList,{notices:r,className:"components-editor-notices__pinned"}),(0,h.jsx)(o.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:t})]})}function g(){const e=(0,p.useSelect)((e=>e(u.store).getNotices()),[]),{removeNotice:t}=(0,p.useDispatch)(u.store),n=e.filter((({type:e})=>"snackbar"===e)).slice(-3);return(0,h.jsx)(o.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}const m=window.wp.url,v=window.wp.compose;class w extends l().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,h.jsx)("div",{children:(0,h.jsxs)("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #F87171",color:"#B91C1C",padding:"0.75rem 1rem",borderRadius:"0.25rem",position:"relative"},role:"alert",children:[(0,h.jsx)(o.__experimentalText,{as:"strong",weight:500,color:"#B91C1C",children:"Oops! Something went wrong."}),"Â ",(0,h.jsx)(o.__experimentalText,{color:"#B91C1C",children:"This error is being logged."}),(0,h.jsxs)("details",{style:{marginTop:"0.5rem",fontSize:"0.875rem"},children:[(0,h.jsx)("summary",{children:"Click for error details"}),(0,h.jsxs)("pre",{style:{overflow:"auto",fontSize:"0.875rem",marginTop:"0.5rem"},children:[this.state.error&&this.state.error.toString(),(0,h.jsx)("br",{}),this.state.errorInfo?.componentStack]})]})]})}):this.props.children}}const j=w,b=(0,a.createContext)([]),_=()=>(0,a.useContext)(b),f=({settings:e,children:t})=>{const n=(0,a.useMemo)((()=>Object.keys(e).map((t=>{const n=Object.keys(e[t].sub_sections)[0],r=[];return Object.keys(e[t].sub_sections).map((n=>{r.push({name:n,title:e[t].sub_sections[n].label,settings:e[t].sub_sections[n].settings,path:`/${t}/${n}`})})),{tabName:t,title:e[t].label,name:`/${t}/${n}`,sections:r}}))),[e]);return(0,h.jsx)(b.Provider,{value:n,children:t})},y=window.wp.apiFetch;var S=n.n(y);const k=(0,a.createContext)({options:{},save:()=>{},setAttributes:()=>{},isSaving:!1}),N=()=>(0,a.useContext)(k),C=({saved:e,children:t})=>{const[n,r]=(0,a.useState)(e),[s,i]=(0,a.useState)(!1),o=(0,a.useRef)(!1),{createSuccessNotice:l,createErrorNotice:c}=(0,p.useDispatch)(u.store);(0,a.useEffect)((()=>{const e=e=>{if(o.current)return e.returnValue=(0,d.__)("You have unsaved changes. If you proceed, they will be lost."),e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[o.current]);const x=(0,a.useCallback)((()=>{i(!0),o.current=!1,S()({path:"/wp/v2/settings",method:"POST",data:{noptin_options:{...n}}}).then((e=>(l((0,d.__)("Settings saved."),{type:"snackbar"}),e.noptin_options&&r(e.noptin_options),e))).catch((e=>{e.message?c(e.message):c((0,d.__)("An error occurred while saving.","newsletter-optin-box"))})).finally((()=>{i(!1)}))}),[n,r,i,l,c]),g=(0,a.useCallback)((e=>{o.current=!0,r({...n,...e})}),[n,r]),m=(0,a.useMemo)((()=>({options:n,save:x,setAttributes:g,isSaving:s})),[n,x,g,s]),v={opacity:s?.5:1,pointerEvents:s?"none":"auto",cursor:s?"wait":"auto"};return(0,h.jsx)(k.Provider,{value:m,children:(0,h.jsx)("div",{style:v,children:t})})},T=window.hizzlewp.components;function A(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=A(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const O=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=A(e))&&(r&&(r+=" "),r+=t);return r};function B({id:e,heading:t,description:n,help_url:r,badges:s,className:i,settings:l,cardProps:c}){const[d,p]=(0,a.useState)(!1),{options:u}=N();let x=null;s.forEach((e=>{if(Array.isArray(e.conditions)&&!e.conditions.every((e=>{const t=e.operator?e.operator:"==";return(0,T.compare)(e.value,t,u[e.key])})))return null;x=(0,h.jsx)(o.__experimentalText,{...e.props,children:e.text})}));const g=()=>r?(0,h.jsx)(o.Button,{href:r,target:"_blank",icon:"info",label:"Learn more",showTooltip:!0}):n?(0,h.jsx)(o.Icon,{icon:"info",style:{color:"#454545"}}):null;return(0,h.jsxs)(o.Card,{id:e,size:"small",className:O(i,"noptin-no-shadow"),borderBottom:!0,borderLeft:!0,borderRight:!0,borderTop:!0,...c||{},children:[(0,h.jsx)(o.CardHeader,{style:{padding:0},children:(0,h.jsxs)(o.Flex,{as:o.Button,onClick:()=>p(!d),style:{paddingLeft:16,paddingRight:16,height:48},label:n,showTooltip:!0,children:[(0,h.jsxs)(o.__experimentalHStack,{as:o.FlexBlock,children:[(0,h.jsx)(o.__experimentalText,{as:"h3",weight:600,children:t}),(0,h.jsx)(g,{})]}),(0,h.jsx)(o.FlexItem,{children:(0,h.jsxs)(o.__experimentalHStack,{children:[x,(0,h.jsx)(o.Icon,{icon:d?"arrow-up-alt2":"arrow-down-alt2"})]})})]})}),d&&(0,h.jsx)(o.CardBody,{children:(0,h.jsxs)(o.__experimentalVStack,{spacing:6,children:[(0,h.jsx)(z,{settings:l}),r&&(0,h.jsx)(o.__experimentalHStack,{alignment:"flex-end",justify:"flex-end",children:(0,h.jsxs)(o.Button,{href:r,target:"_blank",label:"Need help?",variant:"secondary",showTooltip:!0,children:[(0,h.jsx)(o.__experimentalText,{children:"View integration guide"}),(0,h.jsx)(o.Icon,{icon:"external"})]})})]})})]})}function E({id:e,label:t,className:n,settings:r,conditions:s,cardProps:i}){const{options:a}=N();return Array.isArray(s)&&!s.every((e=>{const t=e.key.split("."),n=e.operator?e.operator:"==";return(0,T.compare)(e.value,n,(0,T.getNestedValue)(a,t))}))?null:(0,h.jsxs)(o.Card,{id:e,isElevated:!0,isRounded:!1,size:"large",className:n,borderBottom:!0,borderLeft:!0,borderRight:!0,borderTop:!0,...i||{},children:[(0,h.jsx)(o.CardHeader,{children:(0,h.jsx)(o.__experimentalText,{weight:600,children:t})}),(0,h.jsx)(o.CardBody,{children:(0,h.jsx)(z,{settings:r})})]})}const P=({initialPath:e})=>{const t=(0,v.useViewportMatch)("small","<"),n=_(),{goTo:r}=(0,o.__experimentalUseNavigator)(),s=(0,a.useCallback)((e=>{const t=(0,m.addQueryArgs)(window.location.href,{path:e});window.history.pushState({path:t},"",t),r(e)}),[r]);return(0,h.jsx)(o.TabPanel,{initialTabName:e,onSelect:s,orientation:t?"vertical":"horizontal",tabs:n,className:"noptin-settings__tabs",children:e=>(0,h.jsx)(R,{tabName:e.tabName})})},R=({tabName:e})=>{const{save:t,isSaving:n}=N(),r=_(),{goTo:s,location:i}=(0,o.__experimentalUseNavigator)(),l=(0,a.useMemo)((()=>{const t=r.find((t=>t.tabName===e));return t?t.sections:[]}),[r,e]);return(0,h.jsx)(j,{children:(0,h.jsxs)(o.__experimentalVStack,{spacing:4,"data-current-path":i.path,style:{maxWidth:620},children:[1<l.length&&(0,h.jsx)(o.NavigableMenu,{className:"noptin-settings__sections-menu",orientation:"horizontal",onNavigate:e=>s(l[e].path),children:l.map((e=>(0,h.jsx)(o.__experimentalNavigatorButton,{path:e.path,isPressed:i.path===e.path,children:e.title},e.path)))}),l.map((e=>(0,h.jsx)(o.__experimentalNavigatorScreen,{path:e.path,children:(0,h.jsx)(z,{settings:e.settings})},e.path))),(0,h.jsx)("div",{children:(0,h.jsxs)(o.Button,{variant:"primary",isBusy:n,onClick:t,disabled:n,children:[n?(0,d.__)("Saving...","noptin"):(0,d.__)("Save Settings","noptin"),n&&(0,h.jsx)(o.Spinner,{})]})})]})})},z=({settings:e})=>{const{options:t,setAttributes:n}=N();return(0,h.jsx)(o.__experimentalVStack,{spacing:4,children:Object.keys(e).map((r=>(0,h.jsx)(j,{children:(0,h.jsx)(F,{settingKey:r,setting:e[r],options:t,setAttributes:n})},r)))})},F=({setting:e,settingKey:t,options:n,setAttributes:r})=>"integration_panel"===e.el?(0,h.jsx)(B,{...e}):"settings_group"===e.el?(0,h.jsx)(E,{...e}):(0,h.jsx)(T.Setting,{settingKey:t,setting:e,saved:n,setAttributes:r}),I=()=>{const e=_(),t=(0,a.useMemo)((()=>{if((0,m.getQueryArg)(window.location.href,"tab")){const t=e.find((e=>e.tabName===(0,m.getQueryArg)(window.location.href,"tab")));if(t)return t.name}return(0,m.getQueryArg)(window.location.href,"path")||"/general/main"}),[e]);return(0,h.jsx)(j,{children:(0,h.jsx)(o.__experimentalNavigatorProvider,{initialPath:t,children:(0,h.jsx)(P,{initialPath:t})})})},L=()=>{const{save:e,isSaving:t}=N();return(0,h.jsx)(c.Header,{brand:window.noptinSettings?.data?.brand,actions:[{variant:"primary",text:t?(0,d.__)("Saving...","newsletter-optin-box"):(0,d.__)("Save Settings","newsletter-optin-box"),onClick:e,isBusy:t,disabled:t}]})},V=(0,h.jsxs)(o.__experimentalVStack,{children:[(0,h.jsx)(I,{}),(0,h.jsx)(g,{}),(0,h.jsx)(x,{})]}),D=(0,h.jsx)(c.Footer,{children:(0,h.jsx)("a",{href:"https://wordpress.org/support/plugin/newsletter-optin-box/reviews/?filter=5",target:"_blank",rel:"noreferrer",children:(0,h.jsx)(o.__experimentalText,{size:14,variant:"muted",children:"Thank you for using Noptin. Please leave us a review ðŸŒŸ"})})});function M(){return(0,h.jsx)(c.NoptinInterface,{className:"noptin-settings__interface",header:(0,h.jsx)(L,{}),content:V,footer:D})}s()((()=>{const e=document.getElementById("noptin-settings__app");if(!e)return;const t=()=>(0,h.jsx)(o.SlotFillProvider,{children:(0,h.jsx)(f,{settings:window.noptinSettings.data.settings,children:(0,h.jsx)(C,{saved:window.noptinSettings.data.saved,children:(0,h.jsx)(M,{})})})});i.createRoot?(0,i.createRoot)(e).render((0,h.jsx)(t,{})):(0,i.render)((0,h.jsx)(t,{}),e)}))}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,s,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],a=!0,l=0;l<n.length;l++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(a=!1,i<o&&(o=i));if(a){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={903:0,711:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[o,a,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(s in a)r.o(a,s)&&(r.m[s]=a[s]);if(l)var d=l(r)}for(t&&t(n);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=globalThis.webpackChunknoptin_premium=globalThis.webpackChunknoptin_premium||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=r.O(void 0,[711],(()=>r(7070)));s=r.O(s)})();