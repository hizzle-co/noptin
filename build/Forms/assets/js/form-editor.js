(()=>{var e,t={1609:e=>{"use strict";e.exports=window.React},2017:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n}},2694:(e,t,n)=>{"use strict";var r=n(6925);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},5338:(e,t,n)=>{"use strict";var r=n(5795);t.H=r.createRoot,r.hydrateRoot},5556:(e,t,n)=>{e.exports=n(2694)()},5795:e=>{"use strict";e.exports=window.ReactDOM},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7123:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return s(t,e),t},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var p=l(n(1609)),u=d(n(2017)),f=l(n(5556));function m(e){return e&&e.replace(/&nbsp;|\u202F|\u00A0/g," ").replace(/<br \/>/g,"<br>")}var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastHtml=t.props.html,t.el="function"==typeof t.props.innerRef?{current:null}:p.createRef(),t.getEl=function(){return(t.props.innerRef&&"function"!=typeof t.props.innerRef?t.props.innerRef:t.el).current},t.emitChange=function(e){var n=t.getEl();if(n){var r=n.innerHTML;if(t.props.onChange&&r!==t.lastHtml){var o=Object.assign({},e,{target:{value:r}});t.props.onChange(o)}t.lastHtml=r}},t}return o(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.tagName,r=t.html,o=t.innerRef,i=c(t,["tagName","html","innerRef"]);return p.createElement(n||"div",a(a({},i),{ref:"function"==typeof o?function(t){o(t),e.el.current=t}:o||this.el,onInput:this.emitChange,onBlur:this.props.onBlur||this.emitChange,onKeyUp:this.props.onKeyUp||this.emitChange,onKeyDown:this.props.onKeyDown||this.emitChange,contentEditable:!this.props.disabled,dangerouslySetInnerHTML:{__html:r}}),this.props.children)},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=this.getEl();return!n||m(e.html)!==m(n.innerHTML)||t.disabled!==e.disabled||t.tagName!==e.tagName||t.className!==e.className||t.innerRef!==e.innerRef||t.placeholder!==e.placeholder||!(0,u.default)(t.style,e.style)},t.prototype.componentDidUpdate=function(){var e=this.getEl();e&&(this.props.html!==e.innerHTML&&(e.innerHTML=this.props.html),this.lastHtml=this.props.html,function(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(null!==t&&null!==t.nodeValue&&n){var r=window.getSelection();if(null!==r){var o=document.createRange();o.setStart(t,t.nodeValue.length),o.collapse(!0),r.removeAllRanges(),r.addRange(o)}e instanceof HTMLElement&&e.focus()}}(e))},t.propTypes={html:f.string.isRequired,onChange:f.func,disabled:f.bool,tagName:f.string,className:f.string,style:f.object,innerRef:f.oneOfType([f.object,f.func])},t}(p.Component);t.default=h},9578:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{closeModal:()=>H,disableComplementaryArea:()=>I,enableComplementaryArea:()=>O,openModal:()=>z,pinItem:()=>B,setDefaultComplementaryArea:()=>E,setFeatureDefaults:()=>D,setFeatureValue:()=>R,toggleFeature:()=>L,unpinItem:()=>F});var o={};n.r(o),n.d(o,{getActiveComplementaryArea:()=>V,isComplementaryAreaLoading:()=>G,isFeatureActive:()=>U,isItemPinned:()=>W,isModalActive:()=>K});var a=n(1609),i=n.n(a),s=n(5338);const l=window.wp.domReady;var c=n.n(l);const d=window.wp.components,p=window.ReactJSXRuntime;class u extends i().Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,p.jsx)("div",{children:(0,p.jsxs)("div",{style:{backgroundColor:"#FEE2E2",border:"1px solid #F87171",color:"#B91C1C",padding:"0.75rem 1rem",borderRadius:"0.25rem",position:"relative"},role:"alert",children:[(0,p.jsx)(d.__experimentalText,{as:"strong",weight:500,color:"#B91C1C",children:"Oops! Something went wrong."}),"Â ",(0,p.jsx)(d.__experimentalText,{color:"#B91C1C",children:"This error is being logged."}),(0,p.jsxs)("details",{style:{marginTop:"0.5rem",fontSize:"0.875rem"},children:[(0,p.jsx)("summary",{children:"Click for error details"}),(0,p.jsxs)("pre",{style:{overflow:"auto",fontSize:"0.875rem",marginTop:"0.5rem"},children:[this.state.error&&this.state.error.toString(),(0,p.jsx)("br",{}),this.state.errorInfo?.componentStack]})]})]})}):this.props.children}}const f=u,m=window.wp.data,h=window.wp.editor,g=window.wp.coreData,x=window.wp.element,_=({isActive:e})=>((0,x.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,x.useEffect)((()=>(e?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{e&&document.body.classList.remove("is-fullscreen-mode")})),[e]),null);function b(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=b(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const y=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=b(e))&&(r&&(r+=" "),r+=t);return r},v=window.wp.i18n,j=window.wp.compose,w=(0,x.forwardRef)((({children:e,className:t,ariaLabel:n,as:r="div",...o},a)=>(0,p.jsx)(r,{ref:a,className:y("interface-navigable-region",t),"aria-label":n,role:"region",tabIndex:"-1",...o,children:e})));w.displayName="NavigableRegion";const C=w,k={type:"tween",duration:.25,ease:[.6,0,.4,1]},S={hidden:{opacity:1,marginTop:-60},visible:{opacity:1,marginTop:0},distractionFreeHover:{opacity:1,marginTop:0,transition:{...k,delay:.2,delayChildren:.2}},distractionFreeHidden:{opacity:0,marginTop:-60},distractionFreeDisabled:{opacity:0,marginTop:0,transition:{...k,delay:.8,delayChildren:.8}}},T=(0,x.forwardRef)((function({isDistractionFree:e,footer:t,header:n,editorNotices:r,sidebar:o,secondarySidebar:a,content:i,actions:s,labels:l,className:c},u){const[f,m]=(0,j.useResizeObserver)(),h=(0,j.useViewportMatch)("medium","<"),g={type:"tween",duration:(0,j.useReducedMotion)()?0:.25,ease:[.6,0,.4,1]};!function(e){(0,x.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const _={
/* translators: accessibility text for the top bar landmark region. */
header:(0,v._x)("Header","header landmark area"),
/* translators: accessibility text for the content landmark region. */
body:(0,v.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,v.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,v._x)("Settings","settings landmark area"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,v.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,v.__)("Footer"),...l};return(0,p.jsxs)("div",{ref:u,className:y(c,"interface-interface-skeleton",!!t&&"has-footer"),children:[(0,p.jsxs)("div",{className:"interface-interface-skeleton__editor",children:[(0,p.jsx)(d.__unstableAnimatePresence,{initial:!1,children:!!n&&(0,p.jsx)(C,{as:d.__unstableMotion.div,className:"interface-interface-skeleton__header","aria-label":_.header,initial:e&&!h?"distractionFreeHidden":"hidden",whileHover:e&&!h?"distractionFreeHover":"visible",animate:e&&!h?"distractionFreeDisabled":"visible",exit:e&&!h?"distractionFreeHidden":"hidden",variants:S,transition:g,children:n})}),e&&(0,p.jsx)("div",{className:"interface-interface-skeleton__header",children:r}),(0,p.jsxs)("div",{className:"interface-interface-skeleton__body",children:[(0,p.jsx)(d.__unstableAnimatePresence,{initial:!1,children:!!a&&(0,p.jsx)(C,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:_.secondarySidebar,as:d.__unstableMotion.div,initial:"closed",animate:"open",exit:"closed",variants:{open:{width:m.width},closed:{width:0}},transition:g,children:(0,p.jsxs)(d.__unstableMotion.div,{style:{position:"absolute",width:h?"100vw":"fit-content",height:"100%",left:0},variants:{open:{x:0},closed:{x:"-100%"}},transition:g,children:[f,a]})})}),(0,p.jsx)(C,{className:"interface-interface-skeleton__content",ariaLabel:_.body,children:i}),!!o&&(0,p.jsx)(C,{className:"interface-interface-skeleton__sidebar",ariaLabel:_.sidebar,children:o}),!!s&&(0,p.jsx)(C,{className:"interface-interface-skeleton__actions",ariaLabel:_.actions,children:s})]})]}),!!t&&(0,p.jsx)(C,{className:"interface-interface-skeleton__footer",ariaLabel:_.footer,children:t})]})})),A=window.wp.deprecated;var P=n.n(A);const N=window.wp.preferences;function M(e){return["core/edit-post","core/edit-site"].includes(e)?(P()(`${e} interface scope`,{alternative:"core interface scope",hint:"core/edit-post and core/edit-site are merging.",version:"6.6"}),"core"):e}function $(e,t){return"core"===e&&"edit-site/template"===t?(P()("edit-site/template sidebar",{alternative:"edit-post/document",version:"6.6"}),"edit-post/document"):"core"===e&&"edit-site/block-inspector"===t?(P()("edit-site/block-inspector sidebar",{alternative:"edit-post/block",version:"6.6"}),"edit-post/block"):t}const E=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e=M(e),area:t=$(e,t)}),O=(e,t)=>({registry:n,dispatch:r})=>{t&&(e=M(e),t=$(e,t),n.select(N.store).get(e,"isComplementaryAreaVisible")||n.dispatch(N.store).set(e,"isComplementaryAreaVisible",!0),r({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},I=e=>({registry:t})=>{e=M(e),t.select(N.store).get(e,"isComplementaryAreaVisible")&&t.dispatch(N.store).set(e,"isComplementaryAreaVisible",!1)},B=(e,t)=>({registry:n})=>{if(!t)return;e=M(e),t=$(e,t);const r=n.select(N.store).get(e,"pinnedItems");!0!==r?.[t]&&n.dispatch(N.store).set(e,"pinnedItems",{...r,[t]:!0})},F=(e,t)=>({registry:n})=>{if(!t)return;e=M(e),t=$(e,t);const r=n.select(N.store).get(e,"pinnedItems");n.dispatch(N.store).set(e,"pinnedItems",{...r,[t]:!1})};function L(e,t){return function({registry:n}){P()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(N.store).toggle(e,t)}}function R(e,t,n){return function({registry:r}){P()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),r.dispatch(N.store).set(e,t,!!n)}}function D(e,t){return function({registry:n}){P()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(N.store).setDefaults(e,t)}}function z(e){return{type:"OPEN_MODAL",name:e}}function H(){return{type:"CLOSE_MODAL"}}const V=(0,m.createRegistrySelector)((e=>(t,n)=>{n=M(n);const r=e(N.store).get(n,"isComplementaryAreaVisible");if(void 0!==r)return!1===r?null:t?.complementaryAreas?.[n]})),G=(0,m.createRegistrySelector)((e=>(t,n)=>{n=M(n);const r=e(N.store).get(n,"isComplementaryAreaVisible"),o=t?.complementaryAreas?.[n];return r&&void 0===o})),W=(0,m.createRegistrySelector)((e=>(t,n,r)=>{var o;r=$(n=M(n),r);const a=e(N.store).get(n,"pinnedItems");return null===(o=a?.[r])||void 0===o||o})),U=(0,m.createRegistrySelector)((e=>(t,n,r)=>(P()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(N.store).get(n,r))));function K(e,t){return e.activeModal===t}const q=(0,m.combineReducers)({complementaryAreas:function(e={},t){switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:n,area:r}=t;return e[n]?e:{...e,[n]:r}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:n,area:r}=t;return{...e,[n]:r}}}return e},activeModal:function(e=null,t){switch(t.type){case"OPEN_MODAL":return t.name;case"CLOSE_MODAL":return null}return e}}),Z=(0,m.createReduxStore)("core/interface",{reducer:q,actions:r,selectors:o});(0,m.register)(Z);const Y=window.wp.notices;function X(){const{notices:e}=(0,m.useSelect)((e=>({notices:e(Y.store).getNotices()})),[]),{removeNotice:t}=(0,m.useDispatch)(Y.store),n=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),r=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.NoticeList,{notices:r,className:"components-editor-notices__pinned"}),(0,p.jsx)(d.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:t})]})}function J(){const e=(0,m.useSelect)((e=>e(Y.store).getNotices()),[]),{removeNotice:t}=(0,m.useDispatch)(Y.store),n=e.filter((({type:e})=>"snackbar"===e)).slice(-3);return(0,p.jsx)(d.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}function Q(){const[e,t]=(0,a.useState)(!1),{editPost:n,savePost:r}=(0,m.useDispatch)(h.store),{isSaving:o,isPublished:i,isScheduled:s}=(0,m.useSelect)((e=>{const{isSavingPost:t,isCurrentPostPublished:n,isCurrentPostScheduled:r}=e(h.store);return{isSaving:t(),isPublished:n(),isScheduled:r()}}),[]);let l,c;return i?(l=(0,v.__)("Are you sure you want to unpublish this form?"),c=(0,v.__)("Unpublish")):s&&(l=(0,v.__)("Are you sure you want to unschedule this form?"),c=(0,v.__)("Unschedule")),i||s?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Button,{__next40pxDefaultSize:!0,className:"editor-post-switch-to-draft",onClick:()=>{o||t(!0)},"aria-disabled":o,variant:"tertiary",style:{flexGrow:"1",justifyContent:"center"},children:(0,v.__)("Switch to draft")}),(0,p.jsx)(d.__experimentalConfirmDialog,{isOpen:e,onConfirm:()=>{t(!1),n({status:"draft"}),r()},onCancel:()=>t(!1),confirmButtonText:c,children:l})]}):null}const ee=window.noptinForm?.data?.brand||{},te=()=>(0,p.jsxs)(d.__experimentalHStack,{as:d.__experimentalSurface,style:{padding:"10px 20px"},wrap:!0,children:[(0,p.jsx)("div",{children:(0,p.jsx)(f,{children:(0,p.jsxs)(d.__experimentalHStack,{wrap:!0,justify:"flex-start",children:[ee.logo&&(0,p.jsx)("img",{src:ee.logo,alt:ee.name,style:{width:"auto",height:"40px"}}),(0,p.jsx)(d.__experimentalText,{weight:600,size:14,children:ee.name||(0,v.__)("Noptin","noptin")}),(0,p.jsx)(d.__experimentalText,{weight:600,size:14,variant:"muted",children:ee.version}),(0,p.jsx)(d.ToolbarItem,{as:h.EditorHistoryUndo,size:"compact"}),(0,p.jsx)(d.ToolbarItem,{as:h.EditorHistoryRedo,size:"compact"})]})})}),(0,p.jsx)("div",{children:(0,p.jsx)(f,{children:(0,p.jsxs)(d.__experimentalHStack,{children:[(0,p.jsx)(h.PostSavedState,{}),(0,p.jsx)(Q,{}),(0,p.jsx)(h.PostPublishButton,{})]})})})]}),ne=()=>(0,p.jsx)(d.__experimentalSurface,{style:{padding:"10px 20px"},children:(0,p.jsx)("a",{href:"https://wordpress.org/support/plugin/newsletter-optin-box/reviews/?filter=5",target:"_blank",rel:"noreferrer",children:(0,p.jsx)(d.__experimentalText,{size:14,variant:"muted",children:"Thank you for using Noptin. Please leave us a review ðŸŒŸ"})})}),re=()=>{const[e,t]=(0,g.useEntityProp)("postType","noptin-form","title");return(0,p.jsx)(f,{children:(0,p.jsx)(d.__experimentalInputControl,{label:(0,v.__)("Form Name","noptin"),value:e||"",onChange:t,__next40pxDefaultSize:!0,isPressEnterToChange:!0})})},oe=window.noptinForm?.data?.fields||{},ae=({label:e,type:t="text"})=>(0,p.jsx)("input",{type:t||"text",className:"noptin-form-field",placeholder:e}),ie=({label:e})=>(0,p.jsx)("textarea",{className:"noptin-form-field",placeholder:e}),se=({option:e})=>{if(!e)return null;const t=e.toString().split("|").splice(0,1).join("");return(0,p.jsx)("option",{value:t,children:t})},le=({label:e,options:t})=>(0,p.jsxs)("select",{className:"noptin-form-field",children:[(0,p.jsx)("option",{children:e}),t.split(",").map(((e,t)=>(0,p.jsx)(se,{option:e},t)))]}),ce=({label:e})=>(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",className:"noptin-checkbox-form-field"}),(0,p.jsx)("span",{children:e})]}),de=({type:e,label:t,...n})=>{if("hidden"===n.type)return null;if(!Array.isArray(oe)&&oe[e]){let n=oe[e].markup||"";return n=n.replace(/{{field.type.label}}/g,t||oe[e].label),n=n.replace(/:placeholder="field.type.label"/g,`placeholder="${t||oe[e].label}"`),(0,p.jsx)(x.RawHTML,{className:`noptin-field-${oe[e].type}`,children:n})}return["name","text","email"].includes(e)?(0,p.jsx)(ae,{label:t}):"textarea"===e?(0,p.jsx)(ie,{label:t}):"select"===e||"dropdown"===e?(0,p.jsx)(le,{label:t,options:n.options}):"checkbox"===e?(0,p.jsx)(ce,{label:t}):(0,p.jsx)("pre",{children:JSON.stringify({type:e,label:t,...n},null,2)})};var pe=n(7123),ue=n.n(pe);class fe extends i().Component{constructor(e){super(e),this.contentEditable=i().createRef()}handleChange=e=>{this.props.onHtmlChange(e.target.value)};render(){const{html:e,disabled:t=!1,tagName:n="div",...r}=this.props;return(0,p.jsx)(ue(),{innerRef:this.contentEditable,html:e||"",disabled:t,onChange:this.handleChange,tagName:n,...r})}}const me=({field:e})=>{const[t,n]=(0,g.useEntityProp)("postType","noptin-form","meta"),r=t?._noptin_state||{},o=(0,a.useCallback)((o=>{n({...t,_noptin_state:{...r,[e]:o}})}),[t,r,e]);return(0,p.jsx)(fe,{html:r[e],onHtmlChange:o,className:y(`noptin-form-${"title"===e?"heading":e}`,r[`${e}Advanced`]?.classes)})},he=({state:e})=>{const t=`\n        .noptin-form-preview .noptin-optin-form-wrapper {\n            ${e?.formBorder?.generated||""}\n            ${e?.noptinFormBg&&`background-color: ${e?.noptinFormBg};`}\n            ${e?.noptinFormBgImg&&`background-image: url(${e?.noptinFormBgImg});`}\n            ${e?.formWidth&&`max-width: ${e?.formWidth};`}\n            ${e?.formHeight&&`min-height: ${e?.formHeight};`}\n            ${e?.descriptionColor&&`color: ${e?.descriptionColor};`}\n        }\n        .noptin-form-preview .noptin-form-header .noptin-form-heading {\n            ${e?.titleColor&&`color: ${e?.titleColor};`}\n            ${e?.titleTypography?.generated||""}\n            ${e?.titleAdvanced?.generated||""}\n        }\n        .noptin-form-preview .noptin-form-header .noptin-form-prefix {\n            ${e?.prefixColor&&`color: ${e?.prefixColor};`}\n            ${e?.prefixTypography?.generated||""}\n            ${e?.prefixAdvanced?.generated||""}\n        }\n        .noptin-form-preview .noptin-form-header .noptin-form-description {\n            ${e?.descriptionColor&&`color: ${e?.descriptionColor};`}\n            ${e?.descriptionTypography?.generated||""}\n            ${e?.descriptionAdvanced?.generated||""}\n        }\n        .noptin-form-preview .noptin-form-footer .noptin-form-note {\n            ${e?.noteColor&&`color: ${e?.noteColor};`}\n            ${e?.noteTypography?.generated||""}\n            ${e?.noteAdvanced?.generated||""}\n        }\n        ${e?.CSS||""}\n    `;return(0,p.jsx)("style",{dangerouslySetInnerHTML:{__html:t}})},ge=()=>{const[e]=(0,g.useEntityProp)("postType","noptin-form","meta"),t=e?._noptin_state||{};return(0,p.jsx)("div",{className:"noptin-form-field-wrapper noptin-form-field-submit noptin-optin-field-wrapper noptin-optin-field-submit",children:(0,p.jsx)("input",{type:"submit",style:{backgroundColor:t.noptinButtonBg,color:t.noptinButtonColor},value:t.noptinButtonLabel||"Subscribe Now",className:y("noptin-form-submit",!t.singleLine&&`noptin-form-button-${t.buttonPosition}`)})})},xe=window.wp.blockEditor,_e=window.wp.primitives,be=(0,p.jsx)(_e.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(_e.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm.5 16c0 .3-.2.5-.5.5H5c-.3 0-.5-.2-.5-.5V7h15v12zM9 10H7v2h2v-2zm0 4H7v2h2v-2zm4-4h-2v2h2v-2zm4 0h-2v2h2v-2zm-4 4h-2v2h2v-2zm4 0h-2v2h2v-2z"})}),ye=(0,p.jsx)(_e.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)(_e.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zm-2.8 0H9.8V7c0-1.2 1-2.2 2.2-2.2s2.2 1 2.2 2.2v3z"})}),ve=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z"})}),je=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M12 15.8c-3.7 0-6.8-3-6.8-6.8s3-6.8 6.8-6.8c3.7 0 6.8 3 6.8 6.8s-3.1 6.8-6.8 6.8zm0-12C9.1 3.8 6.8 6.1 6.8 9s2.4 5.2 5.2 5.2c2.9 0 5.2-2.4 5.2-5.2S14.9 3.8 12 3.8zM8 17.5h8V19H8zM10 20.5h4V22h-4z"})}),we=window.wp.keycodes,Ce=window.wp.date,ke=window.wp.apiFetch;var Se=n.n(ke);const Te=window.wp.url;function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(null,arguments)}var Pe=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Ne=Math.abs,Me=String.fromCharCode,$e=Object.assign;function Ee(e){return e.trim()}function Oe(e,t,n){return e.replace(t,n)}function Ie(e,t){return e.indexOf(t)}function Be(e,t){return 0|e.charCodeAt(t)}function Fe(e,t,n){return e.slice(t,n)}function Le(e){return e.length}function Re(e){return e.length}function De(e,t){return t.push(e),e}var ze=1,He=1,Ve=0,Ge=0,We=0,Ue="";function Ke(e,t,n,r,o,a,i){return{value:e,root:t,parent:n,type:r,props:o,children:a,line:ze,column:He,length:i,return:""}}function qe(e,t){return $e(Ke("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ze(){return We=Ge>0?Be(Ue,--Ge):0,He--,10===We&&(He=1,ze--),We}function Ye(){return We=Ge<Ve?Be(Ue,Ge++):0,He++,10===We&&(He=1,ze++),We}function Xe(){return Be(Ue,Ge)}function Je(){return Ge}function Qe(e,t){return Fe(Ue,e,t)}function et(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tt(e){return ze=He=1,Ve=Le(Ue=e),Ge=0,[]}function nt(e){return Ue="",e}function rt(e){return Ee(Qe(Ge-1,it(91===e?e+2:40===e?e+1:e)))}function ot(e){for(;(We=Xe())&&We<33;)Ye();return et(e)>2||et(We)>3?"":" "}function at(e,t){for(;--t&&Ye()&&!(We<48||We>102||We>57&&We<65||We>70&&We<97););return Qe(e,Je()+(t<6&&32==Xe()&&32==Ye()))}function it(e){for(;Ye();)switch(We){case e:return Ge;case 34:case 39:34!==e&&39!==e&&it(We);break;case 40:41===e&&it(e);break;case 92:Ye()}return Ge}function st(e,t){for(;Ye()&&e+We!==57&&(e+We!==84||47!==Xe()););return"/*"+Qe(t,Ge-1)+"*"+Me(47===e?e:Ye())}function lt(e){for(;!et(Xe());)Ye();return Qe(e,Ge)}var ct="-ms-",dt="-moz-",pt="-webkit-",ut="comm",ft="rule",mt="decl",ht="@keyframes";function gt(e,t){for(var n="",r=Re(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function xt(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case mt:return e.return=e.return||e.value;case ut:return"";case ht:return e.return=e.value+"{"+gt(e.children,r)+"}";case ft:e.value=e.props.join(",")}return Le(n=gt(e.children,r))?e.return=e.value+"{"+n+"}":""}function _t(e){return nt(bt("",null,null,null,[""],e=tt(e),0,[0],e))}function bt(e,t,n,r,o,a,i,s,l){for(var c=0,d=0,p=i,u=0,f=0,m=0,h=1,g=1,x=1,_=0,b="",y=o,v=a,j=r,w=b;g;)switch(m=_,_=Ye()){case 40:if(108!=m&&58==Be(w,p-1)){-1!=Ie(w+=Oe(rt(_),"&","&\f"),"&\f")&&(x=-1);break}case 34:case 39:case 91:w+=rt(_);break;case 9:case 10:case 13:case 32:w+=ot(m);break;case 92:w+=at(Je()-1,7);continue;case 47:switch(Xe()){case 42:case 47:De(vt(st(Ye(),Je()),t,n),l);break;default:w+="/"}break;case 123*h:s[c++]=Le(w)*x;case 125*h:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+d:-1==x&&(w=Oe(w,/\f/g,"")),f>0&&Le(w)-p&&De(f>32?jt(w+";",r,n,p-1):jt(Oe(w," ","")+";",r,n,p-2),l);break;case 59:w+=";";default:if(De(j=yt(w,t,n,c,d,o,s,b,y=[],v=[],p),a),123===_)if(0===d)bt(w,t,j,j,y,a,p,s,v);else switch(99===u&&110===Be(w,3)?100:u){case 100:case 108:case 109:case 115:bt(e,j,j,r&&De(yt(e,j,j,0,0,o,s,b,o,y=[],p),v),o,v,p,s,r?y:v);break;default:bt(w,j,j,j,[""],v,0,s,v)}}c=d=f=0,h=x=1,b=w="",p=i;break;case 58:p=1+Le(w),f=m;default:if(h<1)if(123==_)--h;else if(125==_&&0==h++&&125==Ze())continue;switch(w+=Me(_),_*h){case 38:x=d>0?1:(w+="\f",-1);break;case 44:s[c++]=(Le(w)-1)*x,x=1;break;case 64:45===Xe()&&(w+=rt(Ye())),u=Xe(),d=p=Le(b=w+=lt(Je())),_++;break;case 45:45===m&&2==Le(w)&&(h=0)}}return a}function yt(e,t,n,r,o,a,i,s,l,c,d){for(var p=o-1,u=0===o?a:[""],f=Re(u),m=0,h=0,g=0;m<r;++m)for(var x=0,_=Fe(e,p+1,p=Ne(h=i[m])),b=e;x<f;++x)(b=Ee(h>0?u[x]+" "+_:Oe(_,/&\f/g,u[x])))&&(l[g++]=b);return Ke(e,t,n,0===o?ft:s,l,c,d)}function vt(e,t,n){return Ke(e,t,n,ut,Me(We),Fe(e,2,-2),0)}function jt(e,t,n,r){return Ke(e,t,n,mt,Fe(e,0,r),Fe(e,r+1,-1),r)}var wt=function(e,t,n){for(var r=0,o=0;r=o,o=Xe(),38===r&&12===o&&(t[n]=1),!et(o);)Ye();return Qe(e,Ge)},Ct=new WeakMap,kt=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Ct.get(n))&&!r){Ct.set(e,!0);for(var o=[],a=function(e,t){return nt(function(e,t){var n=-1,r=44;do{switch(et(r)){case 0:38===r&&12===Xe()&&(t[n]=1),e[n]+=wt(Ge-1,t,n);break;case 2:e[n]+=rt(r);break;case 4:if(44===r){e[++n]=58===Xe()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=Me(r)}}while(r=Ye());return e}(tt(e),t))}(t,o),i=n.props,s=0,l=0;s<a.length;s++)for(var c=0;c<i.length;c++,l++)e.props[l]=o[s]?a[s].replace(/&\f/g,i[c]):i[c]+" "+a[s]}}},St=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Tt(e,t){switch(function(e,t){return 45^Be(e,0)?(((t<<2^Be(e,0))<<2^Be(e,1))<<2^Be(e,2))<<2^Be(e,3):0}(e,t)){case 5103:return pt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return pt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return pt+e+dt+e+ct+e+e;case 6828:case 4268:return pt+e+ct+e+e;case 6165:return pt+e+ct+"flex-"+e+e;case 5187:return pt+e+Oe(e,/(\w+).+(:[^]+)/,pt+"box-$1$2"+ct+"flex-$1$2")+e;case 5443:return pt+e+ct+"flex-item-"+Oe(e,/flex-|-self/,"")+e;case 4675:return pt+e+ct+"flex-line-pack"+Oe(e,/align-content|flex-|-self/,"")+e;case 5548:return pt+e+ct+Oe(e,"shrink","negative")+e;case 5292:return pt+e+ct+Oe(e,"basis","preferred-size")+e;case 6060:return pt+"box-"+Oe(e,"-grow","")+pt+e+ct+Oe(e,"grow","positive")+e;case 4554:return pt+Oe(e,/([^-])(transform)/g,"$1"+pt+"$2")+e;case 6187:return Oe(Oe(Oe(e,/(zoom-|grab)/,pt+"$1"),/(image-set)/,pt+"$1"),e,"")+e;case 5495:case 3959:return Oe(e,/(image-set\([^]*)/,pt+"$1$`$1");case 4968:return Oe(Oe(e,/(.+:)(flex-)?(.*)/,pt+"box-pack:$3"+ct+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+pt+e+e;case 4095:case 3583:case 4068:case 2532:return Oe(e,/(.+)-inline(.+)/,pt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Le(e)-1-t>6)switch(Be(e,t+1)){case 109:if(45!==Be(e,t+4))break;case 102:return Oe(e,/(.+:)(.+)-([^]+)/,"$1"+pt+"$2-$3$1"+dt+(108==Be(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ie(e,"stretch")?Tt(Oe(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Be(e,t+1))break;case 6444:switch(Be(e,Le(e)-3-(~Ie(e,"!important")&&10))){case 107:return Oe(e,":",":"+pt)+e;case 101:return Oe(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+pt+(45===Be(e,14)?"inline-":"")+"box$3$1"+pt+"$2$3$1"+ct+"$2box$3")+e}break;case 5936:switch(Be(e,t+11)){case 114:return pt+e+ct+Oe(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return pt+e+ct+Oe(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return pt+e+ct+Oe(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return pt+e+ct+e+e}return e}var At=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case mt:e.return=Tt(e.value,e.length);break;case ht:return gt([qe(e,{value:Oe(e.value,"@","@"+pt)})],r);case ft:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return gt([qe(e,{props:[Oe(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return gt([qe(e,{props:[Oe(t,/:(plac\w+)/,":"+pt+"input-$1")]}),qe(e,{props:[Oe(t,/:(plac\w+)/,":-moz-$1")]}),qe(e,{props:[Oe(t,/:(plac\w+)/,ct+"input-$1")]})],r)}return""}))}}],Pt=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,o,a=e.stylisPlugins||At,i={},s=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)i[t[n]]=!0;s.push(e)}));var l,c,d,p,u=[xt,(p=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&p(e)})],f=(c=[kt,St].concat(a,u),d=Re(c),function(e,t,n,r){for(var o="",a=0;a<d;a++)o+=c[a](e,t,n,r)||"";return o});o=function(e,t,n,r){l=n,gt(_t(e?e+"{"+t.styles+"}":t.styles),f),r&&(m.inserted[t.name]=!0)};var m={key:t,sheet:new Pe({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:o};return m.sheet.hydrate(s),m},Nt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Mt(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var $t=/[A-Z]|^ms/g,Et=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ot=function(e){return 45===e.charCodeAt(1)},It=function(e){return null!=e&&"boolean"!=typeof e},Bt=Mt((function(e){return Ot(e)?e:e.replace($t,"-$&").toLowerCase()})),Ft=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Et,(function(e,t,n){return Rt={name:t,styles:n,next:Rt},t}))}return 1===Nt[e]||Ot(e)||"number"!=typeof t||0===t?t:t+"px"};function Lt(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var o=n;if(1===o.anim)return Rt={name:o.name,styles:o.styles,next:Rt},o.name;var a=n;if(void 0!==a.styles){var i=a.next;if(void 0!==i)for(;void 0!==i;)Rt={name:i.name,styles:i.styles,next:Rt},i=i.next;return a.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Lt(e,t,n[o])+";";else for(var a in n){var i=n[a];if("object"!=typeof i){var s=i;null!=t&&void 0!==t[s]?r+=a+"{"+t[s]+"}":It(s)&&(r+=Bt(a)+":"+Ft(a,s)+";")}else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var l=Lt(e,t,i);switch(a){case"animation":case"animationName":r+=Bt(a)+":"+l+";";break;default:r+=a+"{"+l+"}"}}else for(var c=0;c<i.length;c++)It(i[c])&&(r+=Bt(a)+":"+Ft(a,i[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var s=Rt,l=n(e);return Rt=s,Lt(e,t,l)}}var c=n;if(null==t)return c;var d=t[c];return void 0!==d?d:c}var Rt,Dt=/label:\s*([^\s;{]+)\s*(;|$)/g,zt=!!a.useInsertionEffect&&a.useInsertionEffect,Ht=zt||function(e){return e()},Vt=(zt||a.useLayoutEffect,a.createContext("undefined"!=typeof HTMLElement?Pt({key:"css"}):null)),Gt=(Vt.Provider,function(e){return(0,a.forwardRef)((function(t,n){var r=(0,a.useContext)(Vt);return e(t,r,n)}))}),Wt=a.createContext({}),Ut=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Kt=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,qt=Mt((function(e){return Kt.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Zt=function(e){return"theme"!==e},Yt=function(e){return"string"==typeof e&&e.charCodeAt(0)>96?qt:Zt},Xt=function(e,t,n){var r;if(t){var o=t.shouldForwardProp;r=e.__emotion_forwardProp&&o?function(t){return e.__emotion_forwardProp(t)&&o(t)}:o}return"function"!=typeof r&&n&&(r=e.__emotion_forwardProp),r},Jt=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Ut(t,n,r),Ht((function(){return function(e,t,n){Ut(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0),o=o.next}while(void 0!==o)}}(t,n,r)})),null},Qt=function e(t,n){var r,o,i=t.__emotion_real===t,s=i&&t.__emotion_base||t;void 0!==n&&(r=n.label,o=n.target);var l=Xt(t,n,i),c=l||Yt(s),d=!c("as");return function(){var p=arguments,u=i&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&u.push("label:"+r+";"),null==p[0]||void 0===p[0].raw)u.push.apply(u,p);else{var f=p[0];u.push(f[0]);for(var m=p.length,h=1;h<m;h++)u.push(p[h],f[h])}var g=Gt((function(e,t,n){var r,i,p,f,m=d&&e.as||s,h="",g=[],x=e;if(null==e.theme){for(var _ in x={},e)x[_]=e[_];x.theme=a.useContext(Wt)}"string"==typeof e.className?(r=t.registered,i=g,p=e.className,f="",p.split(" ").forEach((function(e){void 0!==r[e]?i.push(r[e]+";"):e&&(f+=e+" ")})),h=f):null!=e.className&&(h=e.className+" ");var b=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Rt=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,o+=Lt(n,t,a)):o+=a[0];for(var i=1;i<e.length;i++)o+=Lt(n,t,e[i]),r&&(o+=a[i]);Dt.lastIndex=0;for(var s,l="";null!==(s=Dt.exec(o));)l+="-"+s[1];var c=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(o)+l;return{name:c,styles:o,next:Rt}}(u.concat(g),t.registered,x);h+=t.key+"-"+b.name,void 0!==o&&(h+=" "+o);var y=d&&void 0===l?Yt(m):c,v={};for(var j in e)d&&"as"===j||y(j)&&(v[j]=e[j]);return v.className=h,n&&(v.ref=n),a.createElement(a.Fragment,null,a.createElement(Jt,{cache:t,serialized:b,isStringTag:"string"==typeof m}),a.createElement(m,v))}));return g.displayName=void 0!==r?r:"Styled("+("string"==typeof s?s:s.displayName||s.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=u,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+o}}),g.withComponent=function(t,r){return e(t,Ae({},n,r,{shouldForwardProp:Xt(g,r,!0)})).apply(void 0,u)},g}}.bind(null);function en(e){return(t,n)=>{const r={...t};return"COMMIT"!==n.type&&"PRESS_UP"!==n.type&&"PRESS_DOWN"!==n.type||void 0!==r.value&&(r.value=r.value.toString().padStart(e,"0")),r}}["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Qt[e]=Qt(e)}));const tn=Qt.div`
	text-decoration: underline dotted;
`,nn=()=>{const{timezone:e}=(0,Ce.getSettings)(),t=(new Date).getTimezoneOffset()/60*-1;if(Number(e.offset)===t)return null;const n=Number(e.offset)>=0?"+":"",r=""!==e.abbr&&isNaN(Number(e.abbr))?e.abbr:`UTC${n}${e.offset}`,o=e.string.replace("_"," "),a="UTC"===e.string?(0,v.__)("Coordinated Universal Time"):`(${r}) ${o}`;return 0===o.trim().length?(0,p.jsx)(tn,{className:"components-datetime__timezone",children:r}):(0,p.jsx)(d.Tooltip,{placement:"top",text:a,children:(0,p.jsx)(tn,{className:"components-datetime__timezone",children:r})})},rn=Qt.span`
	border-top: 1px solid #757575;
	border-bottom: 1px solid #757575;
	display: inline-flex;
    align-items: center;
`,on=Qt(d.__experimentalNumberControl)`
	width: 36px;

	&&& .components-input-control__input {
		padding-right: 0;
		padding-left: 8px;
		text-align: center;
	}

	&&& .components-input-control__backdrop {
		border-right: 0;
		border-top-right-radius: 0;
		border-bottom-right-radius: 0;
	}
`,an=Qt(d.__experimentalNumberControl)`
	width: 36px;

	&&& .components-input-control__input {
		padding-left: 0;
		text-align: center;
		padding-left: 8px;
	}

	&&& .components-input-control__backdrop {
		border-left: 0;
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
	}
`,sn=Qt.div`
	direction: ltr;
	display: flex;
`,ln=({value:e,onChange:t,...n})=>{const{baseControlProps:r,controlProps:o}=(0,d.useBaseControlProps)(n),i=e?e.split(":"):["07","00"],[s,l]=(0,a.useState)(i[0]),[c,u]=(0,a.useState)(i[1]),f=(e,t="00")=>(e=Number(e),isNaN(e)?t:e<10?`0${e}`:e),m=`${f(s)}:${f(c)}`;return(0,a.useEffect)((()=>{e!==m&&t(m)}),[m]),(0,p.jsx)(d.BaseControl,{...r,children:(0,p.jsxs)(d.__experimentalHStack,{children:[(0,p.jsxs)(sn,{children:[(0,p.jsx)(on,{value:f(s),onChange:l,min:0,max:23,step:1,...o,label:(0,v.__)("Hours"),spinControls:"none",isDragEnabled:!1,isShiftStepEnabled:!1,isPressEnterToChange:!0,hideLabelFromVision:!0,__next40pxDefaultSize:!0,__unstableStateReducer:en(2)}),(0,p.jsx)(rn,{"aria-hidden":"true",children:":"}),(0,p.jsx)(an,{value:f(c),onChange:u,min:0,max:59,step:1,label:(0,v.__)("Minutes"),spinControls:"none",isDragEnabled:!1,isShiftStepEnabled:!1,isPressEnterToChange:!0,hideLabelFromVision:!0,__next40pxDefaultSize:!0,__unstableStateReducer:en(2)})]}),(0,p.jsx)(nn,{})]})})},cn=[{label:(0,v.__)("Only run if","newsletter-optin-box"),value:"allow"},{label:(0,v.__)("Do not run if","newsletter-optin-box"),value:"prevent"}],dn=[{label:(0,v.__)("all","newsletter-optin-box"),value:"all"},{label:(0,v.__)("any","newsletter-optin-box"),value:"any"}];function pn(e,t){return(0,a.useMemo)((()=>[{label:t,value:"",disabled:!0},...e]),[e,t])}function un({type:e,action:t,ruleCount:n,setConditionalLogicAttribute:r}){const o=n>1;return(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",wrap:!0,children:[(0,p.jsx)(d.SelectControl,{label:(0,v.__)("If","newsletter-optin-box"),hideLabelFromVision:!0,value:t||"allow",options:cn,onChange:e=>r("action",e),size:"default",__nextHasNoMarginBottom:!0}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.SelectControl,{label:(0,v.__)("all","newsletter-optin-box"),hideLabelFromVision:!0,value:e||"all",options:dn,onChange:e=>r("type",e),size:"default",__nextHasNoMarginBottom:!0}),(0,p.jsx)(d.__experimentalText,{children:(0,v.__)("of the following rules are true:","newsletter-optin-box")})]})]})}function fn({rule:e,comparisons:t,availableSmartTags:n,mergeTagsArray:r,index:o,updateRule:i,removeRule:s}){var l;const c=e=>i(o,{value:e}),u=null!==(l=e.full)&&void 0!==l?l:e.type?`[[${e.type}]]`:"",f=u.indexOf("]]"),m=u.indexOf("[[",f),h=-1===f||-1!==m&&m>f,g=e=>{const t={full:e};if(e){const n=e.match(/\[\[([^\s\]]+)/)?.[1]||"";n&&(t.type=n.replace("[[","").replace("]]",""))}i(o,t)},x=Mn({availableSmartTags:r,onMergeTagClick:e=>{g(u?`${u} ${e}`.trim():e)}}),_=Mn({availableSmartTags:r,onMergeTagClick:t=>{c(e.value?`${e.value} ${t}`.trim():t)}}),b=(0,a.useMemo)((()=>{const t=e.type;if(void 0!==n[t])return n[t];const r=t.replace("_",".",1);if(void 0!==n[r])return n[r];for(const[e,r]of Object.entries(n)){if(-1!==e.indexOf(".")&&e.split(".").slice(1).join(".")===t)return r;const n=e=>Array.isArray(e)?e:e.split(/[\s,]+/);if(r.deprecated&&n(r.deprecated).includes(t))return r}return null}),[e.type,n]),y=pn((j=b?.options,(0,a.useMemo)((()=>j?Array.isArray(j)?j.map(((e,t)=>({label:e,value:t}))):Object.keys(j).map((e=>({label:j[e],value:e}))):[]),[j])),(0,v.__)("Select a value","newsletter-optin-box"));var j;const w=!h&&y.length>1,C=h?"string":b?.conditional_logic||"string",k=pn((0,a.useMemo)((()=>{const e=[];return Object.keys(t).forEach((n=>{let r=t[n].type;if(w){if("string"===C&&"is"!=n&&"is_not"!=n)return;if("is_empty"===n||"is_not_empty"===n||"is_between"===n)return}"any"!==r&&r!=C||e.push({label:t[n].name,value:n})})),e}),[C,t]),(0,v.__)("Select a comparison","newsletter-optin-box")),S="is_empty"===e.condition||"is_not_empty"===e.condition;return(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",wrap:!0,expanded:!0,children:[(0,p.jsx)("div",{style:{minWidth:320},children:(0,p.jsx)(d.__experimentalInputControl,{type:"text",label:(0,v.__)("Smart Tag","newsletter-optin-box"),hideLabelFromVision:!0,placeholder:(0,v.__)("Enter a smart tag","newsletter-optin-box"),value:u,onChange:g,autoComplete:"off",suffix:x,__next40pxDefaultSize:!0})}),(0,p.jsx)("div",{style:{width:150},children:(0,p.jsx)(d.SelectControl,{label:(0,v.__)("Comparison","newsletter-optin-box"),hideLabelFromVision:!0,value:e.condition?e.condition:"is",options:k,onChange:e=>i(o,{condition:e}),size:"default",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}),!S&&(0,p.jsxs)("div",{style:{minWidth:320},children:[w&&(0,p.jsx)(d.SelectControl,{label:(0,v.__)("Value","newsletter-optin-box"),hideLabelFromVision:!0,value:e.value?e.value:"",options:y,onChange:c,size:"default",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),!w&&(0,p.jsx)(d.__experimentalInputControl,{type:"number"===C?"number":"text",label:(0,v.__)("Value","newsletter-optin-box"),placeholder:(0,v.__)("Enter a value","newsletter-optin-box"),hideLabelFromVision:!0,value:e.value?e.value:"",onChange:c,suffix:_,__next40pxDefaultSize:!0})]}),(0,p.jsx)(d.Button,{onClick:()=>s(o),icon:"trash",variant:"tertiary",isDestructive:!0})]})}function mn({rules:e,comparisons:t,availableSmartTags:n,setConditionalLogicAttribute:r,disableTags:o,disableProps:i,closeModal:s}){const l=(0,a.useMemo)((()=>Array.isArray(e)?e.filter((e=>e.type&&""!==e.type)):[]),[e]),c=(0,a.useMemo)((()=>{const e={};return n.forEach((t=>{t.conditional_logic&&(e[t.smart_tag]={...t,key:t.smart_tag,type:t.conditional_logic,isPremium:Array.isArray(o)&&o.some((e=>t.smart_tag.startsWith(e)))||Array.isArray(i)&&i.some((e=>!!t[e]))})})),e}),[n]),u=(0,a.useCallback)((e=>{const t=[...l];t.splice(e,1),r("rules",t)}),[l,r]),f=(0,a.useCallback)(((e,t)=>{const n=[...l];n[e]={...n[e],...t},r("rules",n)}),[l,r]),m=(0,a.useMemo)((()=>Object.values(c)),[c]),h=(0,a.useCallback)(((e,t)=>{const n=c[e],o=n?.options||[],a=n?.placeholder||"";let i=Array.isArray(o)&&o.length?Object.keys(o)[0]:a;n?.default&&(i=n.default);const s=[...l];s.push({type:e,condition:"is",full:t,value:i}),r("rules",s)}),[l]),g=0===l.length?(0,v.__)("Add a conditional logic rule","newsletter-optin-box"):(0,v.__)("Add another rule","newsletter-optin-box"),x=Mn({availableSmartTags:m,onMergeTagClick:h,raw:!0,icon:"plus",label:g,text:g,toggleProps:{variant:"primary"}});return(0,p.jsxs)(p.Fragment,{children:[l.map(((e,n)=>(0,p.jsx)(fn,{rule:e,index:n,updateRule:f,removeRule:u,comparisons:t,availableSmartTags:c,mergeTagsArray:m},n))),(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",wrap:!0,children:[x,s&&(0,p.jsx)(d.Button,{onClick:s,variant:"secondary",children:(0,v.__)("Return to editor","newsletter-optin-box")})]})]})}function hn({onChange:e,value:t,comparisons:n,toggleText:r,availableSmartTags:o,className:i,inModal:s=!1,...l}){const[c,u]=(0,a.useState)(!1),f=(0,a.useMemo)((()=>"object"!=typeof t?{enabled:!1,action:"allow",rules:[],type:"all"}:t),[t]),m=(0,a.useCallback)(((t,n)=>{e({...f,[t]:n})}),[e,f]),h=(0,p.jsxs)(d.__experimentalVStack,{spacing:5,children:[(0,p.jsx)(un,{ruleCount:Array.isArray(f.rules)?f.rules.length:0,type:f.type,action:f.action,setConditionalLogicAttribute:m}),(0,p.jsx)(mn,{rules:f.rules,comparisons:n,availableSmartTags:o,setConditionalLogicAttribute:m,closeModal:s&&(()=>u(!1)),...l})]});return(0,p.jsxs)(d.__experimentalVStack,{spacing:5,className:i,children:[(0,p.jsx)(d.ToggleControl,{checked:!!f.enabled,onChange:e=>m("enabled",e),label:r||(0,v.__)("Optionally enable/disable this trigger depending on specific conditions.","newsletter-optin-box"),__nextHasNoMarginBottom:!0}),f.enabled&&(0,p.jsx)(p.Fragment,{children:s?(0,p.jsxs)(p.Fragment,{children:[c&&(0,p.jsx)(d.Modal,{title:(0,v.__)("Conditional Logic","newsletter-optin-box"),onRequestClose:()=>u(!1),isFullScreen:!0,children:h}),(0,p.jsx)(d.Button,{variant:"secondary",className:"noptin-block-button",onClick:()=>u(!0),children:(0,v.__)("Edit Conditional Logic","newsletter-optin-box")})]}):(0,p.jsx)(p.Fragment,{children:h})})]})}const gn={"==":(e,t)=>e==t,"===":(e,t)=>e===t,"!=":(e,t)=>e!=t,"!==":(e,t)=>e!==t,">":(e,t)=>e>t,">=":(e,t)=>e>=t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,includes:(e,t)=>e.includes(t),"!includes":(e,t)=>!e.includes(t),"^includes":(e,t)=>t.includes(e),"^!includes":(e,t)=>!t.includes(e),empty:(e,t)=>!t,"!empty":(e,t)=>t},xn=(e,t,n)=>!!gn[t]&&gn[t](e,"boolean"==typeof e&&void 0===n?Boolean(n):n);function bn(e){return(0,a.useMemo)((()=>{if(!Array.isArray(e))return{};const t={};return e.forEach((e=>{const n=e.group?e.group:(0,v.__)("General","newsletter-optin-box");Array.isArray(t[n])||(t[n]=[]),t[n].push(e)})),t}),[e])}const yn=["number","search","email","password","tel","url","date"];function vn({setting:e,availableSmartTags:t,isPressEnterToChange:n,...r}){void 0===n&&(n=!0);const o=Mn({availableSmartTags:t,onMergeTagClick:(0,a.useCallback)((e=>{r.onChange&&r.onChange(r.value?`${r.value} ${e}`.trim():e)}),[r.value,r.onChange])});return"string"==typeof r.suffix||r.suffix instanceof String?r.suffix=(0,p.jsx)(d.__experimentalInputControlSuffixWrapper,{children:r.suffix}):e.disabled||!o||r.suffix||(r.suffix=o),"datetime-local"===e.type&&(r.suffix=(0,p.jsx)(d.__experimentalInputControlSuffixWrapper,{children:(0,p.jsx)(d.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:e,onToggle:t})=>(0,p.jsx)(d.Button,{onClick:t,"aria-expanded":e,icon:be}),renderContent:()=>(0,p.jsx)(d.DateTimePicker,{currentDate:r.value,onChange:e=>{e&&(e=(0,Ce.format)("c",e)),r.onChange(e||"")}})})})),e.disabled&&(r.readOnly=!0,r.onFocus=e=>e.target.select(),e.value&&(r.value=e.value)),("string"==typeof r.prefix||r.prefix instanceof String)&&(r.prefix=(0,p.jsx)(d.__experimentalInputControlPrefixWrapper,{children:r.prefix})),(0,p.jsx)(d.__experimentalInputControl,{...r,type:yn.includes(e.type)?e.type:"text",placeholder:e.placeholder?e.placeholder:"",isPressEnterToChange:n,__next40pxDefaultSize:!0})}function jn({setting:e,saved:t,settingKey:n,...r}){const[o,i]=(0,a.useState)(!1),[s,l]=(0,a.useState)({}),[c,u]=(0,a.useState)(null),f=(0,a.useMemo)((()=>{if(!e.rest_route)return"";const n=Object.entries(e.rest_args||{}).reduce(((e,[n,r])=>(e[n]="string"==typeof r&&r.startsWith("!")?Ln(t,r.slice(1)):r,e)),{});return(0,Te.addQueryArgs)(e.rest_route,n)}),[e.rest_route,e.rest_args,t]);return(0,a.useEffect)((()=>{f&&(i(!0),u(null),Se()({path:f}).then((e=>{l(e)})).catch((e=>{l({}),u(e.message||"An error occurred while fetching settings."),console.error(e)})).finally((()=>{i(!1)})))}),[f]),f?o?(0,p.jsx)(d.Spinner,{}):c?(0,p.jsx)(d.Notice,{status:"error",children:c}):(0,p.jsx)(p.Fragment,{children:Object.keys(s).map((e=>(0,p.jsx)(Dn,{settingKey:e,saved:t,setting:s[e],...r},e)))}):null}function wn({value:e,onChange:t,...n}){const{baseControlProps:r,controlProps:o}=(0,d.useBaseControlProps)({...n});return(0,p.jsx)(d.BaseControl,{...r,children:(0,p.jsx)(d.Dropdown,{popoverProps:{placement:"bottom-start"},renderToggle:({isOpen:t,onToggle:n})=>(0,p.jsx)(d.Button,{onClick:n,"aria-expanded":t,children:(0,p.jsx)(d.ColorIndicator,{colorValue:e})}),renderContent:()=>(0,p.jsx)(d.ColorPicker,{color:e,onChange:t}),...o})})}function Cn({availableSmartTags:e,autoGrow:t=!1,label:n,id:r,setting:o,...i}){const s=Mn({availableSmartTags:e,onMergeTagClick:(0,a.useCallback)((e=>{i.onChange&&i.onChange(i.value?`${i.value} ${e}`.trim():e)}),[i.value,i.onChange]),toggleProps:{size:"small"}}),l=!o.disabled&&s?(0,p.jsxs)(d.__experimentalHStack,{children:[(0,p.jsx)("span",{children:n}),s]}):n,c=r||(0,j.useInstanceId)(Cn,"noptin-textarea");return(0,a.useEffect)((()=>{if(t){const e=document.getElementById(c);e&&(e.style.height="auto",e.style.height=`${e.scrollHeight}px`)}}),[i.value,t,c]),o.disabled&&(i.readOnly=!0,i.onFocus=e=>e.target.select(),o.value&&(i.value=o.value)),(0,p.jsx)(d.TextareaControl,{...i,id:c,label:l,__nextHasNoMarginBottom:!0})}function kn({options:e,...t}){return(0,p.jsx)(d.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isBlock:!0,...t,children:e.map(((e,t)=>(0,p.jsx)(d.__experimentalToggleGroupControlOption,{...e},t)))})}const Sn=(e,t)=>{const n=bn(t);return(0,a.useMemo)((()=>{if(!Array.isArray(t))return e;let r=[...e];return Object.keys(n).forEach((e=>{Array.isArray(n[e])&&n[e].length&&(r.push({value:`select_dynamic_value__${e}`,label:`${e} Dynamic Values`,disabled:!0}),n[e].forEach((t=>{r.push({value:`[[${t.smart_tag}]]`,label:t.label,render:t.label,render_filtered:`${e} &gt;&gt; ${t.label}`,search:`${t.label} ${e} ${t.smart_tag} ${t.description}`})})))})),r}),[n,e])};function Tn({options:e,availableSmartTags:t,...n}){const r=Sn(e,t),[o,i]=(0,a.useState)(r),s=o.length!==r.length;return(0,p.jsx)(d.ComboboxControl,{...n,options:o,onFilterValueChange:e=>{i(e?r.filter((t=>!t.disabled&&""!==t.value&&(t.search?t.search.toLowerCase():t.label.toLowerCase()).includes(e.toLowerCase()))):r)},__experimentalRenderItem:({item:e,...t})=>e.render_filtered&&s?(0,p.jsx)("div",{...t,dangerouslySetInnerHTML:{__html:e.render_filtered}}):e.render?"string"==typeof e.render?(0,p.jsx)("div",{...t,dangerouslySetInnerHTML:{__html:e.render}}):e.render:e.label})}function An({options:e,availableSmartTags:t,...n}){const r=Sn(e,t);return(0,p.jsx)(d.SelectControl,{...n,options:r})}function Pn({options:e,value:t,onChange:n,...r}){const o=Array.isArray(t)?t:[],i=(0,a.useMemo)((()=>e.map((e=>e.label))),[e]),s=(0,a.useCallback)((e=>i.includes(e)),[i]),l=(0,a.useMemo)((()=>o.map((t=>{const n=e.find((e=>e.value===t));return n?n.label:t}))),[t,e]),c=(0,a.useCallback)((t=>{const r=new Set;for(const n of t){const t=e.find((e=>e.label===n));t&&r.add(t.value)}n(Array.from(r))}),[n,e]),u=(0,a.useCallback)((t=>{const n=e.find((e=>e.label===t.item));return n&&n.render?(0,p.jsx)(x.RawHTML,{children:n.render}):(0,p.jsx)(p.Fragment,{children:t.item})}),[e]);return(0,p.jsx)(d.FormTokenField,{value:l,suggestions:i,onChange:c,__experimentalShowHowTo:!1,__experimentalExpandOnFocus:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,__experimentalValidateInput:s,__experimentalRenderItem:u,...r})}const Nn=[{id:"key",label:(0,v.__)("Key","noptin-addons-pack"),type:"text"},{id:"value",label:(0,v.__)("Value","noptin-addons-pack"),type:"text"}];function Mn({availableSmartTags:e=[],onMergeTagClick:t=(e,t)=>{},raw:n=!1,icon:r="shortcode",label:o=(0,v.__)("Insert dynamic field","newsletter-optin-box"),...i}){const[s,l]=(0,a.useState)(""),c=bn(e),u=Object.keys(c).length,f=(0,a.useMemo)((()=>{if(!s)return c;const e=s.toLowerCase(),t={};return Object.entries(c).forEach((([n,r])=>{const o=r.filter((t=>t.label.toLowerCase().includes(e)||t.smart_tag.toLowerCase().includes(e)||n.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e)));o.length>0&&(t[n]=o)})),t}),[c,s]),m=Object.keys(f).length>0;let h=null;return u>0&&(h=(0,p.jsx)(d.DropdownMenu,{icon:r,label:o,...i,children:({onClose:e})=>(0,p.jsxs)(d.__experimentalVStack,{children:[(0,p.jsx)(d.SearchControl,{__nextHasNoMarginBottom:!0,value:s,onChange:l}),m&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(d.Tip,{children:[(0,v.__)("Click a field to insert it.","newsletter-optin-box"),"Â ",(0,v.__)("When your automation runs, each field will be replaced with actual data.","newsletter-optin-box")]}),Object.keys(f).map((r=>(0,p.jsx)(d.MenuGroup,{label:u>1?r:void 0,children:f[r].map((r=>{const o=r.isPremium,a=o?`${r.label} - Premium`:r.label;return(0,p.jsx)(d.MenuItem,{icon:o?ye:r.icon||ve,iconPosition:"left",label:"Click to add dynamic value",showTooltip:!0,disabled:o,onClick:()=>{if(o)return;const a=(s=r).example?s.example:s.default?`${s.smart_tag} default="${s.default}"`:`${s.smart_tag}`,i=n?r.smart_tag:`[[${a}]]`;var s;t?.(i,`[[${a}]]`),e()},children:(0,p.jsx)(x.RawHTML,{children:a})},r.smart_tag)}))},r)))]}),!m&&(0,p.jsx)(d.MenuGroup,{children:(0,p.jsx)(d.MenuItem,{disabled:!0,children:(0,v.__)("No matching items found","newsletter-optin-box")})})]})})),h}function $n({availableSmartTags:e,value:t,onChange:n,button:r,fields:o,openModal:i,prepend:s,disable:l,disabled:c,onDisable:u,cardProps:f,repeaterKey:m,id:h,defaultItem:g,...x}){const[_,b]=(0,a.useState)(!1),y=Array.isArray(t)?t:[],w=h||(0,j.useInstanceId)($n,"noptin-repeater"),{baseControlProps:C,controlProps:k}=(0,d.useBaseControlProps)({...x,id:w}),S=g||{};if(m?.newOnly&&(S.new=!0),!o)return console.warn("No fields provided to repeater control."),null;Object.keys(o).forEach((e=>{void 0!==o[e].default&&(S[e]=o[e].default)}));const T=!!i,A=(e,t)=>e.key?e.key:m?.to&&Ln(e,m.to)?Ln(e,m.to):t,P=(0,p.jsxs)(d.__experimentalVStack,{children:[s,y.map(((t,r)=>(0,a.createElement)(d.Card,{size:"small",className:"noptin-no-shadow",id:`${w}__item-${A(t,r)}`,"data-index":r,borderBottom:!0,borderLeft:!0,borderRight:!0,borderTop:!0,...f||{},key:A(t,r)},(0,p.jsx)(En,{id:`${w}__item-${A(t,r)}`,fields:o,value:t,availableSmartTags:e,onChange:e=>{let t={...e};if(m?.to&&m.from&&Ln(t,m.from)&&(!m.newOnly||t.new)){const e=Ln(t,m.from).toString().trim().toLowerCase().replace(/[^a-z0-9]+/g,"_");t=Rn(t,m.to,e.substring(0,m.maxLength||64)),y.find(((e,n)=>r!==n&&Ln(e,m.to)===Ln(t,m.to)))&&(t=Rn(t,m.to,`${Ln(t,m.to)}_${r}`))}const o=[...y];o[r]=t,n(o)},onDelete:()=>{const e=[...y];e.splice(r,1),n(e)},onMoveUp:r>0?()=>{const e=[...y],t=e[r];e.splice(r,1),e.splice(r-1,0,t),n(e)}:null,onMoveDown:r<y.length-1?()=>{const e=[...y],t=e[r];e.splice(r,1),e.splice(r+1,0,t),n(e)}:null,repeaterKey:m})))),(0,p.jsxs)(d.__experimentalHStack,{children:[(0,p.jsx)(d.Button,{onClick:()=>{const e=[...y],t=Date.now().toString(36),r=Math.random().toString(36).substring(2,8);e.push({key:`${t}_${r}`,...S}),n(e)},variant:"primary",children:r||(0,v.__)("Add Item","newsletter-optin-box")}),T&&(0,p.jsx)(d.Button,{onClick:()=>b(!1),variant:"secondary",children:(0,v.__)("Go Back","newsletter-optin-box")})]})]}),N=!l||!c;return(0,p.jsx)(d.BaseControl,{...C,children:(0,p.jsxs)("div",{...k,children:[T&&(0,p.jsxs)(d.__experimentalVStack,{children:[l&&(0,p.jsx)(d.ToggleControl,{label:l,checked:c,onChange:e=>{u&&u(e)},__nextHasNoMarginBottom:!0}),N&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Button,{onClick:()=>b(!0),variant:"secondary",children:i||(0,v.__)("Set Items","newsletter-optin-box")}),_&&(0,p.jsx)(d.Modal,{title:x.label||i||(0,v.__)("Set Items","newsletter-optin-box"),onRequestClose:()=>b(!1),size:"medium",children:P})]})]}),!T&&P]})})}function En({fields:e,availableSmartTags:t,value:n,onChange:r,repeaterKey:o,onDelete:i,onMoveUp:s,onMoveDown:l,id:c}){const[u,f]=(0,a.useState)(!o?.from),m=(0,a.useCallback)((()=>{f(!u)}),[u]),h=!u&&o?.from;let g=null;if(o){const e=!1!==o.display&&o.to&&n?.[o.to]?(0,p.jsx)("code",{children:(0,v.sprintf)(o.display||"%s",n?.[o.to])}):null,t={paddingLeft:16,paddingRight:16,height:48},r=Ln(n,o.from)||Ln(n,o.fallback);g=(0,p.jsx)(d.CardHeader,{style:{padding:0},children:(0,p.jsxs)(d.Flex,{as:d.Button,onClick:m,style:t,"aria-controls":`${c}__body`,"aria-expanded":!h,type:"button",children:[(0,p.jsx)(d.__experimentalHStack,{as:d.FlexBlock,children:(0,p.jsx)(d.__experimentalText,{weight:600,children:r||(0,v.__)("(new)","newsletter-optin-box")})}),(0,p.jsx)(d.FlexItem,{children:(0,p.jsxs)(d.__experimentalHStack,{children:[e,(0,p.jsx)(d.Icon,{icon:u?"arrow-up-alt2":"arrow-down-alt2"})]})})]})})}return(0,p.jsxs)(p.Fragment,{children:[g,!h&&(0,p.jsx)(d.CardBody,{id:`${c}__body`,hidden:h,children:(0,p.jsxs)(d.__experimentalVStack,{children:[Object.keys(e).map((o=>(0,p.jsx)(Dn,{settingKey:o,availableSmartTags:t,setting:e[o],saved:n,setAttributes:e=>{r({...n,...e})}},o))),(0,p.jsxs)(d.__experimentalHStack,{className:"noptin-repeater-item__actions",justify:"flex-start",children:[!n?.predefined&&(0,p.jsx)(d.Button,{variant:"link",onClick:i,text:(0,v.__)("Remove Item","newsletter-optin-box"),isDestructive:!0}),s&&(0,p.jsx)(d.Button,{onClick:s,icon:"arrow-up-alt",text:(0,v.__)("Move Up","newsletter-optin-box"),size:"small",iconSize:16}),l&&(0,p.jsx)(d.Button,{onClick:l,icon:"arrow-down-alt",text:(0,v.__)("Move Down","newsletter-optin-box"),size:"small",iconSize:16})]})]})})]})}function On({setting:e,availableSmartTags:t,value:n,onChange:r,...o}){const{baseControlProps:i,controlProps:s}=(0,d.useBaseControlProps)(o);Array.isArray(n)||(n=[]);const l=(0,a.useCallback)((({item:e,index:o})=>(0,p.jsxs)(d.Flex,{className:"noptin-repeater-item",wrap:!0,children:[Nn.map(((a,i)=>(0,p.jsx)(In,{availableSmartTags:t,field:a,value:void 0===e[a.id]?"":e[a.id],onChange:e=>{const t=[...n];t[o][a.id]=e,r(t)}},i))),(0,p.jsx)(d.FlexItem,{children:(0,p.jsx)(d.Button,{icon:"trash",variant:"tertiary",className:"noptin-component__field",label:(0,v.__)("Delete","noptin-addons-pack"),showTooltip:!0,onClick:()=>{const e=[...n];e.splice(o,1),r(e)},isDestructive:!0})})]})),[n,r]);return(0,p.jsx)(d.BaseControl,{...i,children:(0,p.jsxs)("div",{...s,children:[n.map(((e,t)=>(0,p.jsx)(l,{item:e,index:t},t))),(0,p.jsx)(d.Button,{onClick:()=>{const e=[...n];e.push({}),r(e)},variant:"secondary",children:e.add_field?e.add_field:(0,v.__)("Add","newsletter-optin-box")})]})})}function In({field:e,availableSmartTags:t,value:n,onChange:r}){const o=Mn({availableSmartTags:t,onMergeTagClick:(0,a.useCallback)((e=>{r&&r(n?`${n} ${e}`.trim():e)}),[n,r])});return(0,p.jsx)(d.FlexBlock,{children:(0,p.jsx)(d.__experimentalInputControl,{label:e.label,type:e.type,value:n,placeholder:(0,v.sprintf)((0,v.__)("Enter %s","noptin-addons-pack"),e.label),className:"noptin-component__field noptin-condition-field",suffix:o,onChange:r,isPressEnterToChange:!0,__next40pxDefaultSize:!0})})}function Bn({setting:e,value:t,options:n,onChange:r,...o}){const{baseControlProps:a,controlProps:i}=(0,d.useBaseControlProps)(o);return Array.isArray(t)||(t=[]),(0,p.jsx)(d.BaseControl,{...a,children:(0,p.jsx)("div",{...i,children:n.map(((e,n)=>(0,p.jsx)(d.CheckboxControl,{label:e.label,checked:t.includes(e.value),onChange:n=>{r(n?[...t,e.value]:t.filter((t=>t!==e.value)))}},n)))})})}function Fn({value:e,onChange:t,id:n,...r}){const{baseControlProps:o,controlProps:i}=(0,d.useBaseControlProps)({...r,id:n,__nextHasNoMarginBottom:!0}),{wp:s,tinymce:l}=window,c=(0,a.useRef)(!1),u=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!c.current)return;const t=t=>{t?.target?.classList?.contains("wp-switch-editor")&&setTimeout((()=>{const t=l?.get(n);t&&(t.setContent(e||""),t._lastChange=e)}),50)};return u.current?.addEventListener("click",t),()=>{u.current?.removeEventListener("click",t)}}),[u.current,e]),(0,a.useEffect)((()=>{if(!c.current)return;const e=l?.get(n);e&&e._lastChange}),[e]),(0,a.useEffect)((()=>{function r(){s.oldEditor.initialize(n,{tinymce:!!window.tinymce&&{content_css:!1,theme_advanced_buttons:"bold,italic,underline,|,bullist,numlist,blockquote,|,link,unlink,|,spellchecker,fullscreen,|,formatselect,styleselect",drag_drop_upload:!0,toolbar1:"formatselect,bold,italic,bullist,numlist,blockquote,alignleft,aligncenter,alignright,link,spellchecker,wp_adv,dfw",toolbar2:"strikethrough,hr,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",min_height:400,wpautop:!1,setup(n){e&&n.on("loadContent",(()=>n.setContent(e))),n.on("blur",(()=>(t(n.getContent()),!1)));const r=(0,j.debounce)((()=>{const e=n.getContent();e!==n._lastChange&&(n._lastChange=e,t(e))}),250);n.on("Paste Change input Undo Redo",r),n.on("remove",r.cancel),n.on("keydown",(e=>{we.isKeyboardEvent.primary(e,"z")&&e.stopPropagation(),we.isKeyboardEvent.primary(e,"s")&&r.flush();const{altKey:t}=e;t&&e.keyCode===we.F10&&e.stopPropagation()})),c.current=!0},...window?.tinyMCEPreInit?.mceInit[n]||{}},mediaButtons:!0,quicktags:{buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,close"}})}function o(){"complete"===document.readyState&&r()}return l?.execCommand("mceRemoveEditor",!0,n),"complete"===document.readyState?r():document.addEventListener("readystatechange",o),()=>{document.removeEventListener("readystatechange",o),s.oldEditor.remove(n)}}),[]),(0,p.jsx)(d.BaseControl,{...o,children:(0,p.jsx)("div",{ref:u,children:(0,p.jsx)("textarea",{...i,className:"wp-editor-area",style:{width:"100%"},value:e,onChange:e=>t(e.target.value),rows:10})})})}const Ln=(e,t)=>{if(!t||0===t.length)return;if("string"==typeof t&&(t=t.split(".")),0===t.length||!e||"object"!=typeof e)return;const[n,...r]=t;return 0===r.length?e[n]:Ln(e[n],r)},Rn=(e,t,n)=>{if(!t||0===t.length)return e;"string"==typeof t&&(t=t.split("."));const[r,...o]=t;return 0===o.length?{...e,[r]:n}:{...e,[r]:Rn(e[r]||{},o,n)}};function Dn({settingKey:e,setting:t,availableSmartTags:n,prop:r,saved:o,setAttributes:i}){const s=(r?`${r}.${e}`:e).split("."),l=t.sanitize?t.sanitize:e=>e,c="trigger_settings"!==r&&!1!==t.can_map&&!1!==t.map_field&&Array.isArray(n)?n:[],u=(0,a.useCallback)((e=>{if(Ln(o,s)===e)return;const n={};t.resetOnChange&&t.resetOnChange.forEach((e=>{const[t,...r]=e.split(".");0===r.length?n[t]="":n[t]=Rn(o[t]||{},r,"")}));const[r,...a]=s;return 0===a.length?n[r]=e:n[r]=Rn(n[r]||o[r]||{},a,e),i(l(n))}),[o,s,i,l]);if(t.if||t.restrict){const e=t.restrict?t.restrict.split("."):t.if.split(".");if(!Ln(o,e))return null}if(Array.isArray(t.conditions)&&!t.conditions.every((e=>{const t=e.key.split("."),n=e.operator?e.operator:"==";return xn(e.value,n,Ln(o,t))})))return null;if(t.condition&&!t.condition(o))return null;if("remote"===t.el)return(0,p.jsx)(jn,{settingKey:e,setting:t,availableSmartTags:n,saved:o,prop:r,setAttributes:i});let f=Ln(o,s);(void 0===f||t.disabled)&&(f=t.default);const m=void 0!==f&&""!==f&&null!==f;let h=[];t.options&&(h=Array.isArray(t.options)&&t.options.length>0&&"string"==typeof t.options[0]?t.options.reduce(((e,t)=>(e.push({label:t,value:t}),e)),[]):Array.isArray(t.options)?[...t.options]:Object.keys(t.options).map((e=>({label:t.options?.[e],value:e}))));const g=`noptin-component__field-${e}`,_="string"==typeof t.description?(0,p.jsx)("span",{dangerouslySetInnerHTML:{__html:t.description}}):t.description,b=t.customAttributes?t.customAttributes:{},y={label:t.label,value:m?f:"",onChange:u,className:g,help:_,...b};if(t.tooltip&&(y.label=(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)("span",{children:t.label}),(0,p.jsx)(d.Tooltip,{delay:0,placement:"top",text:t.tooltip,children:(0,p.jsx)("span",{children:(0,p.jsx)(d.Icon,{icon:"info",style:{color:"#454545"}})})})]})),t.type&&!t.el&&(t.el=t.type,["toggle","switch","checkbox","checkbox_alt","checkbox_real","text","number","email","tel","date","color","image"].includes(t.type)&&(t.el="input")),"button"===t.el)return(0,p.jsx)("div",{children:(0,p.jsx)(d.Button,{...t.buttonProps||{}})});if("toggle_group"===t.el)return(0,p.jsx)(kn,{...y,options:h});if("select"===t.el)return t.multiple?(0,p.jsx)(Pn,{...y,options:h}):(h.find((e=>""===e?.value))||h.unshift({label:t.placeholder?t.placeholder:(0,v.__)("Select an option","newsletter-optin-box"),value:"",disabled:!t.canSelectPlaceholder}),(0,p.jsx)(An,{...y,availableSmartTags:c,options:h,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}));if("combobox"===t.el){const e=h.map((e=>({...e,value:String(e.value)}))),n=0===y.value?"0":y.value?String(y.value):"";return y.value=n,(0,p.jsx)(Tn,{...y,placeholder:t.placeholder?t.placeholder:c.length?(0,v.__)("Select an option or map a dynamic value","newsletter-optin-box"):(0,v.__)("Select an option","newsletter-optin-box"),options:e,allowReset:t.canSelectPlaceholder,availableSmartTags:c,expandOnFocus:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}if("form_token"===t.el||"token"===t.el)return(0,p.jsx)(d.FormTokenField,{...y,value:Array.isArray(y.value)?y.value:[],suggestions:Array.isArray(t.suggestions)?t.suggestions:[],__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,__experimentalShowHowTo:!1,__experimentalExpandOnFocus:!0,tokenizeOnBlur:!0});if("multi_checkbox"===t.el||"multi_checkbox_alt"===t.el)return(0,p.jsx)(Bn,{...y,options:h});if("conditional_logic"===t.el)return(0,p.jsx)(hn,{...y,availableSmartTags:n,comparisons:t.comparisons,toggleText:t.toggle_text,inModal:t.in_modal});if("time"===t.el)return(0,p.jsx)(ln,{...y});if("color"===t.el||"input"===t.el&&"color"===t.type)return(0,p.jsx)(wn,{...y,__nextHasNoMarginBottom:!0});if("unit"===t.el)return(0,p.jsx)(d.__experimentalUnitControl,{labelPosition:"edge",__unstableInputWidth:"80px",__next40pxDefaultSize:!0,isPressEnterToChange:!0,...y});if("input"===t.el){if(t.type&&["toggle","switch","checkbox","checkbox_alt"].includes(t.type))return(0,p.jsx)(d.ToggleControl,{...y,checked:!!m&&f,__nextHasNoMarginBottom:!0});if(t.type&&["checkbox_real"].includes(t.type))return(0,p.jsx)(d.CheckboxControl,{...y,checked:!!m&&f,__nextHasNoMarginBottom:!0});if("number"===t.type){const e=e=>{if(e)return"string"==typeof e||e instanceof String?(0,p.jsx)(d.__experimentalInputControlSuffixWrapper,{children:e}):e},n=e=>{if(e)return"string"==typeof e||e instanceof String?(0,p.jsx)(d.__experimentalInputControlPrefixWrapper,{children:e}):e};return Array.isArray(y.suffix)?y.suffix=e(1===f||"1"===f?y.suffix[0]:y.suffix[1]):y.suffix=e(y.suffix),Array.isArray(y.prefix)?y.prefix=n(1===f||"1"===f?y.prefix[0]:y.prefix[1]):y.prefix=n(y.prefix),(0,p.jsx)(d.__experimentalNumberControl,{...y,placeholder:t.placeholder?t.placeholder:"",__next40pxDefaultSize:!0})}return"image"===t.type&&(y.suffix=(0,p.jsx)(d.Button,{onClick:()=>{var e=window.wp.media({title:(0,v.__)("Upload Image","newsletter-optin-box"),multiple:!1,library:{type:"image"}}).open().on("select",(t=>{let n=e.state().get("selection").first();u(n.toJSON().sizes.full.url)}))},icon:"upload",label:(0,v.__)("Upload Image","newsletter-optin-box"),showTooltip:!0})),(0,p.jsx)(vn,{...y,setting:t,availableSmartTags:c,isPressEnterToChange:!t.isInputToChange})}return"textarea"===t.el?(0,p.jsx)(Cn,{...y,setting:t,placeholder:t.placeholder?t.placeholder:"",availableSmartTags:c}):"tinymce"===t.el?(0,p.jsx)(Fn,{...y}):"paragraph"===t.el?(0,p.jsx)("div",{className:g,children:t.raw?(0,p.jsxs)("div",{className:"components-tip",children:[(0,p.jsx)(d.Icon,{icon:je}),(0,p.jsx)(x.RawHTML,{children:t.content})]}):(0,p.jsx)(d.Tip,{children:t.content})}):"hero"===t.el?(0,p.jsx)("div",{className:g,children:(0,p.jsx)("h3",{children:t.content})}):"key_value_repeater"===t.el||"webhook_key_value_repeater"===t.el?(0,p.jsx)(On,{...y,setting:t,availableSmartTags:c}):"repeater"===t.el?(0,p.jsx)($n,{...y,availableSmartTags:c}):(console.log(t),e)}const zn=({setting:e,meta:t,children:n})=>Array.isArray(e.conditions)&&!e.conditions.every((e=>{const n=e.key.split("."),r=e.operator?e.operator:"==";return xn(e.value,r,Ln(t,n))}))?null:n,Hn={placement:"left-start",offset:36,shift:!0},Vn=({indicators:e,label:t})=>(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",children:[(0,p.jsx)(d.__experimentalZStack,{isLayered:!1,offset:-8,children:e.map(((e,t)=>(0,p.jsx)(d.Flex,{expanded:!1,children:(0,p.jsx)(d.ColorIndicator,{colorValue:e})},t)))}),(0,p.jsx)(d.FlexItem,{className:"block-editor-panel-color-gradient-settings__color-name",title:t,children:t})]});function Gn({isGradient:e,inheritedValue:t,userValue:n,setValue:r,colorGradientControlSettings:o}){return(0,p.jsx)(xe.__experimentalColorGradientControl,{...o,showTitle:!1,enableAlpha:!0,__experimentalIsRenderedInSidebar:!0,colorValue:e?void 0:t,gradientValue:e?t:void 0,onColorChange:e?void 0:r,onGradientChange:e?r:void 0,clearable:t===n,headingLevel:3})}function Wn({label:e,hasValue:t,resetValue:n,isShownByDefault:r,indicators:o,tabs:a,colorGradientControlSettings:i,panelId:s,isFirst:l=!1,isLast:c=!1}){const u=a.map((({key:e,label:t})=>({name:e,title:t}))),f=y("block-editor-tools-panel-color-gradient-settings__item",{first:l,last:c});return(0,p.jsx)(d.__experimentalToolsPanelItem,{className:f,hasValue:t,label:e,onDeselect:n,isShownByDefault:r,panelId:s,children:(0,p.jsx)(d.Dropdown,{popoverProps:Hn,className:"block-editor-tools-panel-color-gradient-settings__dropdown",renderToggle:({onToggle:t,isOpen:n})=>{const r={onClick:t,className:y("block-editor-panel-color-gradient-settings__dropdown",{"is-open":n}),"aria-expanded":n,"aria-label":(0,v.sprintf)(/* translators: %s is the type of color property, e.g., "background" */ /* translators: %s is the type of color property, e.g., "background" */
(0,v.__)("Color %s styles"),e)};return(0,p.jsx)(d.Button,{...r,children:(0,p.jsx)(Vn,{indicators:o,label:e})})},renderContent:()=>(0,p.jsx)(d.__experimentalDropdownContentWrapper,{paddingSize:"none",children:(0,p.jsxs)("div",{className:"block-editor-panel-color-gradient-settings__dropdown-content",children:[1===a.length&&(0,p.jsx)(Gn,{...a[0],colorGradientControlSettings:i}),a.length>1&&(0,p.jsx)(d.TabPanel,{tabs:u,children:e=>{const t=a.find((t=>t.key===e.name));return t?(0,p.jsx)(Gn,{...t,colorGradientControlSettings:i}):null}})]})})})})}const Un=[{name:"Red",color:"#FF0000"},{name:"Blue",color:"#0000FF"},{name:"Green",color:"#00FF00"},{name:"Yellow",color:"#FFFF00"},{name:"Purple",color:"#800080"},{name:"Orange",color:"#FFA500"},{name:"Pink",color:"#FFC0CB"},{name:"Teal",color:"#008080"},{name:"Navy",color:"#000080"},{name:"Lime",color:"#00FF00"},{name:"Maroon",color:"#800000"},{name:"Olive",color:"#808000"},{name:"Gray",color:"#808080"},{name:"Silver",color:"#C0C0C0"},{name:"Black",color:"#000000"},{name:"White",color:"#FFFFFF"}],Kn=({setting:e,meta:t,setAttributes:n,settingKey:r})=>{const o=e.items.map((e=>{const r=e.tabs||[{...e}];return{isShownByDefault:!0,...e,hasValue:()=>r.some((({key:e})=>!!t[e])),resetValue:()=>{const e=r.reduce(((e,{key:t})=>(e[t]=void 0,e)),{});n(e)},indicators:r.map((({key:e})=>t[e])),tabs:r.map((({key:e,label:r})=>({key:e,label:r,setValue:t=>n({[e]:t}),userValue:t?.[e]})))}})),a=o.length;return(0,p.jsx)(d.__experimentalToolsPanel,{label:e.label,resetAll:()=>{const e=o.reduce(((e,t)=>((t.tabs||[{...t}]).forEach((({key:t})=>{e[t]=""})),e)),{});n(e)},panelId:r,className:"color-block-support-panel",children:(0,p.jsx)("div",{className:"color-block-support-panel__inner-wrapper",style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0px, 1fr))",gap:"calc(16px) calc(8px)",gridColumn:"1 / -1",rowGap:0},children:o.map(((e,n)=>(0,p.jsx)(zn,{setting:e,meta:t,children:(0,p.jsx)(Wn,{...e,colorGradientControlSettings:{colors:Un,disableCustomColors:!1},panelId:r,isFirst:0===n,isLast:n===a-1})},e.key)))})})},qn=(e,t)=>{if(!e||!t)return"";const{color:n,style:r,width:o}=e;let a="";return void 0!==o&&(a+=`${t}-width: ${o.toString().match(/^\d+$/)?`${o}px`:o};`),void 0!==r&&(a+=`${t}-style: ${r};`),void 0!==n&&(a+=`${t}-color: ${n};`),a},Zn=e=>{if(!e)return"";let t="";if(e.border_radius)if("object"!=typeof e.border_radius)t+=`border-radius: ${e.border_radius.toString().match(/^\d+$/)?`${e.border_radius}px`:e.border_radius};`;else{const n=["topLeft","topRight","bottomRight","bottomLeft"].reduce(((t,n)=>{const r=e.border_radius?.[n];return void 0!==r&&(t=`${t} ${r.toString().match(/^\d+$/)?`${r}px`:r}`),t}),"");t+=`border-radius: ${n};`}if(e.border)(0,d.__experimentalHasSplitBorders)(e.border)?["top","right","bottom","left"].forEach((n=>{const r=e.border?.[n];t+=qn(r,`border-${n}`)})):t+=qn(e.border,"border");else{if(e.style&&(t+=`border-style: ${e.style};`),e.border_width){const n=e.border_width.toString().match(/^\d+$/)?`${e.border_width}px`:e.border_width;t+=`border-width: ${n};`}e.border_color&&(t+=`border-color: ${e.border_color};`)}return console.log(t),t},Yn=(e,t,n)=>{const r=e?.[t]||{};(0,a.useLayoutEffect)((()=>{const e=Zn(r);e!==r.generated&&n({[t]:{...r,generated:e}})}),[r,t,n])},Xn=({setting:e,meta:t,setAttributes:n,settingKey:r})=>{const o=t?.[r]||{};Yn(t,r,n);const a=e=>{const t={border:e,border_radius:o.border_radius,generated:""};n({[r]:{...t,generated:Zn(t)}})},i=e=>{const t={...o,border_radius:e,generated:""};n({[r]:{...t,generated:Zn(t)}})};let s=o.border;return s||(s={style:o.style,width:o.border_width,color:o.border_color}),(0,p.jsxs)(d.__experimentalToolsPanel,{label:e.label,resetAll:()=>n({[r]:{generated:""}}),panelId:r,className:"border-block-support-panel",children:[(0,p.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>(0,d.__experimentalIsDefinedBorder)(s),label:e.label,onDeselect:()=>a(void 0),isShownByDefault:!0,panelId:r,children:(0,p.jsx)(d.__experimentalBorderBoxControl,{colors:Un,onChange:a,popoverOffset:40,popoverPlacement:"left-start",value:s,__experimentalIsRenderedInSidebar:!0,size:"__unstable-large"})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{hasValue:()=>{const e=o?.border_radius;return"object"==typeof e?Object.entries(e).some(Boolean):!!e},label:(0,v.__)("Radius"),onDeselect:()=>i(void 0),isShownByDefault:!0,panelId:r,children:(0,p.jsx)(xe.__experimentalBorderRadiusControl,{values:o?.border_radius,onChange:i})})]})},Jn=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M13 5.5H4V4h9v1.5Zm7 7H4V11h16v1.5Zm-7 7H4V18h9v1.5Z"})}),Qn=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M7.5 5.5h9V4h-9v1.5Zm-3.5 7h16V11H4v1.5Zm3.5 7h9V18h-9v1.5Z"})}),er=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M11.111 5.5H20V4h-8.889v1.5ZM4 12.5h16V11H4v1.5Zm7.111 7H20V18h-8.889v1.5Z"})}),tr=(0,p.jsx)(_e.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,p.jsx)(_e.Path,{d:"M4 12.8h16v-1.5H4v1.5zm0 7h12.4v-1.5H4v1.5zM4 4.3v1.5h16V4.3H4z"})}),nr=[{label:(0,v.__)("Left"),value:"left",icon:Jn},{label:(0,v.__)("Center"),value:"center",icon:Qn},{label:(0,v.__)("Right"),value:"right",icon:er},{label:(0,v.__)("Justify"),value:"justify",icon:tr}],rr=(e,t,n)=>{const r=e?.[t]||{};(0,a.useLayoutEffect)((()=>{const e=(e=>{if(!e)return"";let t="";return["padding","margin"].forEach((n=>{["top","right","bottom","left"].forEach((r=>{const o=e[n]?.[r];o&&(t+=`${n}-${r}: ${o.toString().match(/^\d+$/)?`${o}px`:o};`)}))})),e.alignment&&(t+=`text-align: ${e.alignment};`),t})(r);e!==r.generated&&n({[t]:{...r,generated:e}})}),[r,t,n])},or=({setting:e,meta:t,setAttributes:n,settingKey:r})=>{rr(t,r,n);const o=t?.[r]||{},a=e=>[o[e],t=>n({[r]:{...o,[e]:t}}),()=>n({[r]:{...o,[e]:void 0}}),()=>!!o[e]],[i,s,l,c]=a("alignment"),[u,f,m,h]=a("margin"),[g,x,_,b]=a("padding"),[y,j,w,C]=a("classes");return(0,p.jsxs)(d.__experimentalToolsPanel,{label:e.label,resetAll:()=>n({[r]:{generated:""}}),panelId:r,className:"border-block-support-panel",children:[(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Alignment"),hasValue:c,onDeselect:l,panelId:r,isShownByDefault:!0,children:(0,p.jsx)(d.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isDeselectable:!0,isBlock:!0,label:(0,v.__)("Alignment"),value:i,onChange:s,children:nr.map(((e,t)=>(0,p.jsx)(d.__experimentalToggleGroupControlOptionIcon,{...e},t)))})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Padding"),hasValue:b,onDeselect:_,panelId:r,children:(0,p.jsx)(d.__experimentalBoxControl,{values:g,onChange:x,label:(0,v.__)("Padding"),allowReset:!1,__next40pxDefaultSize:!0})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Margin"),hasValue:h,onDeselect:m,panelId:r,children:(0,p.jsx)(d.__experimentalBoxControl,{values:u,onChange:f,label:(0,v.__)("Margin"),allowReset:!1,__next40pxDefaultSize:!0})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{className:"single-column",label:(0,v.__)("CSS Classes"),hasValue:C,onDeselect:w,panelId:r,children:(0,p.jsx)(d.__experimentalInputControl,{value:y,onChange:j,size:"__unstable-large",label:(0,v.__)("CSS Classes"),isPressEnterToChange:!0,__next40pxDefaultSize:!0})})]})},ar=['apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',"Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif',"Verdana, Geneva, sans-serif","Times New Roman, Times, serif","Georgia, serif","Courier New, Courier, monospace","Tahoma, Geneva, sans-serif","Calibri, Arial, sans-serif","Trebuchet MS, sans-serif","Lucida Grande, sans-serif","Palatino, serif",'"Palatino Linotype", "Book Antiqua", Palatino, serif','"Comic Sans MS", cursive, sans-serif',"Impact, Charcoal, sans-serif"],ir=({value:e,onChange:t})=>{const n=ar.map((n=>({title:(0,p.jsx)("span",{style:{fontFamily:n},children:(0,p.jsx)(d.__experimentalTruncate,{limit:25,ellipsizeMode:"tail",children:n})}),onClick:()=>t(n),isActive:e===n,label:n})));return(0,p.jsx)(d.__experimentalInputControlSuffixWrapper,{children:(0,p.jsx)(d.DropdownMenu,{icon:"admin-customizer",label:(0,v.__)("Font family","newsletter-optin-box"),controls:n,noIcons:!0})})},sr=({value:e,onChange:t})=>(0,p.jsx)(d.__experimentalInputControl,{label:(0,v.__)("Font family","newsletter-optin-box"),value:e,onChange:t,suffix:(0,p.jsx)(ir,{value:e,onChange:t}),isPressEnterToChange:!0,__next40pxDefaultSize:!0}),lr=[{name:(0,v.__)("Small"),slug:"small",size:13},{name:(0,v.__)("Normal"),slug:"normal",size:16},{name:(0,v.__)("Medium"),slug:"medium",size:20},{name:(0,v.__)("Large"),slug:"large",size:30},{name:(0,v.__)("Huge"),slug:"huge",size:42}],cr=(e,t,n)=>{const r=e?.[t]||{};(0,a.useLayoutEffect)((()=>{const e=(e=>{if(!e)return"";const t=[];return e.font_size&&t.push(`font-size: ${e.font_size.toString().match(/^\d+$/)?`${e.font_size}px`:e.font_size}`),e.font_weight&&t.push(`font-weight: ${e.font_weight}`),e.line_height&&t.push(`line-height: ${e.line_height}`),e.letter_spacing&&t.push(`letter-spacing: ${e.letter_spacing}`),e.text_transform&&t.push(`text-transform: ${e.text_transform}`),e.decoration&&t.push(`text-decoration: ${e.decoration}`),e.style&&t.push(`font-style: ${e.style}`),e.family&&t.push(`font-family: ${e.family}`),t.length?t.join("; ")+";":""})(r);e!==r.generated&&n({[t]:{...r,generated:e}})}),[r,t,n])},dr=({setting:e,meta:t,setAttributes:n,settingKey:r})=>{cr(t,r,n);const o=t?.[r]||{},a=e=>[o[e],t=>n({[r]:{...o,[e]:t}}),()=>n({[r]:{...o,[e]:void 0}}),()=>!!o[e]],[i,s,l,c]=a("family"),[u,f,m,h]=a("font_size"),[g,,,x]=a("style"),[_,,,b]=a("font_weight"),[y,j,w,C]=a("line_height"),[k,S,T,A]=a("letter_spacing"),[P,N,M,$]=a("text_transform"),[E,O,I,B]=a("decoration");return(0,p.jsxs)(d.__experimentalToolsPanel,{label:e.label,resetAll:()=>n({[r]:{generated:""}}),panelId:r,className:"border-block-support-panel",children:[(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Font family"),hasValue:c,onDeselect:l,panelId:r,children:(0,p.jsx)(sr,{value:i||"",onChange:s})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Font size"),hasValue:h,onDeselect:m,isShownByDefault:!0,panelId:r,children:(0,p.jsx)(d.FontSizePicker,{value:u,onChange:f,fontSizes:lr,disableCustomFontSizes:!1,withReset:!1,units:["px","em","rem"],withSlider:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{className:"single-column",label:(0,v.__)("Appearance"),hasValue:()=>x()||b(),onDeselect:()=>{n({[r]:{...o,style:void 0,font_weight:void 0}})},panelId:r,children:(0,p.jsx)(xe.__experimentalFontAppearanceControl,{value:{fontStyle:g,fontWeight:_},onChange:({fontStyle:e,fontWeight:t})=>{n({[r]:{...o,style:e,font_weight:t}})},hasFontStyles:!0,hasFontWeights:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{className:"single-column",label:(0,v.__)("Line height"),hasValue:C,onDeselect:w,panelId:r,children:(0,p.jsx)(xe.LineHeightControl,{__nextHasNoMarginBottom:!0,__unstableInputWidth:"auto",value:y,onChange:j,size:"__unstable-large"})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{className:"single-column",label:(0,v.__)("Letter spacing"),hasValue:A,onDeselect:T,panelId:r,children:(0,p.jsx)(xe.__experimentalLetterSpacingControl,{value:k,onChange:S,size:"__unstable-large",__unstableInputWidth:"auto"})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{className:"single-column",label:(0,v.__)("Text decoration"),hasValue:B,onDeselect:I,panelId:r,children:(0,p.jsx)(xe.__experimentalTextDecorationControl,{value:E,onChange:O,size:"__unstable-large",__unstableInputWidth:"auto"})}),(0,p.jsx)(d.__experimentalToolsPanelItem,{label:(0,v.__)("Letter case"),hasValue:$,onDeselect:M,panelId:r,children:(0,p.jsx)(xe.__experimentalTextTransformControl,{value:P,onChange:N,showNone:!0,isBlock:!0,size:"__unstable-large",__nextHasNoMarginBottom:!0})})]})},pr=({state:e})=>{if(!e.image&&e.hidePrefix&&e.hideTitle&&e.hideDescription)return null;const t=!e.hidePrefix||!e.hideTitle||!e.hideDescription;return(0,p.jsxs)("div",{className:y("noptin-form-header",e.image?`noptin-img-${e.imagePos}`:"no-image"),children:[t&&(0,p.jsxs)("div",{className:"noptin-form-header-text",children:[!e.hidePrefix&&(0,p.jsx)(me,{field:"prefix"}),!e.hideTitle&&(0,p.jsx)(me,{field:"title"}),!e.hideDescription&&(0,p.jsx)(me,{field:"description"})]}),e.image&&(0,p.jsx)("div",{className:"noptin-form-header-image",children:(0,p.jsx)("img",{src:e.image})})]})},ur=({state:e})=>e.hideFields&&e.hideNote?null:(0,p.jsxs)("div",{className:"noptin-form-footer",children:[!e.hideFields&&(0,p.jsxs)("div",{className:"noptin-form-fields",children:[Array.isArray(e.fields)&&e.fields.map((({key:e,type:t})=>(0,p.jsx)(i().Fragment,{children:t&&(0,p.jsx)("div",{className:`noptin-form-field-wrapper noptin-form-field-wrapper-${t.type} noptin-optin-field-wrapper noptin-optin-field-wrapper-${t.type}`,children:(0,p.jsx)(de,{...t})})},e))),e.gdprCheckbox&&!e.singleLine&&(0,p.jsx)("div",{className:"noptin-gdpr-checkbox-wrapper",style:{marginBottom:10},children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",required:!0}),(0,p.jsx)(x.RawHTML,{children:e.gdprConsentText})]})}),(0,p.jsx)(ge,{})]}),!e.hideFields&&e.singleLine&&e.gdprCheckbox&&(0,p.jsx)("div",{className:"noptin-gdpr-checkbox-wrapper",style:{marginBottom:10},children:(0,p.jsxs)("label",{children:[(0,p.jsx)("input",{type:"checkbox",required:!0}),(0,p.jsx)(x.RawHTML,{children:e.gdprConsentText})]})}),!e.hideNote&&(0,p.jsx)(me,{field:"note"})]}),fr={popup:{width:"620px",height:"280px"},slide_in:{width:"400px",height:"280px"},sidebar:{width:"300px",height:"400px"}},mr=[["#ff1744","#fafafa","#d50000"],["#f50057","#fafafa","#c51162"],["#d500f9","#fafafa","#aa00ff"],["#651fff","#fafafa","#6200ea"],["#3d5afe","#fafafa","#304ffe"],["#2979ff","#fafafa","#2962ff"],["#00b0ff","#fafafa","#0091ea"],["#00e5ff","#fafafa","#00b8d4"],["#1de9b6","#191919","#00bfa5"],["#00e676","#191919","#00c853"],["#76ff03","#191919","#64dd17"],["#c6ff00","#191919","#aeea00"],["#ffea00","#191919","#ffd600"],["#ffc400","#191919","#ffab00"],["#ff9100","#fafafa","#ff6d00"],["#ff3d00","#fafafa","#dd2c00"],["#ff4081","#fafafa","#f50057"],["#7c4dff","#fafafa","#6200ea"],["#536dfe","#fafafa","#3d5afe"],["#40c4ff","#191919","#00b0ff"],["#18ffff","#191919","#00e5ff"],["#64ffda","#191919","#1de9b6"],["#69f0ae","#191919","#00e676"],["#b2ff59","#191919","#76ff03"],["#eeff41","#191919","#c6ff00"],["#ffd740","#191919","#ffc400"],["#ffab40","#191919","#ff9100"],["#ff6e40","#fafafa","#ff3d00"],["#39ff14","#191919","#0bff01"],["#ff1493","#fafafa","#ff0080"],["#00ffff","#191919","#00e5ff"],["#ff00ff","#fafafa","#f500f5"],["#ff6600","#fafafa","#ff4400"],["#ffff00","#191919","#ffea00"],["#ff6b6b","#fafafa","#4ecdc4"],["#a40606","#fafafa","#d98324"],["#7b4397","#fafafa","#dc2430"],["#11998e","#fafafa","#38ef7d"],["#fc4a1a","#fafafa","#f7b733"],["#00f260","#191919","#0575e6"],["#313131","#fafafa","#607d8b"],["#ffffff","#191919","#191919"],["#aaaaaa","#191919","#191919"]],hr=()=>{const[e]=(0,g.useEntityProp)("postType","noptin-form","id"),[t,n]=(0,g.useEntityProp)("postType","noptin-form","meta"),r=window.noptinForm?.data?.templates,o=t?._noptin_state||{},i=(0,a.useRef)(!0),s=e=>{n({...t,_noptin_state:{...o,...e}})};Yn(o,"formBorder",s),rr(o,"prefixAdvanced",s),rr(o,"titleAdvanced",s),rr(o,"descriptionAdvanced",s),rr(o,"noteAdvanced",s),cr(o,"prefixTypography",s),cr(o,"titleTypography",s),cr(o,"descriptionTypography",s),cr(o,"noteTypography",s),(0,a.useEffect)((()=>{i.current?i.current=!1:o.optinType&&n({...t,_noptin_state:{...o,formHeight:fr[o.optinType]?.height||"280px",formWidth:fr[o.optinType]?.width||"620px"}})}),[o.optinType]);const{baseControlProps:l,controlProps:c}=(0,d.useBaseControlProps)({label:(0,v.__)("Preview","newsletter-optin-box"),help:(0,v.__)("The form may look slightly different than this when shown in a post, page or widget area.","newsletter-optin-box")});return(0,p.jsx)(f,{children:(0,p.jsxs)(d.BaseControl,{...l,__nextHasNoMarginBottom:!0,children:[(0,p.jsx)(he,{state:o}),(0,p.jsxs)(d.__experimentalVStack,{spacing:4,children:[(0,p.jsxs)(d.__experimentalHStack,{justify:"flex-start",wrap:!0,children:[r&&(0,p.jsx)(d.DropdownMenu,{icon:"art",label:(0,v.__)("Change template","newsletter-optin-box"),text:(0,v.__)("Change template","newsletter-optin-box"),toggleProps:{variant:"secondary"},controls:Object.entries(r).map((([e,{title:r,data:a}])=>(a.noptinFormBorderColor&&!a.formBorder&&(a.formBorder={border_color:a.noptinFormBorderColor,generated:`border-color: ${a.noptinFormBorderColor};`}),{title:r,onClick:()=>n({...t,_noptin_state:{...o,hideFields:!1,gdprCheckbox:!1,formBorder:{style:"none",border_radius:0,border_width:0,border_color:"#f8f9fa",generated:"border-style: none; border-radius: 0px; border-width: 0px; border-color: #f8f9fa;"},titleAdvanced:{},descriptionAdvanced:{},noteAdvanced:{},prefixAdvanced:{},formHeight:o.optinType&&fr[o.optinType]?.height||"280px",formWidth:o.optinType&&fr[o.optinType]?.width||"620px",...a}})})))}),(0,p.jsx)(d.DropdownMenu,{icon:"marker",label:(0,v.__)("Change color theme","newsletter-optin-box"),text:(0,v.__)("Change color theme","newsletter-optin-box"),toggleProps:{variant:"secondary"},controls:mr.map((e=>({title:(0,p.jsxs)(d.__experimentalHStack,{children:[(0,p.jsx)(d.ColorIndicator,{colorValue:e[0]}),(0,p.jsx)(d.ColorIndicator,{colorValue:e[2]}),(0,p.jsx)(d.ColorIndicator,{colorValue:e[1]})]}),onClick:()=>{const r={...o};e.length&&(r.noptinFormBg=e[0],r.formBorder.border_color=e[2],r.noptinButtonColor=e[0],r.noptinButtonBg=e[1],r.titleColor=e[1],r.descriptionColor=e[1],r.noteColor=e[1]),n({...t,_noptin_state:r})}})))})]}),(0,p.jsxs)("div",{...c,className:y("noptin-optin-form-wrapper",o.imageMain?`noptin-img-${o.imageMainPos}`:"no-image"),children:[(0,p.jsxs)("form",{className:y("noptin-optin-form",o.showLabels?"noptin-label-show":"noptin-label-hide",o.singleLine?"noptin-form-single-line":"noptin-form-new-line"),onSubmit:e=>e.preventDefault(),children:[(0,p.jsx)(pr,{state:o}),(0,p.jsx)(ur,{state:o})]}),o.imageMain&&(0,p.jsx)("div",{className:"noptin-form-main-image",children:(0,p.jsx)("img",{src:o.imageMain})})]}),(0,p.jsxs)(d.__experimentalText,{variant:"muted",align:"center",children:["Shortcode: ",(0,p.jsxs)("code",{children:["[noptin form=",e,"]"]})]})]})]})})},gr=[{label:(0,v.__)("Popup","newsletter-optin-box"),value:"popup"},{label:(0,v.__)("Shortcode","newsletter-optin-box"),value:"inpost"},{label:(0,v.__)("Widget","newsletter-optin-box"),value:"sidebar"},{label:(0,v.__)("Sliding","newsletter-optin-box"),value:"slide_in"}],xr=()=>{const[e,t]=(0,g.useEntityProp)("postType","noptin-form","meta"),n=e?._noptin_state||{},r=e?._noptin_optin_type,o=r=>{t({...e,_noptin_optin_type:r,_noptin_state:{...n,optinType:r}})};return(0,a.useEffect)((()=>{r||o("inpost")}),[]),(0,a.useEffect)((()=>{r&&r!==n.optinType&&t({...e,_noptin_state:{...n,optinType:r}})}),[r,n.optinType]),(0,p.jsx)(f,{children:(0,p.jsx)(d.__experimentalToggleGroupControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,isDeselectable:!1,isBlock:!0,label:(0,v.__)("Form type"),value:r,onChange:o,children:gr.map(((e,t)=>(0,p.jsx)(d.__experimentalToggleGroupControlOption,{...e},t)))})})},_r=()=>(0,p.jsx)(d.Flex,{justify:"center",children:(0,p.jsxs)(d.__experimentalVStack,{className:"noptin-form-preview",spacing:8,children:[(0,p.jsx)(f,{children:(0,p.jsx)(re,{})}),(0,p.jsx)(f,{children:(0,p.jsx)(xr,{})}),(0,p.jsx)(f,{children:(0,p.jsx)(hr,{})})]})}),br=({setting:e,meta:t})=>(0,p.jsx)(d.PanelBody,{title:e.title,initialOpen:!1,children:(0,p.jsx)(d.__experimentalVStack,{spacing:4,children:(0,p.jsx)(vr,{settings:e.children})})}),yr=({setting:e,settingKey:t,meta:n,setAttributes:r})=>"panel"===e.el?(0,p.jsx)(zn,{meta:n,setting:e,children:(0,p.jsx)(br,{setting:e,meta:n})}):"border"===e.el?(0,p.jsx)(zn,{meta:n,setting:e,children:(0,p.jsx)(Xn,{setting:e,meta:n,settingKey:t,setAttributes:r})}):"color_panel"===e.el?(0,p.jsx)(zn,{meta:n,setting:e,children:(0,p.jsx)(Kn,{setting:e,meta:n,settingKey:t,setAttributes:r})}):"typography"===e.el?(0,p.jsx)(zn,{meta:n,setting:e,children:(0,p.jsx)(dr,{setting:e,meta:n,settingKey:t,setAttributes:r})}):"advanced"===e.el?(0,p.jsx)(zn,{meta:n,setting:e,children:(0,p.jsx)(or,{setting:e,meta:n,settingKey:t,setAttributes:r})}):(0,p.jsx)(Dn,{settingKey:t,setting:e,saved:n,setAttributes:r}),vr=({settings:e})=>{const[t,n]=(0,g.useEntityProp)("postType","noptin-form","meta"),r=t?._noptin_state||{},o=(0,a.useCallback)((e=>{n({...t,_noptin_state:{...r,...e}})}),[t,n]);return(0,p.jsx)(p.Fragment,{children:Object.keys(e).map((t=>(0,p.jsx)(f,{children:(0,p.jsx)(yr,{settingKey:t,setting:e[t],meta:r,setAttributes:o})},t)))})},jr=window.noptinForm?.data?.settings||{},wr=Object.keys(jr).map((e=>{const{label:t,...n}=jr[e];return{key:e,label:t,settings:n}})),Cr=()=>{const[e,t]=(0,a.useState)(wr[0]?.key),n=wr.find((t=>t.key===e));return(0,p.jsxs)("div",{id:"noptin-form-editor__sidebar",className:"interface-complementary-area",children:[(0,p.jsx)("div",{className:"components-panel__header interface-complementary-area-header",tabIndex:-1,children:(0,p.jsx)("ul",{children:wr.map((n=>(0,p.jsx)("li",{children:(0,p.jsx)(d.Button,{onClick:()=>t(n.key),className:y("edit-form-sidebar__panel-tab",n.key.replace(/\//g,"__").toLowerCase(),{"is-active":e===n.key}),"aria-label":e===n.key?(0,v.sprintf)((0,v.__)("%s (selected)"),n.label||n.key):n.label||n.key,"data-label":n.label||n.key,children:n.label||n.key})},n.key)))})}),n&&(0,p.jsx)(vr,{settings:n.settings})]})},kr=(0,Te.getQueryArg)(window.location.href,"tab")||"settings",Sr=wr.map((({key:e,label:t,settings:n})=>({name:e,title:t,settings:n})));function Tr(){const e=(0,j.useViewportMatch)("small","<");return(0,p.jsx)(f,{children:(0,p.jsx)(d.TabPanel,{initialTabName:kr,orientation:e?"vertical":"horizontal",tabs:Sr,className:"noptin-settings__tabs",children:e=>(0,p.jsx)(p.Fragment,{children:"preview"===e.name?(0,p.jsx)(_r,{}):(0,p.jsx)(vr,{settings:e.settings})})})})}function Ar(){const e=(0,j.useViewportMatch)("small","<"),t=()=>(0,p.jsxs)(d.__experimentalVStack,{children:[(0,p.jsx)(J,{}),(0,p.jsx)(X,{}),e?(0,p.jsx)(Tr,{}):(0,p.jsx)(_r,{})]});return(0,p.jsx)(T,{isDistractionFree:!1,className:"noptin-app__interface",header:(0,p.jsx)(te,{}),content:(0,p.jsx)(t,{}),sidebar:e?void 0:(0,p.jsx)(Cr,{}),footer:(0,p.jsx)(ne,{})})}Sr.push({name:"preview",title:(0,v.__)("Preview"),settings:{}});const Pr={__unstableIsPreviewMode:!0,allowedBlockTypes:!1},Nr=(0,a.memo)((({post:e})=>{const t=(0,a.useMemo)((()=>e?.meta?._noptin_state&&"object"==typeof e.meta._noptin_state&&0!==Object.keys(e.meta._noptin_state).length?{}:{random:["hello","world"],meta:{...e?.meta,_noptin_state:{...window.noptinForm.data?.default_form}}}),[e]);return(0,p.jsxs)(h.EditorProvider,{post:e,settings:Pr,initialEdits:t,useSubRegistry:!1,children:[(0,p.jsx)(h.PostLockedModal,{}),(0,p.jsxs)(f,{children:[(0,p.jsx)(Ar,{}),(0,p.jsx)(_,{isActive:!1})]})]})})),Mr=function({postId:e,postType:t}){const{post:n,hasFinishedResolution:r,hasErrored:o}=(0,m.useSelect)((n=>{const{hasResolutionFailed:r,hasFinishedResolution:o,getEntityRecord:a}=n(g.store);return{post:a("postType",t,e),hasFinishedResolution:o("getEntityRecord",["postType",t,e]),hasErrored:r("getEntityRecord",["postType",t,e])}}),[t,e]);return o?(0,p.jsx)(d.Notice,{status:"error",children:"Form not found"}):r?n?(0,p.jsx)(d.SlotFillProvider,{children:(0,p.jsx)(Nr,{post:n})}):(0,p.jsx)(d.Notice,{status:"error",children:"Form not found"}):(0,p.jsx)(d.Spinner,{})},$r=()=>(console.log("Initializing form editor"),(0,p.jsx)(f,{children:(0,p.jsx)(Mr,{postType:"noptin-form",postId:window.noptinForm.data.form})}));c()((()=>{const e=document.createElement("div");e.id="noptin-form-editor",e.className="block-editor",e.innerHTML='<span class="spinner" style="float: none; visibility: visible;"></span>',document.getElementById("wpbody-content").appendChild(e);const t=document.getElementById("noptin-form-editor");t&&(0,s.H)(t).render((0,p.jsx)($r,{}))}))}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],s=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={830:0,98:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,s,l]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(l)var d=l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=globalThis.webpackChunknoptin_premium=globalThis.webpackChunknoptin_premium||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[98],(()=>r(9578)));o=r.O(o)})();