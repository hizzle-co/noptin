(()=>{"use strict";var e,t={541:()=>{const e={noptin_nonce:window.noptinParams?.nonce||"",conversion_page:window.location.href,action:"noptin_process_ajax_subscriber",noptin_process_request:"1",noptin_timestamp:Math.floor(Date.now()/1e3),noptin_submitted:Math.floor(Date.now()/1e3)},t=t=>{Object.entries(e).forEach((([e,n])=>{const o=document.createElement("input");o.type="hidden",o.name=e,o.value=n,t.appendChild(o)}));const n=t.querySelector(".noptin_feedback_error"),o=t.querySelector(".noptin-response");if(n&&!o){const e=document.createElement("div");e.classList.add("noptin-response","noptin-form-notice"),e.setAttribute("role","alert"),n.after(e)}const i=document.createElement("input");i.type="text",i.id=`noptin_${Math.random().toString(36).substr(2,9)}`,i.name="noptin_ign",i.autocomplete="off",i.style.position="absolute",i.style.left="-9999px",i.style.top="-9999px",i.style.opacity="0",i.style.height="0",i.style.width="0",i.style.zIndex="-1",i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=document.createElement("label");s.htmlFor=i.id,s.textContent="Leave this field empty",s.style.display="none",t.appendChild(s),t.appendChild(i);const r=t.querySelector(".noptin_form_input_email");r&&r.setAttribute("name","noptin_fields[email]"),t.addEventListener("submit",(function(e){e.preventDefault(),t.classList.add("noptin-submitting"),t.classList.remove("noptin-form-submitted","noptin-has-error","noptin-has-success");const n=t.querySelector(".noptin-response");n&&(n.innerHTML=""),t.querySelector('input[name="noptin_submitted"]')?.setAttribute("value",Math.floor(Date.now()/1e3).toString());try{window.fetch(window.noptinParams?.resturl||"/wp-json/noptin/v1/form",{method:"POST",body:new FormData(t,e?.submitter),credentials:"same-origin",headers:{Accept:"application/json"}}).then((e=>{if(e.status>=200&&e.status<300)return e;throw e})).then((e=>e.json())).then((e=>{if(e){if(!1===e.success)t.classList.add("noptin-has-error"),n&&(n.innerHTML=e.data);else{if(!0!==e.success)return void t.submit();{const o=t.querySelector(".noptin_form_redirect");if(o&&o.getAttribute("value"))return void(window.location.href=o.getAttribute("value"));"redirect"===e.data.action&&(window.location.href=e.data.redirect_url),e.data.msg&&(t.classList.add("noptin-has-success"),n&&(n.innerHTML=e.data.msg))}}t.classList.add("noptin-form-submitted"),t.classList.remove("noptin-submitting")}else t.submit()})).then((()=>{try{"function"==typeof window.gtag&&window.gtag("event","subscribe",{method:"Noptin Form"})}catch(e){console.error(e.message)}})).catch((e=>t.submit()))}catch(e){console.log(e),this.submit()}}))},n=":not([inert]):not([inert] *)",o=':not([tabindex^="-"])',i=":not(:disabled)";var s=[`a[href]${n}${o}`,`area[href]${n}${o}`,`input:not([type="hidden"]):not([type="radio"])${n}${o}${i}`,`input[type="radio"]${n}${o}${i}`,`select${n}${o}${i}`,`textarea${n}${o}${i}`,`button${n}${o}${i}`,`details${n} > summary:first-of-type${o}`,`iframe${n}${o}`,`audio[controls]${n}${o}`,`video[controls]${n}${o}`,`[contenteditable]${n}${o}`,`[tabindex]${n}${o}`];function r(e){(e.querySelector("[autofocus]")||e).focus()}function a(e,t){if(t&&c(e))return e;if(function(e){return!(e.shadowRoot&&"-1"===e.getAttribute("tabindex")||e.matches(":disabled,[hidden],[inert]"))}(e))if(e.shadowRoot){let n=l(e.shadowRoot,t);for(;n;){const e=a(n,t);if(e)return e;n=d(n,t)}}else if("slot"===e.localName){const n=e.assignedElements({flatten:!0});t||n.reverse();for(const e of n){const n=a(e,t);if(n)return n}}else{let n=l(e,t);for(;n;){const e=a(n,t);if(e)return e;n=d(n,t)}}return!t&&c(e)?e:null}function l(e,t){return t?e.firstElementChild:e.lastElementChild}function d(e,t){return t?e.nextElementSibling:e.previousElementSibling}const c=e=>!e.shadowRoot?.delegatesFocus&&e.matches(s.join(","))&&!(e=>!(!e.matches("details:not([open]) *")||e.matches("details>summary:first-of-type"))||!(e.offsetWidth||e.offsetHeight||e.getClientRects().length))(e);function u(e=document){const t=e.activeElement;return t?t.shadowRoot?u(t.shadowRoot)||document.activeElement:t:null}const h="data-a11y-dialog";class p{$el;id;previouslyFocused;shown;constructor(e){this.$el=e,this.id=this.$el.getAttribute(h)||this.$el.id,this.previouslyFocused=null,this.shown=!1,this.maintainFocus=this.maintainFocus.bind(this),this.bindKeypress=this.bindKeypress.bind(this),this.handleTriggerClicks=this.handleTriggerClicks.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),document.addEventListener("click",this.handleTriggerClicks,!0)}destroy(){return this.fire("destroy").defaultPrevented||(this.hide(),document.removeEventListener("click",this.handleTriggerClicks,!0),this.$el.replaceWith(this.$el.cloneNode(!0))),this}show(e){return this.shown||this.fire("show",e).defaultPrevented||(this.shown=!0,this.$el.removeAttribute("aria-hidden"),this.previouslyFocused=u(),"BODY"===this.previouslyFocused?.tagName&&e?.target&&(this.previouslyFocused=e.target),"focus"===e?.type?this.maintainFocus(e):r(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),this.$el.addEventListener("keydown",this.bindKeypress,!0)),this}hide(e){return this.shown?(this.fire("hide",e).defaultPrevented||(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this.previouslyFocused?.focus?.(),document.body.removeEventListener("focus",this.maintainFocus,!0),this.$el.removeEventListener("keydown",this.bindKeypress,!0)),this):this}on(e,t,n){return this.$el.addEventListener(e,t,n),this}off(e,t,n){return this.$el.removeEventListener(e,t,n),this}fire(e,t){const n=new CustomEvent(e,{detail:t,cancelable:!0});return this.$el.dispatchEvent(n),n}handleTriggerClicks(e){const t=e.composedPath()[0];t.closest(`[${h}-show="${this.id}"]`)&&this.show(e),(t.closest(`[${h}-hide="${this.id}"]`)||t.closest(`[${h}-hide]`)&&t.closest('[aria-modal="true"]')===this.$el)&&this.hide(e)}bindKeypress(e){if('[aria-modal="true"]',function e(t){return t&&t!==document&&t!==window?(t.assignedSlot&&(t=t.assignedSlot),t.closest('[aria-modal="true"]')||e(t.getRootNode().host)):null}(u())!==this.$el)return;let t=!1;try{t=!!this.$el.querySelector('[popover]:not([popover="manual"]):popover-open')}catch{}"Escape"!==e.key||"alertdialog"===this.$el.getAttribute("role")||t||(e.preventDefault(),this.hide(e)),"Tab"===e.key&&function(e,t){const[n,o]=function(e){const t=a(e,!0);return[t,t?a(e,!1)||t:null]}(e);if(!n)return t.preventDefault();const i=u();t.shiftKey&&i===n?(o.focus(),t.preventDefault()):t.shiftKey||i!==o||(n.focus(),t.preventDefault())}(this.$el,e)}maintainFocus(e){e.target.closest(`[aria-modal="true"], [${h}-ignore-focus-trap]`)||r(this.$el)}}function m(){for(const e of document.querySelectorAll("[data-a11y-dialog]"))new p(e)}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",m):m());const f=(e,t)=>{let n;return function(...o){n||(e.apply(this,o),n=!0,setTimeout((()=>n=!1),t))}};let v=!1;const w=e=>{e.id||(e.id=`noptin-popup-${Math.random().toString(36).substr(2,9)}`);const t=e.querySelector(".noptin-optin-form-wrapper");if(t)try{const n=t.dataset?.trigger,o=t.querySelector("input[name=noptin_form_id]"),i=o?.value,s=parseInt(t.dataset?.hideSeconds||""),r=function(e,t,n,o){const i=new p(e);console.log(o);const s=()=>{v||(v=!0,i.show(),n?localStorage.setItem("noptinFormDisplayed"+t,`${(new Date).getTime()}`):sessionStorage.setItem("noptinFormDisplayed"+t,"1"),window.fetch(window.noptinParams?.ajaxurl||"",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"same-origin",body:new URLSearchParams({action:"noptin_log_form_impression",_wpnonce:window.noptinParams?.nonce||"",form_id:t})}).catch((e=>{console.error("Error logging form impression:",e)})))},r=e.dataset.value||"";return{close:()=>{v=!1,i.hide()},immediate(){s()},before_leave(){let e=null;const t=o=>{o.clientY>0||(e=window.setTimeout((()=>{s(),document.removeEventListener("mouseleave",t),document.removeEventListener("mouseenter",n)}),200))},n=()=>{e&&(clearTimeout(e),e=null)};document.addEventListener("mouseleave",t),document.addEventListener("mouseenter",n)},on_scroll(){const e=parseFloat(r);if(isNaN(e))return;const t=f((()=>{(()=>{const e=document.documentElement,t=document.body;return(e.scrollTop||t.scrollTop)/((e.scrollHeight||t.scrollHeight)-e.clientHeight)*100})()>e&&(s(),window.removeEventListener("scroll",t))}),500);window.addEventListener("scroll",t)},after_delay(){const e=1e3*parseFloat(r);isNaN(e)||setTimeout(s,e)},after_click(){r&&document.body.addEventListener("click",(e=>{e.target.matches(r)&&(e.preventDefault(),s())}))}}}(e,i,s,null!==t.closest(".noptin-slide_in-main-wrapper"));if(s>0&&"after_click"!==n){if(i){const e=localStorage.getItem(`noptinFormDisplayed${i}`);(new Date).getTime(),e&&parseInt(e),localStorage.removeItem(`noptinFormDisplayed${i}`)}}else i&&"after_click"!==n&&sessionStorage.getItem(`noptinFormDisplayed${i}`);n&&r[n]?r[n]():r.immediate()}catch(e){console.error(e)}else console.error("No wrapper found")};var y;y=()=>{window.FormData?window.noptinParams?.resturl?(document.querySelectorAll("form.noptin-newsletter-form, form.noptin-optin-form, .noptin-optin-form-wrapper form, .wp-block-noptin-email-optin form, .noptin-email-optin-widget form, .noptin-optin-form").forEach(t),document.querySelectorAll(".noptin-popup-main-wrapper, .noptin-slide_in-main-wrapper").forEach(w)):console.error("noptinParams.resturl is not defined."):console.error("FormData is not supported.")},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",y):y()}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,o),s.exports}o.m=t,e=[],o.O=(t,n,i,s)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],i=e[c][1],s=e[c][2];for(var a=!0,l=0;l<n.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(a=!1,s<r&&(r=s));if(a){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,i,s]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={472:0,364:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,s,r=n[0],a=n[1],l=n[2],d=0;if(r.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var c=l(o)}for(t&&t(n);d<r.length;d++)s=r[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},n=self.webpackChunknoptin_premium=self.webpackChunknoptin_premium||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[364],(()=>o(541)));i=o.O(i)})();