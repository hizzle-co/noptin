(()=>{"use strict";const e=window.wp.blocks,t=(window.React,window.wp.i18n),o=window.wp.blockEditor,n=window.wp.components,r=window.wp.coreData,i=window.wp.data,s=window.wp.htmlEntities,l=window.wp.primitives,a=window.ReactJSXRuntime,c=(0,a.jsx)(l.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,a.jsx)(l.Path,{d:"M15.5 9.5a1 1 0 100-2 1 1 0 000 2zm0 1.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zm-2.25 6v-2a2.75 2.75 0 00-2.75-2.75h-4A2.75 2.75 0 003.75 15v2h1.5v-2c0-.69.56-1.25 1.25-1.25h4c.69 0 1.25.56 1.25 1.25v2h1.5zm7-2v2h-1.5v-2c0-.69-.56-1.25-1.25-1.25H15v-1.5h2.5A2.75 2.75 0 0120.25 15zM9.5 8.5a1 1 0 11-2 0 1 1 0 012 0zm1.5 0a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z",fillRule:"evenodd"})}),d={per_page:100};(0,e.registerBlockType)("noptin/form",{edit:({attributes:l,setAttributes:w,clientId:p})=>{const u=(0,o.useBlockProps)(),{replaceBlock:h}=(0,i.useDispatch)(o.store),{forms:m,hasFinishedResolution:x,hasErrored:f}=(0,i.useSelect)((e=>{const{hasResolutionFailed:t,hasFinishedResolution:o,getEntityRecords:n}=e(r.store);return{forms:n("postType","noptin-form",d),hasFinishedResolution:o("getEntityRecords",["postType","noptin-form",d]),hasErrored:t("getEntityRecords",["postType","noptin-form",d])}}),[]);if(!x)return(0,a.jsx)("div",{...u,children:(0,a.jsx)(n.Spinner,{})});if(f)return(0,a.jsx)("div",{...u,children:(0,a.jsx)(n.Notice,{status:"error",children:(0,t.__)("An error occurred while fetching forms.","newsletter-optin-box")})});const b=[{label:(0,t.__)("Default form","newsletter-optin-box"),value:"0"},{label:(0,t.__)("Single-line / Horizontal form","newsletter-optin-box"),value:"-1"}];return Array.isArray(m)&&m.forEach((e=>{b.push({label:(0,s.decodeEntities)(e.title.raw),value:`${e.id}`})})),(0,a.jsx)("div",{...u,children:(0,a.jsxs)(n.Placeholder,{icon:c,label:(0,t.__)("Newsletter Form","newsletter-optin-box"),instructions:(0,t.__)("Select a newsletter form to display.","newsletter-optin-box"),isColumnLayout:!0,children:[(0,a.jsx)(n.SelectControl,{label:(0,t.__)("Select Newsletter Form","newsletter-optin-box"),value:l.form,options:b,onChange:e=>{w({form:e})},hideLabelFromVision:!0}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Button,{variant:"primary",onClick:function(){h(p,(0,e.createBlock)("noptin/email-optin",{style:{color:{text:"#32373c",background:"#eeeeee"},elements:{button:{color:{text:"#fafafa",background:"#313131"}}},border:{color:"#eeeeee",radius:"0px",style:"solid",width:"2px"},...l.style||{}}}))},text:(0,t.__)("Or create a new form","newsletter-optin-box")})})]})})},icon:c,save:function(e){return null}})})();